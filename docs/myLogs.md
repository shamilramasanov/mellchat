2025-10-29T08:45:19.930311667Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:19.930311897Z [inf]    "version": "1.0.0"
2025-10-29T08:45:19.930319787Z [inf]  }
2025-10-29T08:45:19.930322740Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:19.930324872Z [inf]    "version": "1.0.0"
2025-10-29T08:45:19.930327699Z [inf]  2025-10-29 08:45:19.840 [[32minfo[39m] databaseRoutes constructor: {
2025-10-29T08:45:19.930333053Z [inf]    "version": "1.0.0"
2025-10-29T08:45:19.930335071Z [inf]  }
2025-10-29T08:45:19.930568725Z [err]  (Use `node --trace-deprecation ...` to show where the warning was created)
2025-10-29T08:45:20.692593124Z [err]  npm warn config production Use `--omit=dev` instead.
2025-10-29T08:45:22.505824844Z [inf]  
2025-10-29T08:45:22.505829025Z [inf]  > mellchat-api@1.0.0 postinstall
2025-10-29T08:45:22.505833034Z [inf]  > npm audit fix --force
2025-10-29T08:45:22.505837367Z [inf]  
2025-10-29T08:45:22.606664885Z [err]  npm warn config production Use `--omit=dev` instead.
2025-10-29T08:45:22.612052676Z [err]  npm warn using --force Recommended protections disabled.
2025-10-29T08:45:23.636224932Z [inf]  
2025-10-29T08:45:23.636233819Z [inf]  up to date, audited 354 packages in 1s
2025-10-29T08:45:23.636239192Z [inf]  
2025-10-29T08:45:23.636244106Z [inf]  36 packages are looking for funding
2025-10-29T08:45:23.636248620Z [inf]    run `npm fund` for details
2025-10-29T08:45:23.636253131Z [inf]  
2025-10-29T08:45:23.636257636Z [inf]  found 0 vulnerabilities
2025-10-29T08:45:23.648024218Z [inf]  
2025-10-29T08:45:23.648030642Z [inf]  up to date, audited 354 packages in 3s
2025-10-29T08:45:23.648035223Z [inf]  
2025-10-29T08:45:23.648039314Z [inf]  36 packages are looking for funding
2025-10-29T08:45:23.648043166Z [inf]    run `npm fund` for details
2025-10-29T08:45:23.648047724Z [inf]  
2025-10-29T08:45:23.648052662Z [inf]  found 0 vulnerabilities
2025-10-29T08:45:23.769239179Z [err]  npm warn config production Use `--omit=dev` instead.
2025-10-29T08:45:23.791013119Z [inf]  
2025-10-29T08:45:23.791018911Z [inf]  > mellchat-api@1.0.0 start
2025-10-29T08:45:23.791024358Z [inf]  > NODE_ENV=production node src/index.js
2025-10-29T08:45:23.791030116Z [inf]  
2025-10-29T08:45:24.089727326Z [inf]  2025-10-29 08:45:24.086 [[32minfo[39m] ‚úÖ Rate limiter initialized {
2025-10-29T08:45:24.089735523Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:24.089742057Z [inf]    "version": "1.0.0"
2025-10-29T08:45:24.089747426Z [inf]  }
2025-10-29T08:45:24.226149689Z [inf]  2025-10-29 08:45:24.225 [[32minfo[39m] Skipping BullMQ workers initialization (fallback to direct processing) {
2025-10-29T08:45:24.226162927Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:24.226171961Z [inf]    "version": "1.0.0"
2025-10-29T08:45:24.226180094Z [inf]  }
2025-10-29T08:45:24.231075901Z [inf]  2025-10-29 08:45:24.225 [[32minfo[39m] BullMQ queues not available, using direct processing {
2025-10-29T08:45:24.231086541Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:24.231094671Z [inf]    "version": "1.0.0"
2025-10-29T08:45:24.231101410Z [inf]  }
2025-10-29T08:45:24.968993820Z [inf]  }
2025-10-29T08:45:24.969003104Z [inf]  2025-10-29 08:45:24.963 [[32minfo[39m] ‚úÖ CORS middleware configured {
2025-10-29T08:45:24.969006356Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:24.969015861Z [inf]    "version": "1.0.0",
2025-10-29T08:45:24.969022409Z [inf]    "allowedOrigins": [
2025-10-29T08:45:24.969030904Z [inf]      "http://localhost:3000",
2025-10-29T08:45:24.969035174Z [inf]  2025-10-29 08:45:24.960 [[32minfo[39m] Running on Railway, using Railway PORT: {
2025-10-29T08:45:24.969038949Z [inf]      "http://localhost:5173",
2025-10-29T08:45:24.969041435Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:24.969042086Z [inf]      "https://mellchat-v5y7.vercel.app",
2025-10-29T08:45:24.969048273Z [inf]    "version": "1.0.0"
2025-10-29T08:45:24.969051534Z [inf]      "http://localhost:5174",
2025-10-29T08:45:24.969053885Z [inf]      "https://mellchat.live",
2025-10-29T08:45:24.969054845Z [inf]  }
2025-10-29T08:45:24.969062567Z [inf]      "http://192.168.19.76:5173",
2025-10-29T08:45:24.969063756Z [inf]  2025-10-29 08:45:24.961 [[32minfo[39m] Starting server with config: {
2025-10-29T08:45:24.969067915Z [inf]      "https://www.mellchat.live",
2025-10-29T08:45:24.969070795Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:24.969074598Z [inf]      "https://mellchat.vercel.app",
2025-10-29T08:45:24.969077403Z [inf]      "https://mellchat-v5y7.vercel.app"
2025-10-29T08:45:24.969077655Z [inf]    "version": "1.0.0",
2025-10-29T08:45:24.969084005Z [inf]    "PORT": "3001",
2025-10-29T08:45:24.969086519Z [inf]    ]
2025-10-29T08:45:24.969089045Z [inf]    "HOST": "0.0.0.0",
2025-10-29T08:45:24.969093291Z [inf]    "NODE_ENV": "production",
2025-10-29T08:45:24.969098486Z [inf]    "DATABASE_URL": "SET",
2025-10-29T08:45:24.969104040Z [inf]    "REDIS_URL": "SET"
2025-10-29T08:45:24.969108707Z [inf]  }
2025-10-29T08:45:24.969112912Z [inf]  2025-10-29 08:45:24.963 [[32minfo[39m] CORS allowed origins: {
2025-10-29T08:45:24.969492259Z [inf]  }
2025-10-29T08:45:24.969498865Z [inf]  2025-10-29 08:45:24.966 [[32minfo[39m] Setting up Passport... {
2025-10-29T08:45:24.969504124Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:24.969512459Z [inf]    "version": "1.0.0"
2025-10-29T08:45:24.969518767Z [inf]  }
2025-10-29T08:45:24.969535302Z [inf]  2025-10-29 08:45:24.966 [[32minfo[39m] ‚úÖ Passport initialized {
2025-10-29T08:45:24.969541285Z [inf]    "version": "1.0.0"
2025-10-29T08:45:24.969544557Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:24.969567148Z [inf]  }
2025-10-29T08:45:24.969603935Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:24.969610251Z [inf]    "version": "1.0.0"
2025-10-29T08:45:24.969615634Z [inf]  }
2025-10-29T08:45:24.969620536Z [inf]  2025-10-29 08:45:24.964 [[32minfo[39m] Setting up body parsing middleware... {
2025-10-29T08:45:24.969626359Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:24.969631488Z [inf]    "version": "1.0.0"
2025-10-29T08:45:24.969638007Z [inf]  }
2025-10-29T08:45:24.969642965Z [inf]  2025-10-29 08:45:24.965 [[32minfo[39m] ‚úÖ Body parsing middleware configured {
2025-10-29T08:45:24.969647571Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:24.969652808Z [inf]    "version": "1.0.0"
2025-10-29T08:45:24.969952902Z [inf]  2025-10-29 08:45:24.966 [[32minfo[39m] Setting up request logging... {
2025-10-29T08:45:24.969968454Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:24.969978389Z [inf]    "version": "1.0.0"
2025-10-29T08:45:24.969989216Z [inf]  }
2025-10-29T08:45:24.969996053Z [inf]  2025-10-29 08:45:24.966 [[32minfo[39m] ‚úÖ Request logging configured {
2025-10-29T08:45:24.970004564Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:24.970013025Z [inf]    "version": "1.0.0"
2025-10-29T08:45:24.970178867Z [inf]  }
2025-10-29T08:45:24.970185905Z [inf]  2025-10-29 08:45:24.967 [[32minfo[39m] Setting up health routes... {
2025-10-29T08:45:24.970255197Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:24.970259802Z [inf]    "version": "1.0.0"
2025-10-29T08:45:24.970263970Z [inf]  }
2025-10-29T08:45:24.970268311Z [inf]  2025-10-29 08:45:24.967 [[32minfo[39m] ‚úÖ Health routes configured {
2025-10-29T08:45:24.970272204Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:24.970276096Z [inf]    "version": "1.0.0"
2025-10-29T08:45:24.970279861Z [inf]  }
2025-10-29T08:45:24.970284045Z [inf]  2025-10-29 08:45:24.967 [[32minfo[39m] Setting up metrics endpoint... {
2025-10-29T08:45:24.970287705Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:24.970291609Z [inf]    "version": "1.0.0"
2025-10-29T08:45:24.970297362Z [inf]  }
2025-10-29T08:45:24.970303444Z [inf]  2025-10-29 08:45:24.967 [[32minfo[39m] ‚úÖ Metrics endpoint configured {
2025-10-29T08:45:24.970309704Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:24.970315916Z [inf]    "version": "1.0.0"
2025-10-29T08:45:24.970321685Z [inf]  }
2025-10-29T08:45:24.970328087Z [inf]  2025-10-29 08:45:24.967 [[32minfo[39m] Setting up auth routes... {
2025-10-29T08:45:24.970335217Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:24.970339794Z [inf]    "version": "1.0.0"
2025-10-29T08:45:24.970344150Z [inf]  }
2025-10-29T08:45:24.970349224Z [inf]  2025-10-29 08:45:24.967 [[32minfo[39m] ‚úÖ Auth routes configured {
2025-10-29T08:45:24.970353109Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:24.970360339Z [inf]    "version": "1.0.0"
2025-10-29T08:45:24.970364004Z [inf]  }
2025-10-29T08:45:24.970368059Z [inf]  2025-10-29 08:45:24.968 [[32minfo[39m] Setting up database routes... {
2025-10-29T08:45:24.970372665Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:24.970376553Z [inf]    "version": "1.0.0"
2025-10-29T08:45:24.970380767Z [inf]  }
2025-10-29T08:45:24.970386732Z [inf]  2025-10-29 08:45:24.968 [[32minfo[39m] Loading databaseRoutes... {
2025-10-29T08:45:24.970677645Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:24.970681334Z [inf]    "version": "1.0.0"
2025-10-29T08:45:24.970685231Z [inf]  }
2025-10-29T08:45:24.970689272Z [inf]  2025-10-29 08:45:24.968 [[32minfo[39m] databaseRoutes type: {
2025-10-29T08:45:24.970693872Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:24.970697705Z [inf]    "version": "1.0.0"
2025-10-29T08:45:24.970701404Z [inf]  }
2025-10-29T08:45:24.970705397Z [inf]  2025-10-29 08:45:24.968 [[32minfo[39m] databaseRoutes constructor: {
2025-10-29T08:45:24.970709069Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:24.970712793Z [inf]    "version": "1.0.0"
2025-10-29T08:45:24.970716764Z [inf]  }
2025-10-29T08:45:24.970720437Z [inf]  2025-10-29 08:45:24.968 [[31merror[39m] ‚ùå Error setting up database routes: Router.use() requires a middleware function but got a undefined {
2025-10-29T08:45:24.970724112Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:24.970728354Z [inf]    "version": "1.0.0",
2025-10-29T08:45:24.970732200Z [inf]    "stack": "TypeError: Router.use() requires a middleware function but got a undefined\n    at Function.use (/app/backend/api-gateway/node_modules/express/lib/router/index.js:469:13)\n    at Function.<anonymous> (/app/backend/api-gateway/node_modules/express/lib/application.js:227:21)\n    at Array.forEach (<anonymous>)\n    at Function.use (/app/backend/api-gateway/node_modules/express/lib/application.js:224:7)\n    at Object.<anonymous> (/app/backend/api-gateway/src/index.js:192:7)\n    at Module._compile (node:internal/modules/cjs/loader:1546:14)\n    at Object..js (node:internal/modules/cjs/loader:1689:10)\n    at Module.load (node:internal/modules/cjs/loader:1318:32)\n    at Function._load (node:internal/modules/cjs/loader:1128:12)\n    at TracingChannel.traceSync (node:diagnostics_channel:315:14)"
2025-10-29T08:45:24.970736887Z [inf]  }
2025-10-29T08:45:24.975470152Z [err]  (node:38) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.
2025-10-29T08:45:24.975477364Z [err]  (Use `node --trace-deprecation ...` to show where the warning was created)
2025-10-29T08:45:26.065488018Z [err]  npm warn config production Use `--omit=dev` instead.
2025-10-29T08:45:28.030908790Z [inf]  
2025-10-29T08:45:28.030916705Z [inf]  > mellchat-api@1.0.0 postinstall
2025-10-29T08:45:28.030924581Z [inf]  > npm audit fix --force
2025-10-29T08:45:28.030932268Z [inf]  
2025-10-29T08:45:28.034252132Z [err]  npm warn config production Use `--omit=dev` instead.
2025-10-29T08:45:28.038933431Z [err]  npm warn using --force Recommended protections disabled.
2025-10-29T08:45:29.025842634Z [inf]  
2025-10-29T08:45:29.025847878Z [inf]  up to date, audited 354 packages in 1s
2025-10-29T08:45:29.025852256Z [inf]  
2025-10-29T08:45:29.025857569Z [inf]  36 packages are looking for funding
2025-10-29T08:45:29.025862708Z [inf]    run `npm fund` for details
2025-10-29T08:45:29.025867767Z [inf]  
2025-10-29T08:45:29.025871935Z [inf]  found 0 vulnerabilities
2025-10-29T08:45:29.029856495Z [inf]  
2025-10-29T08:45:29.029862847Z [inf]  up to date, audited 354 packages in 3s
2025-10-29T08:45:29.029867805Z [inf]  
2025-10-29T08:45:29.029872347Z [inf]  36 packages are looking for funding
2025-10-29T08:45:29.029876946Z [inf]    run `npm fund` for details
2025-10-29T08:45:29.034278883Z [inf]  
2025-10-29T08:45:29.034289425Z [inf]  found 0 vulnerabilities
2025-10-29T08:45:29.145495450Z [err]  npm warn config production Use `--omit=dev` instead.
2025-10-29T08:45:29.166457278Z [inf]  
2025-10-29T08:45:29.166462856Z [inf]  > mellchat-api@1.0.0 start
2025-10-29T08:45:29.166467550Z [inf]  > NODE_ENV=production node src/index.js
2025-10-29T08:45:29.166471328Z [inf]  
2025-10-29T08:45:29.501838489Z [inf]  2025-10-29 08:45:29.470 [[32minfo[39m] ‚úÖ Rate limiter initialized {
2025-10-29T08:45:29.501844632Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:29.501848949Z [inf]    "version": "1.0.0"
2025-10-29T08:45:29.501852766Z [inf]  }
2025-10-29T08:45:29.648368080Z [inf]  2025-10-29 08:45:29.620 [[32minfo[39m] Skipping BullMQ workers initialization (fallback to direct processing) {
2025-10-29T08:45:29.648373014Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:29.648380032Z [inf]    "version": "1.0.0"
2025-10-29T08:45:29.648388029Z [inf]  }
2025-10-29T08:45:29.648395012Z [inf]  2025-10-29 08:45:29.621 [[32minfo[39m] BullMQ queues not available, using direct processing {
2025-10-29T08:45:29.648404790Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:29.648412658Z [inf]    "version": "1.0.0"
2025-10-29T08:45:29.648419521Z [inf]  }
2025-10-29T08:45:30.383518629Z [inf]  2025-10-29 08:45:30.379 [[32minfo[39m] Running on Railway, using Railway PORT: {
2025-10-29T08:45:30.383532247Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:30.383542533Z [inf]    "version": "1.0.0"
2025-10-29T08:45:30.383553343Z [inf]  }
2025-10-29T08:45:30.383562073Z [inf]  2025-10-29 08:45:30.380 [[32minfo[39m] Starting server with config: {
2025-10-29T08:45:30.383569136Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:30.383576408Z [inf]    "version": "1.0.0",
2025-10-29T08:45:30.383583406Z [inf]    "PORT": "3001",
2025-10-29T08:45:30.383589713Z [inf]    "HOST": "0.0.0.0",
2025-10-29T08:45:30.383596483Z [inf]    "NODE_ENV": "production",
2025-10-29T08:45:30.383603262Z [inf]    "DATABASE_URL": "SET",
2025-10-29T08:45:30.383609735Z [inf]    "REDIS_URL": "SET"
2025-10-29T08:45:30.383616134Z [inf]  }
2025-10-29T08:45:30.384362163Z [inf]  2025-10-29 08:45:30.382 [[32minfo[39m] CORS allowed origins: {
2025-10-29T08:45:30.384362454Z [inf]      "https://www.mellchat.live",
2025-10-29T08:45:30.384369620Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:30.384375231Z [inf]      "https://mellchat-v5y7.vercel.app"
2025-10-29T08:45:30.384375413Z [inf]    "version": "1.0.0",
2025-10-29T08:45:30.384380676Z [inf]    "allowedOrigins": [
2025-10-29T08:45:30.384385450Z [inf]    ]
2025-10-29T08:45:30.384385947Z [inf]      "http://localhost:3000",
2025-10-29T08:45:30.384392649Z [inf]      "http://localhost:5173",
2025-10-29T08:45:30.384395841Z [inf]  }
2025-10-29T08:45:30.384399062Z [inf]      "http://localhost:5174",
2025-10-29T08:45:30.384403949Z [inf]      "http://192.168.19.76:5173",
2025-10-29T08:45:30.384408316Z [inf]      "https://mellchat.vercel.app",
2025-10-29T08:45:30.384412160Z [inf]      "https://mellchat-v5y7.vercel.app",
2025-10-29T08:45:30.384417602Z [inf]      "https://mellchat.live",
2025-10-29T08:45:30.384695593Z [inf]  2025-10-29 08:45:30.383 [[32minfo[39m] ‚úÖ CORS middleware configured {
2025-10-29T08:45:30.384703998Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:30.384711747Z [inf]    "version": "1.0.0"
2025-10-29T08:45:30.384717957Z [inf]  }
2025-10-29T08:45:30.385138706Z [inf]  2025-10-29 08:45:30.384 [[32minfo[39m] Setting up body parsing middleware... {
2025-10-29T08:45:30.385144532Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:30.385148780Z [inf]    "version": "1.0.0"
2025-10-29T08:45:30.385154629Z [inf]  }
2025-10-29T08:45:30.390421056Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:30.390421732Z [inf]  2025-10-29 08:45:30.385 [[32minfo[39m] ‚úÖ Body parsing middleware configured {
2025-10-29T08:45:30.390433133Z [inf]    "version": "1.0.0"
2025-10-29T08:45:30.390434823Z [inf]  }
2025-10-29T08:45:30.390435133Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:30.390443899Z [inf]  }
2025-10-29T08:45:30.390445573Z [inf]    "version": "1.0.0"
2025-10-29T08:45:30.390449473Z [inf]  2025-10-29 08:45:30.386 [[32minfo[39m] Setting up request logging... {
2025-10-29T08:45:30.390452849Z [inf]  }
2025-10-29T08:45:30.390456675Z [inf]  2025-10-29 08:45:30.387 [[32minfo[39m] ‚úÖ Health routes configured {
2025-10-29T08:45:30.390459444Z [inf]  2025-10-29 08:45:30.385 [[32minfo[39m] Setting up Passport... {
2025-10-29T08:45:30.390463652Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:30.390466710Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:30.390468571Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:30.390474950Z [inf]    "version": "1.0.0"
2025-10-29T08:45:30.390475879Z [inf]    "version": "1.0.0"
2025-10-29T08:45:30.390479121Z [inf]    "version": "1.0.0"
2025-10-29T08:45:30.390485873Z [inf]  }
2025-10-29T08:45:30.390486504Z [inf]  }
2025-10-29T08:45:30.390495637Z [inf]  2025-10-29 08:45:30.386 [[32minfo[39m] ‚úÖ Passport initialized {
2025-10-29T08:45:30.390497070Z [inf]  2025-10-29 08:45:30.386 [[32minfo[39m] ‚úÖ Request logging configured {
2025-10-29T08:45:30.390505370Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:30.390509242Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:30.390511459Z [inf]    "version": "1.0.0"
2025-10-29T08:45:30.390519220Z [inf]    "version": "1.0.0"
2025-10-29T08:45:30.390527983Z [inf]  }
2025-10-29T08:45:30.390535706Z [inf]  2025-10-29 08:45:30.386 [[32minfo[39m] Setting up health routes... {
2025-10-29T08:45:30.390995120Z [inf]  }
2025-10-29T08:45:30.391003257Z [inf]  2025-10-29 08:45:30.387 [[32minfo[39m] Setting up metrics endpoint... {
2025-10-29T08:45:30.391010140Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:30.391016309Z [inf]    "version": "1.0.0"
2025-10-29T08:45:30.391022739Z [inf]  }
2025-10-29T08:45:30.391029040Z [inf]  2025-10-29 08:45:30.387 [[32minfo[39m] ‚úÖ Metrics endpoint configured {
2025-10-29T08:45:30.391033053Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:30.391037305Z [inf]    "version": "1.0.0"
2025-10-29T08:45:30.391041169Z [inf]  }
2025-10-29T08:45:30.391044924Z [inf]  2025-10-29 08:45:30.387 [[32minfo[39m] Setting up auth routes... {
2025-10-29T08:45:30.391049066Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:30.391053309Z [inf]    "version": "1.0.0"
2025-10-29T08:45:30.391057387Z [inf]  }
2025-10-29T08:45:30.391061120Z [inf]  2025-10-29 08:45:30.387 [[32minfo[39m] ‚úÖ Auth routes configured {
2025-10-29T08:45:30.391065251Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:30.391069927Z [inf]    "version": "1.0.0"
2025-10-29T08:45:30.391075705Z [inf]  }
2025-10-29T08:45:30.391082463Z [inf]  2025-10-29 08:45:30.388 [[32minfo[39m] Setting up database routes... {
2025-10-29T08:45:30.391088325Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:30.391094430Z [inf]    "version": "1.0.0"
2025-10-29T08:45:30.391101234Z [inf]  }
2025-10-29T08:45:30.391107285Z [inf]  2025-10-29 08:45:30.388 [[32minfo[39m] Loading databaseRoutes... {
2025-10-29T08:45:30.391112202Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:30.391115993Z [inf]    "version": "1.0.0"
2025-10-29T08:45:30.391119749Z [inf]  }
2025-10-29T08:45:30.391126981Z [inf]  2025-10-29 08:45:30.388 [[32minfo[39m] databaseRoutes type: {
2025-10-29T08:45:30.391132994Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:30.391139007Z [inf]    "version": "1.0.0"
2025-10-29T08:45:30.391360474Z [inf]    "version": "1.0.0",
2025-10-29T08:45:30.391363363Z [inf]  }
2025-10-29T08:45:30.391369651Z [inf]    "stack": "TypeError: Router.use() requires a middleware function but got a undefined\n    at Function.use (/app/backend/api-gateway/node_modules/express/lib/router/index.js:469:13)\n    at Function.<anonymous> (/app/backend/api-gateway/node_modules/express/lib/application.js:227:21)\n    at Array.forEach (<anonymous>)\n    at Function.use (/app/backend/api-gateway/node_modules/express/lib/application.js:224:7)\n    at Object.<anonymous> (/app/backend/api-gateway/src/index.js:192:7)\n    at Module._compile (node:internal/modules/cjs/loader:1546:14)\n    at Object..js (node:internal/modules/cjs/loader:1689:10)\n    at Module.load (node:internal/modules/cjs/loader:1318:32)\n    at Function._load (node:internal/modules/cjs/loader:1128:12)\n    at TracingChannel.traceSync (node:diagnostics_channel:315:14)"
2025-10-29T08:45:30.391370989Z [inf]  2025-10-29 08:45:30.388 [[32minfo[39m] databaseRoutes constructor: {
2025-10-29T08:45:30.391377286Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:30.391378126Z [inf]  }
2025-10-29T08:45:30.391384411Z [inf]    "version": "1.0.0"
2025-10-29T08:45:30.391390456Z [inf]  }
2025-10-29T08:45:30.391397064Z [inf]  2025-10-29 08:45:30.389 [[31merror[39m] ‚ùå Error setting up database routes: Router.use() requires a middleware function but got a undefined {
2025-10-29T08:45:30.391403845Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:30.396085546Z [err]  (node:38) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.
2025-10-29T08:45:30.396095527Z [err]  (Use `node --trace-deprecation ...` to show where the warning was created)
2025-10-29T08:45:31.454680018Z [err]  npm warn config production Use `--omit=dev` instead.
2025-10-29T08:45:33.295051346Z [inf]  
2025-10-29T08:45:33.295058137Z [inf]  > mellchat-api@1.0.0 postinstall
2025-10-29T08:45:33.295062677Z [inf]  > npm audit fix --force
2025-10-29T08:45:33.295067404Z [inf]  
2025-10-29T08:45:33.406559719Z [err]  npm warn config production Use `--omit=dev` instead.
2025-10-29T08:45:33.406566916Z [err]  npm warn using --force Recommended protections disabled.
2025-10-29T08:45:34.397189520Z [inf]  
2025-10-29T08:45:34.397198370Z [inf]  up to date, audited 354 packages in 1s
2025-10-29T08:45:34.397206212Z [inf]  
2025-10-29T08:45:34.397213108Z [inf]  36 packages are looking for funding
2025-10-29T08:45:34.397219790Z [inf]    run `npm fund` for details
2025-10-29T08:45:34.397226871Z [inf]  
2025-10-29T08:45:34.397231814Z [inf]  found 0 vulnerabilities
2025-10-29T08:45:34.402090378Z [inf]  
2025-10-29T08:45:34.402096203Z [inf]  up to date, audited 354 packages in 3s
2025-10-29T08:45:34.402101005Z [inf]  
2025-10-29T08:45:34.402105395Z [inf]  36 packages are looking for funding
2025-10-29T08:45:34.402110130Z [inf]    run `npm fund` for details
2025-10-29T08:45:34.407225391Z [inf]  
2025-10-29T08:45:34.407232446Z [inf]  found 0 vulnerabilities
2025-10-29T08:45:34.515031594Z [err]  npm warn config production Use `--omit=dev` instead.
2025-10-29T08:45:34.554737615Z [inf]  
2025-10-29T08:45:34.554743656Z [inf]  > mellchat-api@1.0.0 start
2025-10-29T08:45:34.554748137Z [inf]  > NODE_ENV=production node src/index.js
2025-10-29T08:45:34.554752929Z [inf]  
2025-10-29T08:45:34.852967297Z [inf]  2025-10-29 08:45:34.850 [[32minfo[39m] ‚úÖ Rate limiter initialized {
2025-10-29T08:45:34.852976112Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:34.852982518Z [inf]    "version": "1.0.0"
2025-10-29T08:45:34.852988981Z [inf]  }
2025-10-29T08:45:35.124318547Z [inf]  2025-10-29 08:45:34.995 [[32minfo[39m] BullMQ queues not available, using direct processing {
2025-10-29T08:45:35.124327622Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:35.124331550Z [inf]  2025-10-29 08:45:34.994 [[32minfo[39m] Skipping BullMQ workers initialization (fallback to direct processing) {
2025-10-29T08:45:35.124335199Z [inf]    "version": "1.0.0"
2025-10-29T08:45:35.124337237Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:35.124340955Z [inf]  }
2025-10-29T08:45:35.124343228Z [inf]    "version": "1.0.0"
2025-10-29T08:45:35.124347775Z [inf]  }
2025-10-29T08:45:35.758285240Z [inf]  2025-10-29 08:45:35.750 [[32minfo[39m] Running on Railway, using Railway PORT: {
2025-10-29T08:45:35.758293759Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:35.758300629Z [inf]    "version": "1.0.0"
2025-10-29T08:45:35.758300823Z [inf]    "version": "1.0.0"
2025-10-29T08:45:35.758305627Z [inf]      "https://www.mellchat.live",
2025-10-29T08:45:35.758308235Z [inf]  }
2025-10-29T08:45:35.758314621Z [inf]  }
2025-10-29T08:45:35.758315054Z [inf]  2025-10-29 08:45:35.751 [[32minfo[39m] Starting server with config: {
2025-10-29T08:45:35.758315539Z [inf]      "https://mellchat-v5y7.vercel.app"
2025-10-29T08:45:35.758320956Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:35.758322265Z [inf]    ]
2025-10-29T08:45:35.758325795Z [inf]  2025-10-29 08:45:35.756 [[32minfo[39m] ‚úÖ Body parsing middleware configured {
2025-10-29T08:45:35.758326956Z [inf]    "version": "1.0.0",
2025-10-29T08:45:35.758328550Z [inf]  }
2025-10-29T08:45:35.758333091Z [inf]    "PORT": "3001",
2025-10-29T08:45:35.758337749Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:35.758337815Z [inf]  2025-10-29 08:45:35.754 [[32minfo[39m] ‚úÖ CORS middleware configured {
2025-10-29T08:45:35.758340033Z [inf]    "HOST": "0.0.0.0",
2025-10-29T08:45:35.758345057Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:35.758346708Z [inf]    "NODE_ENV": "production",
2025-10-29T08:45:35.758350847Z [inf]    "version": "1.0.0"
2025-10-29T08:45:35.758353410Z [inf]    "DATABASE_URL": "SET",
2025-10-29T08:45:35.758356707Z [inf]  }
2025-10-29T08:45:35.758358975Z [inf]    "REDIS_URL": "SET"
2025-10-29T08:45:35.758363447Z [inf]  2025-10-29 08:45:35.755 [[32minfo[39m] Setting up body parsing middleware... {
2025-10-29T08:45:35.758363792Z [inf]  }
2025-10-29T08:45:35.758369048Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:35.758370420Z [inf]  2025-10-29 08:45:35.753 [[32minfo[39m] CORS allowed origins: {
2025-10-29T08:45:35.758375019Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:35.758381890Z [inf]    "version": "1.0.0"
2025-10-29T08:45:35.758385165Z [inf]    "version": "1.0.0",
2025-10-29T08:45:35.758389788Z [inf]  }
2025-10-29T08:45:35.758391651Z [inf]    "allowedOrigins": [
2025-10-29T08:45:35.758396189Z [inf]  2025-10-29 08:45:35.756 [[32minfo[39m] Setting up Passport... {
2025-10-29T08:45:35.758400872Z [inf]      "http://localhost:3000",
2025-10-29T08:45:35.758402349Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:35.758407102Z [inf]    "version": "1.0.0"
2025-10-29T08:45:35.758409768Z [inf]      "http://localhost:5173",
2025-10-29T08:45:35.758412878Z [inf]  }
2025-10-29T08:45:35.758419007Z [inf]  2025-10-29 08:45:35.757 [[32minfo[39m] ‚úÖ Passport initialized {
2025-10-29T08:45:35.758419036Z [inf]      "http://localhost:5174",
2025-10-29T08:45:35.758424410Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:35.758428555Z [inf]      "http://192.168.19.76:5173",
2025-10-29T08:45:35.758431043Z [inf]    "version": "1.0.0"
2025-10-29T08:45:35.758433304Z [inf]      "https://mellchat.vercel.app",
2025-10-29T08:45:35.758437618Z [inf]  }
2025-10-29T08:45:35.758438357Z [inf]      "https://mellchat-v5y7.vercel.app",
2025-10-29T08:45:35.758442488Z [inf]      "https://mellchat.live",
2025-10-29T08:45:35.758881219Z [inf]  2025-10-29 08:45:35.757 [[32minfo[39m] Setting up request logging... {
2025-10-29T08:45:35.758886625Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:35.758891310Z [inf]    "version": "1.0.0"
2025-10-29T08:45:35.758895587Z [inf]  }
2025-10-29T08:45:35.758899581Z [inf]  2025-10-29 08:45:35.758 [[32minfo[39m] ‚úÖ Request logging configured {
2025-10-29T08:45:35.758903589Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:35.758907292Z [inf]    "version": "1.0.0"
2025-10-29T08:45:35.758911114Z [inf]  }
2025-10-29T08:45:35.758914900Z [inf]  2025-10-29 08:45:35.758 [[32minfo[39m] Setting up health routes... {
2025-10-29T08:45:35.758919842Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:35.758926001Z [inf]    "version": "1.0.0"
2025-10-29T08:45:35.758932395Z [inf]  }
2025-10-29T08:45:35.759965070Z [inf]  2025-10-29 08:45:35.758 [[32minfo[39m] ‚úÖ Health routes configured {
2025-10-29T08:45:35.759970625Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:35.759975822Z [inf]    "version": "1.0.0"
2025-10-29T08:45:35.759982464Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:35.759983456Z [inf]  }
2025-10-29T08:45:35.759991844Z [inf]  2025-10-29 08:45:35.758 [[32minfo[39m] Setting up metrics endpoint... {
2025-10-29T08:45:35.759994927Z [inf]    "version": "1.0.0"
2025-10-29T08:45:35.759999937Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:35.760004295Z [inf]  }
2025-10-29T08:45:35.760008340Z [inf]    "version": "1.0.0"
2025-10-29T08:45:35.760012374Z [inf]  }
2025-10-29T08:45:35.760016610Z [inf]  2025-10-29 08:45:35.758 [[32minfo[39m] ‚úÖ Metrics endpoint configured {
2025-10-29T08:45:35.760021043Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:35.760024919Z [inf]    "version": "1.0.0"
2025-10-29T08:45:35.760029045Z [inf]  }
2025-10-29T08:45:35.760032648Z [inf]  2025-10-29 08:45:35.759 [[32minfo[39m] Setting up auth routes... {
2025-10-29T08:45:35.760634707Z [inf]  2025-10-29 08:45:35.759 [[32minfo[39m] ‚úÖ Auth routes configured {
2025-10-29T08:45:35.760644788Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:35.760653201Z [inf]    "version": "1.0.0"
2025-10-29T08:45:35.760657552Z [inf]  }
2025-10-29T08:45:35.760661984Z [inf]  2025-10-29 08:45:35.759 [[32minfo[39m] Setting up database routes... {
2025-10-29T08:45:35.760666623Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:35.760671285Z [inf]    "version": "1.0.0"
2025-10-29T08:45:35.760675177Z [inf]  }
2025-10-29T08:45:35.760679369Z [inf]  2025-10-29 08:45:35.759 [[32minfo[39m] Loading databaseRoutes... {
2025-10-29T08:45:35.760683473Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:35.760687778Z [inf]    "version": "1.0.0"
2025-10-29T08:45:35.760692292Z [inf]  }
2025-10-29T08:45:35.761252721Z [inf]  2025-10-29 08:45:35.760 [[32minfo[39m] databaseRoutes type: {
2025-10-29T08:45:35.761261940Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:35.761272943Z [inf]    "version": "1.0.0"
2025-10-29T08:45:35.761281322Z [inf]  }
2025-10-29T08:45:35.761289180Z [inf]  2025-10-29 08:45:35.760 [[32minfo[39m] databaseRoutes constructor: {
2025-10-29T08:45:35.761296679Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:35.761304493Z [inf]    "version": "1.0.0"
2025-10-29T08:45:35.761310613Z [inf]  }
2025-10-29T08:45:35.761877080Z [inf]  2025-10-29 08:45:35.761 [[31merror[39m] ‚ùå Error setting up database routes: Router.use() requires a middleware function but got a undefined {
2025-10-29T08:45:35.761884383Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:35.761890374Z [inf]    "version": "1.0.0",
2025-10-29T08:45:35.761901839Z [inf]    "stack": "TypeError: Router.use() requires a middleware function but got a undefined\n    at Function.use (/app/backend/api-gateway/node_modules/express/lib/router/index.js:469:13)\n    at Function.<anonymous> (/app/backend/api-gateway/node_modules/express/lib/application.js:227:21)\n    at Array.forEach (<anonymous>)\n    at Function.use (/app/backend/api-gateway/node_modules/express/lib/application.js:224:7)\n    at Object.<anonymous> (/app/backend/api-gateway/src/index.js:192:7)\n    at Module._compile (node:internal/modules/cjs/loader:1546:14)\n    at Object..js (node:internal/modules/cjs/loader:1689:10)\n    at Module.load (node:internal/modules/cjs/loader:1318:32)\n    at Function._load (node:internal/modules/cjs/loader:1128:12)\n    at TracingChannel.traceSync (node:diagnostics_channel:315:14)"
2025-10-29T08:45:35.761908035Z [inf]  }
2025-10-29T08:45:35.766830147Z [err]  (node:38) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.
2025-10-29T08:45:35.766839570Z [err]  (Use `node --trace-deprecation ...` to show where the warning was created)
2025-10-29T08:45:36.574766477Z [err]  npm warn config production Use `--omit=dev` instead.
2025-10-29T08:45:38.410294216Z [inf]  
2025-10-29T08:45:38.410299628Z [inf]  > mellchat-api@1.0.0 postinstall
2025-10-29T08:45:38.410304028Z [inf]  > npm audit fix --force
2025-10-29T08:45:38.410307823Z [inf]  
2025-10-29T08:45:38.538351186Z [err]  npm warn config production Use `--omit=dev` instead.
2025-10-29T08:45:38.538361418Z [err]  npm warn using --force Recommended protections disabled.
2025-10-29T08:45:39.500536299Z [inf]  
2025-10-29T08:45:39.500546649Z [inf]  up to date, audited 354 packages in 1s
2025-10-29T08:45:39.500552147Z [inf]  
2025-10-29T08:45:39.500557132Z [inf]  36 packages are looking for funding
2025-10-29T08:45:39.500561919Z [inf]    run `npm fund` for details
2025-10-29T08:45:39.500567052Z [inf]  
2025-10-29T08:45:39.500572145Z [inf]  found 0 vulnerabilities
2025-10-29T08:45:39.505204362Z [inf]  
2025-10-29T08:45:39.505212711Z [inf]  found 0 vulnerabilities
2025-10-29T08:45:39.505252073Z [inf]  
2025-10-29T08:45:39.505263241Z [inf]  up to date, audited 354 packages in 3s
2025-10-29T08:45:39.505273667Z [inf]  
2025-10-29T08:45:39.505283452Z [inf]  36 packages are looking for funding
2025-10-29T08:45:39.505292998Z [inf]    run `npm fund` for details
2025-10-29T08:45:39.612695345Z [err]  npm warn config production Use `--omit=dev` instead.
2025-10-29T08:45:39.633537997Z [inf]  
2025-10-29T08:45:39.633542575Z [inf]  > mellchat-api@1.0.0 start
2025-10-29T08:45:39.633547226Z [inf]  > NODE_ENV=production node src/index.js
2025-10-29T08:45:39.633551634Z [inf]  
2025-10-29T08:45:39.960365183Z [inf]  2025-10-29 08:45:39.955 [[32minfo[39m] ‚úÖ Rate limiter initialized {
2025-10-29T08:45:39.960373128Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:39.960382802Z [inf]    "version": "1.0.0"
2025-10-29T08:45:39.960391091Z [inf]  }
2025-10-29T08:45:40.152893471Z [inf]    "version": "1.0.0"
2025-10-29T08:45:40.152904370Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:40.152906673Z [inf]  }
2025-10-29T08:45:40.152910599Z [inf]  2025-10-29 08:45:40.108 [[32minfo[39m] BullMQ queues not available, using direct processing {
2025-10-29T08:45:40.152916637Z [inf]    "version": "1.0.0"
2025-10-29T08:45:40.152922700Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:40.152927645Z [inf]  }
2025-10-29T08:45:40.152931974Z [inf]  2025-10-29 08:45:40.107 [[32minfo[39m] Skipping BullMQ workers initialization (fallback to direct processing) {
2025-10-29T08:45:40.869977405Z [inf]  2025-10-29 08:45:40.865 [[32minfo[39m] Running on Railway, using Railway PORT: {
2025-10-29T08:45:40.869985169Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:40.869990364Z [inf]    "version": "1.0.0"
2025-10-29T08:45:40.869994008Z [inf]    "version": "1.0.0",
2025-10-29T08:45:40.869997150Z [inf]  }
2025-10-29T08:45:40.870003255Z [inf]  2025-10-29 08:45:40.866 [[32minfo[39m] Starting server with config: {
2025-10-29T08:45:40.870005538Z [inf]    "allowedOrigins": [
2025-10-29T08:45:40.870008728Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:40.870012633Z [inf]      "http://localhost:3000",
2025-10-29T08:45:40.870017614Z [inf]      "http://localhost:5173",
2025-10-29T08:45:40.870022889Z [inf]      "http://localhost:5174",
2025-10-29T08:45:40.870023662Z [inf]    "version": "1.0.0",
2025-10-29T08:45:40.870029447Z [inf]      "http://192.168.19.76:5173",
2025-10-29T08:45:40.870032281Z [inf]    "PORT": "3001",
2025-10-29T08:45:40.870035624Z [inf]      "https://mellchat.vercel.app",
2025-10-29T08:45:40.870041966Z [inf]      "https://mellchat-v5y7.vercel.app",
2025-10-29T08:45:40.870042110Z [inf]    "HOST": "0.0.0.0",
2025-10-29T08:45:40.870046971Z [inf]      "https://mellchat.live",
2025-10-29T08:45:40.870052001Z [inf]    "NODE_ENV": "production",
2025-10-29T08:45:40.870053581Z [inf]      "https://www.mellchat.live",
2025-10-29T08:45:40.870059021Z [inf]      "https://mellchat-v5y7.vercel.app"
2025-10-29T08:45:40.870063500Z [inf]    "DATABASE_URL": "SET",
2025-10-29T08:45:40.870065653Z [inf]    ]
2025-10-29T08:45:40.870071837Z [inf]  }
2025-10-29T08:45:40.870073410Z [inf]    "REDIS_URL": "SET"
2025-10-29T08:45:40.870081581Z [inf]  }
2025-10-29T08:45:40.870088282Z [inf]  2025-10-29 08:45:40.868 [[32minfo[39m] CORS allowed origins: {
2025-10-29T08:45:40.870095933Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:40.870272878Z [inf]  2025-10-29 08:45:40.869 [[32minfo[39m] ‚úÖ CORS middleware configured {
2025-10-29T08:45:40.870279391Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:40.870285678Z [inf]    "version": "1.0.0"
2025-10-29T08:45:40.870296392Z [inf]  }
2025-10-29T08:45:40.871069539Z [inf]  2025-10-29 08:45:40.869 [[32minfo[39m] Setting up body parsing middleware... {
2025-10-29T08:45:40.871076474Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:40.871080990Z [inf]    "version": "1.0.0"
2025-10-29T08:45:40.871084956Z [inf]  }
2025-10-29T08:45:40.872254290Z [inf]  2025-10-29 08:45:40.870 [[32minfo[39m] ‚úÖ Body parsing middleware configured {
2025-10-29T08:45:40.872260418Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:40.872277513Z [inf]    "version": "1.0.0"
2025-10-29T08:45:40.872281804Z [inf]  }
2025-10-29T08:45:40.872286006Z [inf]  2025-10-29 08:45:40.871 [[32minfo[39m] Setting up Passport... {
2025-10-29T08:45:40.872289835Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:40.872293787Z [inf]    "version": "1.0.0"
2025-10-29T08:45:40.872298414Z [inf]  }
2025-10-29T08:45:40.873190627Z [inf]  2025-10-29 08:45:40.872 [[32minfo[39m] ‚úÖ Passport initialized {
2025-10-29T08:45:40.873198136Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:40.873204109Z [inf]    "version": "1.0.0"
2025-10-29T08:45:40.873208869Z [inf]  }
2025-10-29T08:45:40.873213091Z [inf]  2025-10-29 08:45:40.872 [[32minfo[39m] Setting up request logging... {
2025-10-29T08:45:40.873217456Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:40.873221848Z [inf]    "version": "1.0.0"
2025-10-29T08:45:40.873227531Z [inf]  }
2025-10-29T08:45:40.873231801Z [inf]  2025-10-29 08:45:40.872 [[32minfo[39m] ‚úÖ Request logging configured {
2025-10-29T08:45:40.873236363Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:40.873240502Z [inf]    "version": "1.0.0"
2025-10-29T08:45:40.873244338Z [inf]  }
2025-10-29T08:45:40.874362822Z [inf]  2025-10-29 08:45:40.872 [[32minfo[39m] Setting up health routes... {
2025-10-29T08:45:40.874368488Z [inf]  }
2025-10-29T08:45:40.874373026Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:40.874376121Z [inf]    "version": "1.0.0"
2025-10-29T08:45:40.874380710Z [inf]    "version": "1.0.0"
2025-10-29T08:45:40.874385711Z [inf]  }
2025-10-29T08:45:40.874388020Z [inf]  }
2025-10-29T08:45:40.874393566Z [inf]  2025-10-29 08:45:40.873 [[32minfo[39m] Setting up auth routes... {
2025-10-29T08:45:40.874396257Z [inf]  2025-10-29 08:45:40.872 [[32minfo[39m] ‚úÖ Health routes configured {
2025-10-29T08:45:40.874400602Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:40.874405907Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:40.874407922Z [inf]    "version": "1.0.0"
2025-10-29T08:45:40.874416862Z [inf]    "version": "1.0.0"
2025-10-29T08:45:40.874416943Z [inf]  }
2025-10-29T08:45:40.874424178Z [inf]  2025-10-29 08:45:40.873 [[32minfo[39m] ‚úÖ Auth routes configured {
2025-10-29T08:45:40.874427909Z [inf]  }
2025-10-29T08:45:40.874431919Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:40.874436131Z [inf]  2025-10-29 08:45:40.873 [[32minfo[39m] Setting up metrics endpoint... {
2025-10-29T08:45:40.874439194Z [inf]    "version": "1.0.0"
2025-10-29T08:45:40.874443363Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:40.874449147Z [inf]    "version": "1.0.0"
2025-10-29T08:45:40.874455031Z [inf]  }
2025-10-29T08:45:40.874460763Z [inf]  2025-10-29 08:45:40.873 [[32minfo[39m] ‚úÖ Metrics endpoint configured {
2025-10-29T08:45:40.874466222Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:40.875117703Z [inf]  2025-10-29 08:45:40.873 [[32minfo[39m] Setting up database routes... {
2025-10-29T08:45:40.875122888Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:40.875127149Z [inf]    "version": "1.0.0"
2025-10-29T08:45:40.875131126Z [inf]  }
2025-10-29T08:45:40.875134972Z [inf]  2025-10-29 08:45:40.873 [[32minfo[39m] Loading databaseRoutes... {
2025-10-29T08:45:40.875172299Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:40.875176613Z [inf]    "version": "1.0.0"
2025-10-29T08:45:40.875180421Z [inf]  }
2025-10-29T08:45:40.875184280Z [inf]  2025-10-29 08:45:40.874 [[32minfo[39m] databaseRoutes type: {
2025-10-29T08:45:40.875188604Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:40.875192589Z [inf]    "version": "1.0.0"
2025-10-29T08:45:40.875196472Z [inf]  }
2025-10-29T08:45:40.875200701Z [inf]  2025-10-29 08:45:40.874 [[32minfo[39m] databaseRoutes constructor: {
2025-10-29T08:45:40.875204722Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:40.875208675Z [inf]    "version": "1.0.0"
2025-10-29T08:45:40.875212438Z [inf]  }
2025-10-29T08:45:40.875634681Z [inf]  2025-10-29 08:45:40.874 [[31merror[39m] ‚ùå Error setting up database routes: Router.use() requires a middleware function but got a undefined {
2025-10-29T08:45:40.875641341Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:40.875645773Z [inf]    "version": "1.0.0",
2025-10-29T08:45:40.875649755Z [inf]    "stack": "TypeError: Router.use() requires a middleware function but got a undefined\n    at Function.use (/app/backend/api-gateway/node_modules/express/lib/router/index.js:469:13)\n    at Function.<anonymous> (/app/backend/api-gateway/node_modules/express/lib/application.js:227:21)\n    at Array.forEach (<anonymous>)\n    at Function.use (/app/backend/api-gateway/node_modules/express/lib/application.js:224:7)\n    at Object.<anonymous> (/app/backend/api-gateway/src/index.js:192:7)\n    at Module._compile (node:internal/modules/cjs/loader:1546:14)\n    at Object..js (node:internal/modules/cjs/loader:1689:10)\n    at Module.load (node:internal/modules/cjs/loader:1318:32)\n    at Function._load (node:internal/modules/cjs/loader:1128:12)\n    at TracingChannel.traceSync (node:diagnostics_channel:315:14)"
2025-10-29T08:45:40.875655090Z [inf]  }
2025-10-29T08:45:40.880631227Z [err]  (node:38) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.
2025-10-29T08:45:40.880635727Z [err]  (Use `node --trace-deprecation ...` to show where the warning was created)
2025-10-29T08:45:41.689220025Z [err]  npm warn config production Use `--omit=dev` instead.
2025-10-29T08:45:43.508889974Z [inf]  
2025-10-29T08:45:43.508894538Z [inf]  > mellchat-api@1.0.0 postinstall
2025-10-29T08:45:43.508899500Z [inf]  > npm audit fix --force
2025-10-29T08:45:43.508904464Z [inf]  
2025-10-29T08:45:43.614348973Z [err]  npm warn config production Use `--omit=dev` instead.
2025-10-29T08:45:43.614354383Z [err]  npm warn using --force Recommended protections disabled.
2025-10-29T08:45:44.532344653Z [inf]  
2025-10-29T08:45:44.532353032Z [inf]  up to date, audited 354 packages in 950ms
2025-10-29T08:45:44.532359881Z [inf]  
2025-10-29T08:45:44.532364638Z [inf]  36 packages are looking for funding
2025-10-29T08:45:44.532369246Z [inf]    run `npm fund` for details
2025-10-29T08:45:44.532374148Z [inf]  
2025-10-29T08:45:44.532378518Z [inf]  found 0 vulnerabilities
2025-10-29T08:45:44.542168408Z [inf]  
2025-10-29T08:45:44.542168438Z [inf]    run `npm fund` for details
2025-10-29T08:45:44.542177213Z [inf]  up to date, audited 354 packages in 3s
2025-10-29T08:45:44.542184863Z [inf]  
2025-10-29T08:45:44.542191285Z [inf]  36 packages are looking for funding
2025-10-29T08:45:44.542191541Z [inf]  
2025-10-29T08:45:44.542199388Z [inf]  found 0 vulnerabilities
2025-10-29T08:45:44.681026368Z [err]  npm warn config production Use `--omit=dev` instead.
2025-10-29T08:45:44.681030669Z [inf]  
2025-10-29T08:45:44.681034588Z [inf]  > mellchat-api@1.0.0 start
2025-10-29T08:45:44.681039450Z [inf]  > NODE_ENV=production node src/index.js
2025-10-29T08:45:44.681043852Z [inf]  
2025-10-29T08:45:45.090055534Z [inf]  2025-10-29 08:45:44.978 [[32minfo[39m] ‚úÖ Rate limiter initialized {
2025-10-29T08:45:45.090062827Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:45.090070325Z [inf]    "version": "1.0.0"
2025-10-29T08:45:45.090078094Z [inf]  }
2025-10-29T08:45:45.286378186Z [inf]  2025-10-29 08:45:45.125 [[32minfo[39m] Skipping BullMQ workers initialization (fallback to direct processing) {
2025-10-29T08:45:45.286388874Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:45.286397257Z [inf]    "version": "1.0.0"
2025-10-29T08:45:45.286404202Z [inf]  }
2025-10-29T08:45:45.286411936Z [inf]  2025-10-29 08:45:45.126 [[32minfo[39m] BullMQ queues not available, using direct processing {
2025-10-29T08:45:45.286418963Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:45.286428323Z [inf]    "version": "1.0.0"
2025-10-29T08:45:45.286435767Z [inf]  }
2025-10-29T08:45:45.919339343Z [inf]    "NODE_ENV": "production",
2025-10-29T08:45:45.919340521Z [inf]      "https://mellchat.live",
2025-10-29T08:45:45.919347183Z [inf]  2025-10-29 08:45:45.903 [[32minfo[39m] Running on Railway, using Railway PORT: {
2025-10-29T08:45:45.919349249Z [inf]    "DATABASE_URL": "SET",
2025-10-29T08:45:45.919350328Z [inf]      "https://www.mellchat.live",
2025-10-29T08:45:45.919358347Z [inf]      "https://mellchat-v5y7.vercel.app"
2025-10-29T08:45:45.919359002Z [inf]    "REDIS_URL": "SET"
2025-10-29T08:45:45.919360084Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:45.919365830Z [inf]    ]
2025-10-29T08:45:45.919367050Z [inf]  }
2025-10-29T08:45:45.919370975Z [inf]    "version": "1.0.0"
2025-10-29T08:45:45.919374744Z [inf]  }
2025-10-29T08:45:45.919375457Z [inf]  2025-10-29 08:45:45.907 [[32minfo[39m] CORS allowed origins: {
2025-10-29T08:45:45.919382195Z [inf]  }
2025-10-29T08:45:45.919383370Z [inf]  2025-10-29 08:45:45.907 [[32minfo[39m] ‚úÖ CORS middleware configured {
2025-10-29T08:45:45.919383376Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:45.919390748Z [inf]    "version": "1.0.0",
2025-10-29T08:45:45.919392736Z [inf]  2025-10-29 08:45:45.904 [[32minfo[39m] Starting server with config: {
2025-10-29T08:45:45.919399607Z [inf]    "allowedOrigins": [
2025-10-29T08:45:45.919401904Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:45.919407897Z [inf]      "http://localhost:3000",
2025-10-29T08:45:45.919411053Z [inf]    "version": "1.0.0",
2025-10-29T08:45:45.919416030Z [inf]      "http://localhost:5173",
2025-10-29T08:45:45.919420054Z [inf]    "PORT": "3001",
2025-10-29T08:45:45.919424471Z [inf]      "http://localhost:5174",
2025-10-29T08:45:45.919429014Z [inf]    "HOST": "0.0.0.0",
2025-10-29T08:45:45.919436336Z [inf]      "http://192.168.19.76:5173",
2025-10-29T08:45:45.919440345Z [inf]      "https://mellchat.vercel.app",
2025-10-29T08:45:45.919445223Z [inf]      "https://mellchat-v5y7.vercel.app",
2025-10-29T08:45:45.919909004Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:45.919917567Z [inf]    "version": "1.0.0"
2025-10-29T08:45:45.919923751Z [inf]  }
2025-10-29T08:45:45.919931474Z [inf]  2025-10-29 08:45:45.908 [[32minfo[39m] Setting up body parsing middleware... {
2025-10-29T08:45:45.919937970Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:45.919944621Z [inf]    "version": "1.0.0"
2025-10-29T08:45:45.919951857Z [inf]  }
2025-10-29T08:45:45.919959957Z [inf]  2025-10-29 08:45:45.909 [[32minfo[39m] ‚úÖ Body parsing middleware configured {
2025-10-29T08:45:45.919967058Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:45.919974339Z [inf]    "version": "1.0.0"
2025-10-29T08:45:45.919980844Z [inf]  }
2025-10-29T08:45:45.919987653Z [inf]  2025-10-29 08:45:45.910 [[32minfo[39m] Setting up Passport... {
2025-10-29T08:45:45.919994127Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:45.919998423Z [inf]    "version": "1.0.0"
2025-10-29T08:45:45.920003008Z [inf]  }
2025-10-29T08:45:45.920009130Z [inf]  2025-10-29 08:45:45.910 [[32minfo[39m] ‚úÖ Passport initialized {
2025-10-29T08:45:45.920013834Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:45.920018371Z [inf]    "version": "1.0.0"
2025-10-29T08:45:45.920022313Z [inf]  }
2025-10-29T08:45:45.920026116Z [inf]  2025-10-29 08:45:45.911 [[32minfo[39m] Setting up request logging... {
2025-10-29T08:45:45.920035719Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:45.920040827Z [inf]    "version": "1.0.0"
2025-10-29T08:45:45.920044982Z [inf]  }
2025-10-29T08:45:45.920050500Z [inf]  2025-10-29 08:45:45.911 [[32minfo[39m] ‚úÖ Request logging configured {
2025-10-29T08:45:45.920054415Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:45.920058589Z [inf]    "version": "1.0.0"
2025-10-29T08:45:45.920062260Z [inf]  }
2025-10-29T08:45:45.920066315Z [inf]  2025-10-29 08:45:45.911 [[32minfo[39m] Setting up health routes... {
2025-10-29T08:45:45.920510927Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:45.920518953Z [inf]    "version": "1.0.0"
2025-10-29T08:45:45.920525541Z [inf]  }
2025-10-29T08:45:45.920531012Z [inf]  2025-10-29 08:45:45.911 [[32minfo[39m] ‚úÖ Health routes configured {
2025-10-29T08:45:45.920537297Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:45.920543137Z [inf]    "version": "1.0.0"
2025-10-29T08:45:45.920550846Z [inf]  }
2025-10-29T08:45:45.920558585Z [inf]  2025-10-29 08:45:45.911 [[32minfo[39m] Setting up metrics endpoint... {
2025-10-29T08:45:45.920564633Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:45.920571150Z [inf]    "version": "1.0.0"
2025-10-29T08:45:45.920577286Z [inf]  }
2025-10-29T08:45:45.920584289Z [inf]  2025-10-29 08:45:45.912 [[32minfo[39m] ‚úÖ Metrics endpoint configured {
2025-10-29T08:45:45.920591278Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:45.920597105Z [inf]    "version": "1.0.0"
2025-10-29T08:45:45.920604426Z [inf]  }
2025-10-29T08:45:45.920610587Z [inf]  2025-10-29 08:45:45.912 [[32minfo[39m] Setting up auth routes... {
2025-10-29T08:45:45.920616635Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:45.920623066Z [inf]    "version": "1.0.0"
2025-10-29T08:45:45.920630484Z [inf]  }
2025-10-29T08:45:45.920636277Z [inf]  2025-10-29 08:45:45.912 [[32minfo[39m] ‚úÖ Auth routes configured {
2025-10-29T08:45:45.920642356Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:45.920648603Z [inf]    "version": "1.0.0"
2025-10-29T08:45:45.920654376Z [inf]  }
2025-10-29T08:45:45.920660524Z [inf]  2025-10-29 08:45:45.912 [[32minfo[39m] Setting up database routes... {
2025-10-29T08:45:45.920666679Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:45.920672683Z [inf]    "version": "1.0.0"
2025-10-29T08:45:45.920678227Z [inf]  }
2025-10-29T08:45:45.920683414Z [inf]  2025-10-29 08:45:45.912 [[32minfo[39m] Loading databaseRoutes... {
2025-10-29T08:45:45.921219693Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:45.921229227Z [inf]    "version": "1.0.0"
2025-10-29T08:45:45.921235882Z [inf]  }
2025-10-29T08:45:45.921242946Z [inf]  2025-10-29 08:45:45.913 [[32minfo[39m] databaseRoutes type: {
2025-10-29T08:45:45.921249469Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:45.921258232Z [inf]    "version": "1.0.0"
2025-10-29T08:45:45.921264716Z [inf]  }
2025-10-29T08:45:45.921271747Z [inf]  2025-10-29 08:45:45.913 [[32minfo[39m] databaseRoutes constructor: {
2025-10-29T08:45:45.921278069Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:45.921285226Z [inf]    "version": "1.0.0"
2025-10-29T08:45:45.921292422Z [inf]  }
2025-10-29T08:45:45.921299561Z [inf]  2025-10-29 08:45:45.913 [[31merror[39m] ‚ùå Error setting up database routes: Router.use() requires a middleware function but got a undefined {
2025-10-29T08:45:45.921305852Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:45.921312352Z [inf]    "version": "1.0.0",
2025-10-29T08:45:45.921318575Z [inf]    "stack": "TypeError: Router.use() requires a middleware function but got a undefined\n    at Function.use (/app/backend/api-gateway/node_modules/express/lib/router/index.js:469:13)\n    at Function.<anonymous> (/app/backend/api-gateway/node_modules/express/lib/application.js:227:21)\n    at Array.forEach (<anonymous>)\n    at Function.use (/app/backend/api-gateway/node_modules/express/lib/application.js:224:7)\n    at Object.<anonymous> (/app/backend/api-gateway/src/index.js:192:7)\n    at Module._compile (node:internal/modules/cjs/loader:1546:14)\n    at Object..js (node:internal/modules/cjs/loader:1689:10)\n    at Module.load (node:internal/modules/cjs/loader:1318:32)\n    at Function._load (node:internal/modules/cjs/loader:1128:12)\n    at TracingChannel.traceSync (node:diagnostics_channel:315:14)"
2025-10-29T08:45:45.921325959Z [inf]  }
2025-10-29T08:45:45.921332730Z [err]  (node:38) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.
2025-10-29T08:45:45.921488751Z [err]  (Use `node --trace-deprecation ...` to show where the warning was created)
2025-10-29T08:45:45.932736237Z [inf]  2025-10-29 08:45:45.927 [[32minfo[39m] Redis client connected successfully {
2025-10-29T08:45:45.932741689Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:45.932745766Z [inf]    "version": "1.0.0"
2025-10-29T08:45:45.932750058Z [inf]  }
2025-10-29T08:45:46.858805482Z [err]  npm warn config production Use `--omit=dev` instead.
2025-10-29T08:45:48.662298980Z [inf]  
2025-10-29T08:45:48.662306067Z [inf]  > mellchat-api@1.0.0 postinstall
2025-10-29T08:45:48.662311506Z [inf]  > npm audit fix --force
2025-10-29T08:45:48.662316759Z [inf]  
2025-10-29T08:45:48.775719652Z [err]  npm warn config production Use `--omit=dev` instead.
2025-10-29T08:45:48.775727851Z [err]  npm warn using --force Recommended protections disabled.
2025-10-29T08:45:49.731968757Z [inf]  
2025-10-29T08:45:49.731978140Z [inf]  up to date, audited 354 packages in 995ms
2025-10-29T08:45:49.731986342Z [inf]  
2025-10-29T08:45:49.732006854Z [inf]  36 packages are looking for funding
2025-10-29T08:45:49.732012983Z [inf]    run `npm fund` for details
2025-10-29T08:45:49.732542112Z [inf]  
2025-10-29T08:45:49.732547403Z [inf]  found 0 vulnerabilities
2025-10-29T08:45:49.753872199Z [inf]  
2025-10-29T08:45:49.753876004Z [inf]  up to date, audited 354 packages in 3s
2025-10-29T08:45:49.753881613Z [inf]  
2025-10-29T08:45:49.753886792Z [inf]  36 packages are looking for funding
2025-10-29T08:45:49.753890781Z [inf]    run `npm fund` for details
2025-10-29T08:45:49.753894319Z [inf]  
2025-10-29T08:45:49.753897776Z [inf]  found 0 vulnerabilities
2025-10-29T08:45:49.894288342Z [err]  npm warn config production Use `--omit=dev` instead.
2025-10-29T08:45:49.894294299Z [inf]  
2025-10-29T08:45:49.894299936Z [inf]  > mellchat-api@1.0.0 start
2025-10-29T08:45:49.894305581Z [inf]  > NODE_ENV=production node src/index.js
2025-10-29T08:45:49.894311386Z [inf]  
2025-10-29T08:45:50.380609462Z [inf]  }
2025-10-29T08:45:50.380619926Z [inf]  2025-10-29 08:45:50.353 [[32minfo[39m] Skipping BullMQ workers initialization (fallback to direct processing) {
2025-10-29T08:45:50.380620706Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:50.380627655Z [inf]    "version": "1.0.0"
2025-10-29T08:45:50.380628400Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:50.380633067Z [inf]  2025-10-29 08:45:50.354 [[32minfo[39m] BullMQ queues not available, using direct processing {
2025-10-29T08:45:50.380635601Z [inf]  2025-10-29 08:45:50.207 [[32minfo[39m] ‚úÖ Rate limiter initialized {
2025-10-29T08:45:50.380637879Z [inf]    "version": "1.0.0"
2025-10-29T08:45:50.380642956Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:50.380644681Z [inf]  }
2025-10-29T08:45:50.380651315Z [inf]  }
2025-10-29T08:45:50.380652929Z [inf]    "version": "1.0.0"
2025-10-29T08:45:51.113421908Z [inf]  2025-10-29 08:45:51.111 [[32minfo[39m] Running on Railway, using Railway PORT: {
2025-10-29T08:45:51.113437368Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:51.113442087Z [inf]    "version": "1.0.0"
2025-10-29T08:45:51.113446890Z [inf]  }
2025-10-29T08:45:51.118901463Z [inf]  2025-10-29 08:45:51.113 [[32minfo[39m] Starting server with config: {
2025-10-29T08:45:51.118901895Z [inf]    ]
2025-10-29T08:45:51.118911916Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:51.118918329Z [inf]  }
2025-10-29T08:45:51.118921214Z [inf]    "version": "1.0.0",
2025-10-29T08:45:51.118927707Z [inf]  2025-10-29 08:45:51.117 [[32minfo[39m] ‚úÖ CORS middleware configured {
2025-10-29T08:45:51.118928804Z [inf]    "PORT": "3001",
2025-10-29T08:45:51.118936611Z [inf]    "HOST": "0.0.0.0",
2025-10-29T08:45:51.118937550Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:51.118944863Z [inf]    "NODE_ENV": "production",
2025-10-29T08:45:51.118947234Z [inf]    "version": "1.0.0"
2025-10-29T08:45:51.118952140Z [inf]    "DATABASE_URL": "SET",
2025-10-29T08:45:51.118956530Z [inf]  }
2025-10-29T08:45:51.118960830Z [inf]    "REDIS_URL": "SET"
2025-10-29T08:45:51.118967433Z [inf]  }
2025-10-29T08:45:51.118975261Z [inf]  2025-10-29 08:45:51.116 [[32minfo[39m] CORS allowed origins: {
2025-10-29T08:45:51.118982323Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:51.118989047Z [inf]    "version": "1.0.0",
2025-10-29T08:45:51.118996074Z [inf]    "allowedOrigins": [
2025-10-29T08:45:51.119002760Z [inf]      "http://localhost:3000",
2025-10-29T08:45:51.119009260Z [inf]      "http://localhost:5173",
2025-10-29T08:45:51.119016263Z [inf]  2025-10-29 08:45:51.117 [[32minfo[39m] Setting up body parsing middleware... {
2025-10-29T08:45:51.119016647Z [inf]      "http://localhost:5174",
2025-10-29T08:45:51.119022683Z [inf]      "http://192.168.19.76:5173",
2025-10-29T08:45:51.119027030Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:51.119029575Z [inf]      "https://mellchat.vercel.app",
2025-10-29T08:45:51.119034287Z [inf]      "https://mellchat-v5y7.vercel.app",
2025-10-29T08:45:51.119037156Z [inf]    "version": "1.0.0"
2025-10-29T08:45:51.119039668Z [inf]      "https://mellchat.live",
2025-10-29T08:45:51.119045185Z [inf]      "https://www.mellchat.live",
2025-10-29T08:45:51.119047523Z [inf]  }
2025-10-29T08:45:51.119050924Z [inf]      "https://mellchat-v5y7.vercel.app"
2025-10-29T08:45:51.119664307Z [inf]  2025-10-29 08:45:51.118 [[32minfo[39m] ‚úÖ Body parsing middleware configured {
2025-10-29T08:45:51.119672062Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:51.119678739Z [inf]    "version": "1.0.0"
2025-10-29T08:45:51.119685090Z [inf]  }
2025-10-29T08:45:51.120444922Z [inf]  2025-10-29 08:45:51.119 [[32minfo[39m] Setting up Passport... {
2025-10-29T08:45:51.120453953Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:51.120461628Z [inf]    "version": "1.0.0"
2025-10-29T08:45:51.120467685Z [inf]  }
2025-10-29T08:45:51.121237003Z [inf]  2025-10-29 08:45:51.120 [[32minfo[39m] ‚úÖ Passport initialized {
2025-10-29T08:45:51.121244825Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:51.121249741Z [inf]    "version": "1.0.0"
2025-10-29T08:45:51.121254231Z [inf]  }
2025-10-29T08:45:51.121259248Z [inf]  2025-10-29 08:45:51.120 [[32minfo[39m] Setting up request logging... {
2025-10-29T08:45:51.121264190Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:51.121268800Z [inf]    "version": "1.0.0"
2025-10-29T08:45:51.121272774Z [inf]  }
2025-10-29T08:45:51.122330418Z [inf]  }
2025-10-29T08:45:51.122334731Z [inf]  2025-10-29 08:45:51.120 [[32minfo[39m] ‚úÖ Request logging configured {
2025-10-29T08:45:51.122345267Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:51.122354967Z [inf]    "version": "1.0.0"
2025-10-29T08:45:51.122363675Z [inf]  }
2025-10-29T08:45:51.122370321Z [inf]  2025-10-29 08:45:51.121 [[32minfo[39m] Setting up health routes... {
2025-10-29T08:45:51.122376583Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:51.122383740Z [inf]    "version": "1.0.0"
2025-10-29T08:45:51.122391774Z [inf]  }
2025-10-29T08:45:51.122398304Z [inf]  2025-10-29 08:45:51.121 [[32minfo[39m] ‚úÖ Health routes configured {
2025-10-29T08:45:51.122404734Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:51.122411124Z [inf]    "version": "1.0.0"
2025-10-29T08:45:51.122417230Z [inf]  }
2025-10-29T08:45:51.122423907Z [inf]  2025-10-29 08:45:51.121 [[32minfo[39m] Setting up metrics endpoint... {
2025-10-29T08:45:51.122438162Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:51.122444252Z [inf]    "version": "1.0.0"
2025-10-29T08:45:51.122882555Z [inf]  2025-10-29 08:45:51.121 [[32minfo[39m] ‚úÖ Metrics endpoint configured {
2025-10-29T08:45:51.122891110Z [inf]  }
2025-10-29T08:45:51.122893598Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:51.122894167Z [inf]    "version": "1.0.0"
2025-10-29T08:45:51.122901657Z [inf]  }
2025-10-29T08:45:51.122902865Z [inf]  2025-10-29 08:45:51.122 [[32minfo[39m] ‚úÖ Auth routes configured {
2025-10-29T08:45:51.122907634Z [inf]  2025-10-29 08:45:51.121 [[32minfo[39m] Setting up auth routes... {
2025-10-29T08:45:51.122912197Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:51.122914054Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:51.122920527Z [inf]    "version": "1.0.0"
2025-10-29T08:45:51.122922851Z [inf]    "version": "1.0.0"
2025-10-29T08:45:51.122930305Z [inf]  }
2025-10-29T08:45:51.123394975Z [inf]  2025-10-29 08:45:51.122 [[32minfo[39m] Setting up database routes... {
2025-10-29T08:45:51.123401645Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:51.123406655Z [inf]    "version": "1.0.0"
2025-10-29T08:45:51.123411561Z [inf]  }
2025-10-29T08:45:51.123416639Z [inf]  2025-10-29 08:45:51.122 [[32minfo[39m] Loading databaseRoutes... {
2025-10-29T08:45:51.123420712Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:51.123424508Z [inf]    "version": "1.0.0"
2025-10-29T08:45:51.123428437Z [inf]  }
2025-10-29T08:45:51.123432815Z [inf]  2025-10-29 08:45:51.122 [[32minfo[39m] databaseRoutes type: {
2025-10-29T08:45:51.123437227Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:51.123441066Z [inf]    "version": "1.0.0"
2025-10-29T08:45:51.123444825Z [inf]  }
2025-10-29T08:45:51.124026587Z [inf]  2025-10-29 08:45:51.123 [[32minfo[39m] databaseRoutes constructor: {
2025-10-29T08:45:51.124034945Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:51.124041628Z [inf]    "version": "1.0.0"
2025-10-29T08:45:51.124048544Z [inf]  }
2025-10-29T08:45:51.124895778Z [inf]  2025-10-29 08:45:51.123 [[31merror[39m] ‚ùå Error setting up database routes: Router.use() requires a middleware function but got a undefined {
2025-10-29T08:45:51.124903001Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:51.124908286Z [inf]    "version": "1.0.0",
2025-10-29T08:45:51.124913656Z [inf]    "stack": "TypeError: Router.use() requires a middleware function but got a undefined\n    at Function.use (/app/backend/api-gateway/node_modules/express/lib/router/index.js:469:13)\n    at Function.<anonymous> (/app/backend/api-gateway/node_modules/express/lib/application.js:227:21)\n    at Array.forEach (<anonymous>)\n    at Function.use (/app/backend/api-gateway/node_modules/express/lib/application.js:224:7)\n    at Object.<anonymous> (/app/backend/api-gateway/src/index.js:192:7)\n    at Module._compile (node:internal/modules/cjs/loader:1546:14)\n    at Object..js (node:internal/modules/cjs/loader:1689:10)\n    at Module.load (node:internal/modules/cjs/loader:1318:32)\n    at Function._load (node:internal/modules/cjs/loader:1128:12)\n    at TracingChannel.traceSync (node:diagnostics_channel:315:14)"
2025-10-29T08:45:51.124918392Z [inf]  }
2025-10-29T08:45:51.129539059Z [err]  (node:38) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.
2025-10-29T08:45:51.129545220Z [err]  (Use `node --trace-deprecation ...` to show where the warning was created)
2025-10-29T08:45:52.216088271Z [err]  npm warn config production Use `--omit=dev` instead.
2025-10-29T08:45:54.015947510Z [inf]  
2025-10-29T08:45:54.015956787Z [inf]  > mellchat-api@1.0.0 postinstall
2025-10-29T08:45:54.015963770Z [inf]  > npm audit fix --force
2025-10-29T08:45:54.015978001Z [inf]  
2025-10-29T08:45:54.114268079Z [err]  npm warn config production Use `--omit=dev` instead.
2025-10-29T08:45:54.118773564Z [err]  npm warn using --force Recommended protections disabled.
2025-10-29T08:45:55.097671919Z [inf]  
2025-10-29T08:45:55.097678791Z [inf]  up to date, audited 354 packages in 1s
2025-10-29T08:45:55.097683469Z [inf]  
2025-10-29T08:45:55.097687912Z [inf]  36 packages are looking for funding
2025-10-29T08:45:55.097693101Z [inf]    run `npm fund` for details
2025-10-29T08:45:55.097697592Z [inf]  
2025-10-29T08:45:55.097703069Z [inf]  found 0 vulnerabilities
2025-10-29T08:45:55.121764343Z [inf]  
2025-10-29T08:45:55.121774281Z [inf]  up to date, audited 354 packages in 3s
2025-10-29T08:45:55.121780916Z [inf]  
2025-10-29T08:45:55.121786187Z [inf]  36 packages are looking for funding
2025-10-29T08:45:55.121791058Z [inf]    run `npm fund` for details
2025-10-29T08:45:55.121796249Z [inf]  
2025-10-29T08:45:55.121801251Z [inf]  found 0 vulnerabilities
2025-10-29T08:45:55.232351086Z [err]  npm warn config production Use `--omit=dev` instead.
2025-10-29T08:45:55.243327027Z [inf]  
2025-10-29T08:45:55.243333159Z [inf]  > mellchat-api@1.0.0 start
2025-10-29T08:45:55.243350572Z [inf]  > NODE_ENV=production node src/index.js
2025-10-29T08:45:55.243357378Z [inf]  
2025-10-29T08:45:55.560705172Z [inf]  2025-10-29 08:45:55.544 [[32minfo[39m] ‚úÖ Rate limiter initialized {
2025-10-29T08:45:55.560713603Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:55.560721183Z [inf]    "version": "1.0.0"
2025-10-29T08:45:55.560728387Z [inf]  }
2025-10-29T08:45:55.701091670Z [inf]  2025-10-29 08:45:55.692 [[32minfo[39m] Skipping BullMQ workers initialization (fallback to direct processing) {
2025-10-29T08:45:55.701098757Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:55.701106372Z [inf]    "version": "1.0.0"
2025-10-29T08:45:55.701114143Z [inf]  }
2025-10-29T08:45:55.701121569Z [inf]  2025-10-29 08:45:55.692 [[32minfo[39m] BullMQ queues not available, using direct processing {
2025-10-29T08:45:55.701129199Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:55.701136587Z [inf]    "version": "1.0.0"
2025-10-29T08:45:55.701144305Z [inf]  }
2025-10-29T08:45:56.493798885Z [inf]  2025-10-29 08:45:56.423 [[32minfo[39m] Running on Railway, using Railway PORT: {
2025-10-29T08:45:56.493810934Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:56.493820496Z [inf]    "version": "1.0.0"
2025-10-29T08:45:56.493844867Z [inf]    "NODE_ENV": "production",
2025-10-29T08:45:56.493853756Z [inf]    "DATABASE_URL": "SET",
2025-10-29T08:45:56.493864641Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:56.493867815Z [inf]    "PORT": "3001",
2025-10-29T08:45:56.493871360Z [inf]  }
2025-10-29T08:45:56.493875820Z [inf]    "version": "1.0.0",
2025-10-29T08:45:56.493879690Z [inf]  2025-10-29 08:45:56.427 [[32minfo[39m] CORS allowed origins: {
2025-10-29T08:45:56.493881821Z [inf]  2025-10-29 08:45:56.425 [[32minfo[39m] Starting server with config: {
2025-10-29T08:45:56.493881877Z [inf]    "HOST": "0.0.0.0",
2025-10-29T08:45:56.493882656Z [inf]      "http://localhost:5173",
2025-10-29T08:45:56.493891132Z [inf]      "https://mellchat.live",
2025-10-29T08:45:56.493895413Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:56.493896019Z [inf]      "http://192.168.19.76:5173",
2025-10-29T08:45:56.493896281Z [inf]      "http://localhost:5174",
2025-10-29T08:45:56.493897878Z [inf]  }
2025-10-29T08:45:56.493902757Z [inf]      "https://www.mellchat.live",
2025-10-29T08:45:56.493906835Z [inf]      "https://mellchat.vercel.app",
2025-10-29T08:45:56.493909635Z [inf]    "version": "1.0.0",
2025-10-29T08:45:56.493911084Z [inf]  2025-10-29 08:45:56.428 [[32minfo[39m] ‚úÖ CORS middleware configured {
2025-10-29T08:45:56.493912492Z [inf]      "https://mellchat-v5y7.vercel.app"
2025-10-29T08:45:56.493917379Z [inf]      "https://mellchat-v5y7.vercel.app",
2025-10-29T08:45:56.493921286Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:56.493921802Z [inf]    "REDIS_URL": "SET"
2025-10-29T08:45:56.493922292Z [inf]    "allowedOrigins": [
2025-10-29T08:45:56.493922660Z [inf]    ]
2025-10-29T08:45:56.493931748Z [inf]      "http://localhost:3000",
2025-10-29T08:45:56.493933953Z [inf]  }
2025-10-29T08:45:56.493972052Z [inf]    "version": "1.0.0"
2025-10-29T08:45:56.493980324Z [inf]  }
2025-10-29T08:45:56.493987937Z [inf]  2025-10-29 08:45:56.429 [[32minfo[39m] Setting up body parsing middleware... {
2025-10-29T08:45:56.494426140Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:56.494432904Z [inf]    "version": "1.0.0"
2025-10-29T08:45:56.494438549Z [inf]  }
2025-10-29T08:45:56.494444289Z [inf]  2025-10-29 08:45:56.431 [[32minfo[39m] ‚úÖ Body parsing middleware configured {
2025-10-29T08:45:56.494450972Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:56.494456380Z [inf]    "version": "1.0.0"
2025-10-29T08:45:56.494462447Z [inf]  }
2025-10-29T08:45:56.494468052Z [inf]  2025-10-29 08:45:56.431 [[32minfo[39m] Setting up Passport... {
2025-10-29T08:45:56.494473502Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:56.494479403Z [inf]    "version": "1.0.0"
2025-10-29T08:45:56.494484757Z [inf]  }
2025-10-29T08:45:56.494490134Z [inf]  2025-10-29 08:45:56.432 [[32minfo[39m] ‚úÖ Passport initialized {
2025-10-29T08:45:56.494495389Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:56.494506274Z [inf]    "version": "1.0.0"
2025-10-29T08:45:56.494512436Z [inf]  }
2025-10-29T08:45:56.494517816Z [inf]  2025-10-29 08:45:56.432 [[32minfo[39m] Setting up request logging... {
2025-10-29T08:45:56.494523149Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:56.494529122Z [inf]    "version": "1.0.0"
2025-10-29T08:45:56.494534443Z [inf]  }
2025-10-29T08:45:56.494539858Z [inf]  2025-10-29 08:45:56.432 [[32minfo[39m] ‚úÖ Request logging configured {
2025-10-29T08:45:56.494545503Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:56.494551299Z [inf]    "version": "1.0.0"
2025-10-29T08:45:56.494557344Z [inf]  }
2025-10-29T08:45:56.494562906Z [inf]  2025-10-29 08:45:56.433 [[32minfo[39m] Setting up health routes... {
2025-10-29T08:45:56.494582571Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:56.494593859Z [inf]    "version": "1.0.0"
2025-10-29T08:45:56.494597764Z [inf]  }
2025-10-29T08:45:56.494602249Z [inf]  }
2025-10-29T08:45:56.494608248Z [inf]  2025-10-29 08:45:56.434 [[32minfo[39m] Setting up database routes... {
2025-10-29T08:45:56.494611036Z [inf]  2025-10-29 08:45:56.433 [[32minfo[39m] ‚úÖ Health routes configured {
2025-10-29T08:45:56.494617039Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:56.494619849Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:56.494626041Z [inf]    "version": "1.0.0"
2025-10-29T08:45:56.494630003Z [inf]    "version": "1.0.0"
2025-10-29T08:45:56.494635094Z [inf]  }
2025-10-29T08:45:56.494639630Z [inf]  }
2025-10-29T08:45:56.494644683Z [inf]  2025-10-29 08:45:56.434 [[32minfo[39m] Loading databaseRoutes... {
2025-10-29T08:45:56.494649107Z [inf]  2025-10-29 08:45:56.433 [[32minfo[39m] Setting up metrics endpoint... {
2025-10-29T08:45:56.494657011Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:56.494664593Z [inf]    "version": "1.0.0"
2025-10-29T08:45:56.494672426Z [inf]  }
2025-10-29T08:45:56.494679789Z [inf]  2025-10-29 08:45:56.433 [[32minfo[39m] ‚úÖ Metrics endpoint configured {
2025-10-29T08:45:56.494687790Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:56.494695567Z [inf]    "version": "1.0.0"
2025-10-29T08:45:56.494702690Z [inf]  }
2025-10-29T08:45:56.494710299Z [inf]  2025-10-29 08:45:56.433 [[32minfo[39m] Setting up auth routes... {
2025-10-29T08:45:56.494717896Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:56.494725726Z [inf]    "version": "1.0.0"
2025-10-29T08:45:56.494734759Z [inf]  }
2025-10-29T08:45:56.494742377Z [inf]  2025-10-29 08:45:56.433 [[32minfo[39m] ‚úÖ Auth routes configured {
2025-10-29T08:45:56.494750056Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:56.494759188Z [inf]    "version": "1.0.0"
2025-10-29T08:45:56.495069616Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:56.495075801Z [inf]  }
2025-10-29T08:45:56.495078483Z [inf]    "version": "1.0.0"
2025-10-29T08:45:56.495086395Z [inf]    "version": "1.0.0"
2025-10-29T08:45:56.495087489Z [inf]  2025-10-29 08:45:56.435 [[31merror[39m] ‚ùå Error setting up database routes: Router.use() requires a middleware function but got a undefined {
2025-10-29T08:45:56.495087599Z [inf]  }
2025-10-29T08:45:56.495096658Z [inf]  2025-10-29 08:45:56.434 [[32minfo[39m] databaseRoutes type: {
2025-10-29T08:45:56.495097847Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:56.495099580Z [inf]  }
2025-10-29T08:45:56.495106686Z [inf]    "version": "1.0.0",
2025-10-29T08:45:56.495108432Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:56.495109472Z [inf]  2025-10-29 08:45:56.434 [[32minfo[39m] databaseRoutes constructor: {
2025-10-29T08:45:56.495115042Z [inf]    "stack": "TypeError: Router.use() requires a middleware function but got a undefined\n    at Function.use (/app/backend/api-gateway/node_modules/express/lib/router/index.js:469:13)\n    at Function.<anonymous> (/app/backend/api-gateway/node_modules/express/lib/application.js:227:21)\n    at Array.forEach (<anonymous>)\n    at Function.use (/app/backend/api-gateway/node_modules/express/lib/application.js:224:7)\n    at Object.<anonymous> (/app/backend/api-gateway/src/index.js:192:7)\n    at Module._compile (node:internal/modules/cjs/loader:1546:14)\n    at Object..js (node:internal/modules/cjs/loader:1689:10)\n    at Module.load (node:internal/modules/cjs/loader:1318:32)\n    at Function._load (node:internal/modules/cjs/loader:1128:12)\n    at TracingChannel.traceSync (node:diagnostics_channel:315:14)"
2025-10-29T08:45:56.495119044Z [inf]    "service": "mellchat-api",
2025-10-29T08:45:56.495123717Z [inf]  }
2025-10-29T08:45:56.495128157Z [inf]    "version": "1.0.0"
2025-10-29T08:45:56.495134146Z [err]  (node:38) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.
2025-10-29T08:45:56.495274635Z [err]  (Use `node --trace-deprecation ...` to show where the warning was created)
2025-10-29T08:48:26.000000000Z [inf]  Stopping Container