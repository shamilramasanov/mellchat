# –û—Ç—á—ë—Ç: –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π

## üéØ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. User Reputation Manager (`userReputationManager.js`)
- **–†–µ–ø—É—Ç–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞**: –ö–∞–∂–¥—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–º–µ–µ—Ç —Ä–µ–ø—É—Ç–∞—Ü–∏—é –æ—Ç `-‚àû` –¥–æ `+‚àû`
- **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏**:
  - –ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è (Score > 40) ‚Üí +1
  - –°–ø–∞–º (Score < 25) ‚Üí -1
- **–ü–æ—Ä–æ–≥–∏**:
  - Score > 10: –ù–∞–¥–µ–∂–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (—Ñ–∏–ª—å—Ç—Ä √ó0.7)
  - Score -10..10: –ù–æ—Ä–º–∞–ª—å–Ω—ã–π —Ä–µ–∂–∏–º (—Ñ–∏–ª—å—Ç—Ä √ó1.0)
  - Score < -10: –ü—Ä–æ–±–ª–µ–º–Ω—ã–π (—Ñ–∏–ª—å—Ç—Ä √ó1.5)

### 2. Message Scoring Engine (`messageScoringEngine.js`)
- **–°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∞—è –ø–ª–æ—Ç–Ω–æ—Å—Ç—å**: –ê–Ω–∞–ª–∏–∑ —Å–º—ã—Å–ª–æ–≤—ã—Ö —Å–ª–æ–≤
- **–ë–∞–∑–æ–≤–∞—è —Ñ–æ—Ä–º—É–ª–∞**:
  ```
  MessageScore = (semanticDensity √ó 40)
                + ((1 - repetitionScore) √ó 10)
                + ((1 - spamWordsRatio) √ó 10)
                - penalties / reputationModifier
                ¬± reputationBonus
  ```
- **–ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è**:
  - Score < 25: –°–ø–∞–º (–Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è, –Ω–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –≤ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–∏)
  - Score 25-40: –ù–∏–∑–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ (—Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è)
  - Score > 40: –ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ

### 3. API Endpoints
- `GET /api/v1/reputation/stats` - –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- `GET /api/v1/reputation/user/:username` - –†–µ–ø—É—Ç–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `POST /api/v1/reputation/user/:username/reset` - –°–±—Ä–æ—Å–∏—Ç—å —Ä–µ–ø—É—Ç–∞—Ü–∏—é
- `POST /api/v1/reputation/reset-all` - –°–±—Ä–æ—Å–∏—Ç—å –≤—Å—é —Ä–µ–ø—É—Ç–∞—Ü–∏—é

### 4. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ –≤ `messageHandler.js`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ü–µ–Ω–∫–∞ –∫–∞–∂–¥–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
- –°–ø–∞–º –Ω–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –≤ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–∏ —á–∞—Ç–∞
- –†–µ–ø—É—Ç–∞—Ü–∏—è —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏

## üìä –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
Message ‚Üí MessageHandler
           ‚Üì
    [Spam Detection (features)]
           ‚Üì
    [Message Scoring Engine]
           ‚Üì
    [User Reputation Update]
           ‚Üì
  [Classification: spam/quality]
           ‚Üì
   [Save to DB + Mood Update]
```

## üîÑ –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª —Å–æ–æ–±—â–µ–Ω–∏—è

1. **–ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è** ‚Üí –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è
2. **–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ features** ‚Üí –ü–æ–≤—Ç–æ—Ä—ã, —ç–º–æ–¥–∑–∏, CAPS, –¥–ª–∏–Ω–∞
3. **–†–∞—Å—á–µ—Ç Message Score** ‚Üí –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∞—è –ø–ª–æ—Ç–Ω–æ—Å—Ç—å + —à—Ç—Ä–∞—Ñ—ã
4. **–ö–æ—Ä—Ä–µ–∫—Ü–∏—è –ø–æ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏** ‚Üí –ú–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Ñ–∏–ª—å—Ç—Ä–∞
5. **–ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è** ‚Üí –°–ø–∞–º/–ö–∞—á–µ—Å—Ç–≤–æ
6. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏** ‚Üí +/- –±–∞–ª–ª—ã
7. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î** ‚Üí –¢–æ–ª—å–∫–æ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è

## üß™ –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å

### –¢–µ—Å—Ç 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
```bash
curl http://localhost:3001/api/v1/reputation/stats
```

### –¢–µ—Å—Ç 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```bash
curl http://localhost:3001/api/v1/reputation/user/shaddyroxas
```

### –¢–µ—Å—Ç 3: –°–±—Ä–æ—Å —Ä–µ–ø—É—Ç–∞—Ü–∏–∏
```bash
curl -X POST http://localhost:3001/api/v1/reputation/user/test_user/reset
```

## üìà –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –§—Ä–æ–Ω—Ç–µ–Ω–¥ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
1. **–ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞**: –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ä–µ–ø—É—Ç–∞—Ü–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
2. **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏**: –¢–æ–ø –Ω–∞–¥–µ–∂–Ω—ã—Ö/–ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
3. **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ñ–∏–ª—å—Ç—Ä–∞**: –†–µ–≥—É–ª–∏—Ä–æ–≤–∫–∞ –ø–æ—Ä–æ–≥–æ–≤

### –ë—ç–∫–µ–Ω–¥ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
1. **–ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å**: –°–æ—Ö—Ä–∞–Ω—è—Ç—å —Ä–µ–ø—É—Ç–∞—Ü–∏—é –≤ Redis/–ë–î
2. **–í—Ä–µ–º–µ–Ω–Ω—ã–µ –±–∞–Ω–Ω—ã**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –±–∞–Ω –ø—Ä–∏ reputation < -50
3. **Whitelist/Blacklist**: –°–ø–∏—Å–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
4. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –º–æ–¥–µ—Ä–∞—Ü–∏–µ–π**: –†—É—á–Ω–∞—è –∫–æ—Ä—Ä–µ–∫—Ü–∏—è —Ä–µ–ø—É—Ç–∞—Ü–∏–∏

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
1. **–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ö–µ—à —Ä–µ–ø—É—Ç–∞—Ü–∏–∏ –≤ Redis
2. **Batch updates**: –ì—Ä—É–ø–ø–æ–≤–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏
3. **Machine Learning**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ ML –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è detection

## üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- ‚úÖ –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å–ø–∞–º (DinoDance, TwitchConHYPE)
- ‚úÖ –°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ä–µ–ø—É—Ç–∞—Ü–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ –ê–¥–∞–ø—Ç–∏–≤–Ω–æ —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç (–º—è–≥—á–µ –¥–ª—è –Ω–∞–¥–µ–∂–Ω—ã—Ö, —Å—Ç—Ä–æ–∂–µ –¥–ª—è –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö)
- ‚úÖ –ù–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç —Å–ø–∞–º –≤ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–∏ —á–∞—Ç–∞
- ‚úÖ –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç API –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

