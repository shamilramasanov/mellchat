# –ê–Ω–∞–ª–∏–∑ –æ–±—ä–µ–º–æ–≤ –¥–∞–Ω–Ω—ã—Ö –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö MellChat

## üìä –û–±–∑–æ—Ä

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç, –∫–∞–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –∏ –≤ –∫–∞–∫–∏—Ö –æ–±—ä–µ–º–∞—Ö –ø—Ä–∏—Ö–æ–¥—è—Ç –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö MellChat.

## üóÑÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü –∏ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö

### 1. üìù –¢–∞–±–ª–∏—Ü–∞ `messages` (–°–æ–æ–±—â–µ–Ω–∏—è —á–∞—Ç–∞)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –•—Ä–∞–Ω–∏—Ç –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ —á–∞—Ç–æ–≤ Twitch, YouTube, Kick.

**–ö–æ–ª–æ–Ω–∫–∏**:
- `id` (text) - –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID —Å–æ–æ–±—â–µ–Ω–∏—è
- `stream_id` (text) - ID —Å—Ç—Ä–∏–º–∞
- `platform` (text) - –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ (twitch, youtube, kick)
- `user_id` (text) - ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `username` (text) - –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `content` (text) - –¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è
- `created_at` (timestamp) - –í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è
- `is_deleted` (boolean) - –£–¥–∞–ª–µ–Ω–æ –ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ
- `is_question` (boolean) - –Ø–≤–ª—è–µ—Ç—Å—è –ª–∏ –≤–æ–ø—Ä–æ—Å–æ–º
- `timestamp` (bigint) - Unix timestamp
- `message_score` (double precision) - –û—Ü–µ–Ω–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ —Å–æ–æ–±—â–µ–Ω–∏—è (0-100)
- `message_classification` (varchar) - –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è (spam, low-quality, quality)
- `is_spam` (boolean) - –Ø–≤–ª—è–µ—Ç—Å—è –ª–∏ —Å–ø–∞–º–æ–º
- `connection_id` (varchar) - ID –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- `sentiment` (varchar) - –ù–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ (happy, neutral, sad)

**–û–±—ä–µ–º –¥–∞–Ω–Ω—ã—Ö**:
- **–†–∞–∑–º–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏—è**: ~100-500 –±–∞–π—Ç –≤ —Å—Ä–µ–¥–Ω–µ–º
- **–°—Ä–µ–¥–Ω—è—è –¥–ª–∏–Ω–∞**: ~50-200 —Å–∏–º–≤–æ–ª–æ–≤
- **–°–∫–æ—Ä–æ—Å—Ç—å –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏—è**: –ó–∞–≤–∏—Å–∏—Ç –æ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å—Ç—Ä–∏–º–æ–≤
  - 1 –∞–∫—Ç–∏–≤–Ω—ã–π —Å—Ç—Ä–∏–º: ~10-100 —Å–æ–æ–±—â–µ–Ω–∏–π/—á–∞—Å
  - 10 –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å—Ç—Ä–∏–º–æ–≤: ~100-1000 —Å–æ–æ–±—â–µ–Ω–∏–π/—á–∞—Å
  - 100 –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å—Ç—Ä–∏–º–æ–≤: ~1000-10000 —Å–æ–æ–±—â–µ–Ω–∏–π/—á–∞—Å

**–ü—Ä–æ–≥–Ω–æ–∑ —Ä–æ—Å—Ç–∞**:
- –ü—Ä–∏ 10 —Å—Ç—Ä–∏–º–∞—Ö: ~50 —Å–æ–æ–±—â–µ–Ω–∏–π/—á–∞—Å = **1,200 —Å–æ–æ–±—â–µ–Ω–∏–π/–¥–µ–Ω—å** = **36,000/–º–µ—Å—è—Ü** = **438,000/–≥–æ–¥**
- –†–∞–∑–º–µ—Ä –∑–∞ –≥–æ–¥: ~**85 MB** (–ø—Ä–∏ —Å—Ä–µ–¥–Ω–µ–º —Ä–∞–∑–º–µ—Ä–µ 200 –±–∞–π—Ç –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ)

### 2. üë• –¢–∞–±–ª–∏—Ü–∞ `users` (–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —á–∞—Ç–∞)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –•—Ä–∞–Ω–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö —á–∞—Ç–∞.

**–ö–æ–ª–æ–Ω–∫–∏**:
- `id` (text) - –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID
- `username` (text) - –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `questions_posted` (integer) - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–¥–∞–Ω–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤

**–û–±—ä–µ–º –¥–∞–Ω–Ω—ã—Ö**:
- –†–∞–∑–º–µ—Ä –∑–∞–ø–∏—Å–∏: ~100-200 –±–∞–π—Ç
- –û–¥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –∏–º–µ—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∑–∞–ø–∏—Å–µ–π (–ø–æ —Ä–∞–∑–Ω—ã–º –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞–º)

### 3. üì∫ –¢–∞–±–ª–∏—Ü–∞ `streams` (–°—Ç—Ä–∏–º—ã)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –•—Ä–∞–Ω–∏—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –æ —Å—Ç—Ä–∏–º–∞—Ö.

**–ö–æ–ª–æ–Ω–∫–∏**:
- `id` (text) - –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID —Å—Ç—Ä–∏–º–∞
- `title` (text) - –ù–∞–∑–≤–∞–Ω–∏–µ —Å—Ç—Ä–∏–º–∞
- `started_at` (timestamp) - –í—Ä–µ–º—è –Ω–∞—á–∞–ª–∞
- `ended_at` (timestamp) - –í—Ä–µ–º—è –æ–∫–æ–Ω—á–∞–Ω–∏—è
- `questions_count` (integer) - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–æ–ø—Ä–æ—Å–æ–≤

**–û–±—ä–µ–º –¥–∞–Ω–Ω—ã—Ö**:
- –†–∞–∑–º–µ—Ä –∑–∞–ø–∏—Å–∏: ~500-1000 –±–∞–π—Ç
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö —Å—Ç—Ä–∏–º–æ–≤

### 4. ‚ùì –¢–∞–±–ª–∏—Ü–∞ `questions` (–í–æ–ø—Ä–æ—Å—ã)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –•—Ä–∞–Ω–∏—Ç –≤—ã–¥–µ–ª–µ–Ω–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã –∏–∑ —á–∞—Ç–∞.

**–ö–æ–ª–æ–Ω–∫–∏**:
- `id` (text) - –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID
- `message_id` (text) - ID —Å–æ–æ–±—â–µ–Ω–∏—è
- `stream_id` (text) - ID —Å—Ç—Ä–∏–º–∞
- `user_id` (text) - ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `snippet` (text) - –¢–µ–∫—Å—Ç –≤–æ–ø—Ä–æ—Å–∞

**–û–±—ä–µ–º –¥–∞–Ω–Ω—ã—Ö**:
- –†–∞–∑–º–µ—Ä –∑–∞–ø–∏—Å–∏: ~200-500 –±–∞–π—Ç
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ: ~10-20% –æ—Ç –æ–±—â–µ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å–æ–æ–±—â–µ–Ω–∏–π

### 5. üîê –¢–∞–±–ª–∏—Ü–∞ `app_users` (–ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –•—Ä–∞–Ω–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ Google/Email).

**–ö–æ–ª–æ–Ω–∫–∏**:
- `id` (uuid) - –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID
- `email` (text) - Email –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `email_verified` (boolean) - –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω –ª–∏ email
- `password_hash` (text) - –•–µ—à –ø–∞—Ä–æ–ª—è (–¥–ª—è email –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏)
- `google_id` (text) - Google ID (–¥–ª—è OAuth)
- `name` (text) - –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `avatar_url` (text) - URL –∞–≤–∞—Ç–∞—Ä–∞
- `created_at` (timestamp) - –í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è

**–û–±—ä–µ–º –¥–∞–Ω–Ω—ã—Ö**:
- –†–∞–∑–º–µ—Ä –∑–∞–ø–∏—Å–∏: ~500-1000 –±–∞–π—Ç
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### 6. ‚öôÔ∏è –¢–∞–±–ª–∏—Ü–∞ `global_rules` (–ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –•—Ä–∞–Ω–∏—Ç –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ (spam, questions, mood).

**–ö–æ–ª–æ–Ω–∫–∏**:
- `id` (serial) - –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID
- `rule_type` (varchar) - –¢–∏–ø –ø—Ä–∞–≤–∏–ª–∞ (spam, questions, mood)
- `settings_json` (jsonb) - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON
- `enabled` (boolean) - –í–∫–ª—é—á–µ–Ω–æ –ª–∏ –ø—Ä–∞–≤–∏–ª–æ
- `updated_by` (varchar) - –ö—Ç–æ –æ–±–Ω–æ–≤–∏–ª
- `created_at` (timestamp) - –í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è
- `updated_at` (timestamp) - –í—Ä–µ–º—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

**–û–±—ä–µ–º –¥–∞–Ω–Ω—ã—Ö**:
- –†–∞–∑–º–µ—Ä –∑–∞–ø–∏—Å–∏: ~1-5 KB (JSON –º–æ–∂–µ—Ç –±—ã—Ç—å –±–æ–ª—å—à–∏–º)
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ: –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ (–æ–±—ã—á–Ω–æ 3-10 –ø—Ä–∞–≤–∏–ª)

### 7. üéõÔ∏è –¢–∞–±–ª–∏—Ü–∞ `user_settings` (–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –•—Ä–∞–Ω–∏—Ç –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

**–ö–æ–ª–æ–Ω–∫–∏**:
- `id` (serial) - –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID
- `user_id` (uuid) - ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `settings_json` (jsonb) - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON
- `created_at` (timestamp) - –í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è
- `updated_at` (timestamp) - –í—Ä–µ–º—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

**–û–±—ä–µ–º –¥–∞–Ω–Ω—ã—Ö**:
- –†–∞–∑–º–µ—Ä –∑–∞–ø–∏—Å–∏: ~500-2000 –±–∞–π—Ç
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ: –û–¥–Ω–∞ –∑–∞–ø–∏—Å—å –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### 8. ü§ñ –¢–∞–±–ª–∏—Ü–∞ `user_spam_rules` (AI —Ñ–∏–ª—å—Ç—Ä —Å–ø–∞–º–∞)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –•—Ä–∞–Ω–∏—Ç –ø—Ä–∞–≤–∏–ª–∞ AI —Ñ–∏–ª—å—Ç—Ä–∞ —Å–ø–∞–º–∞ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

**–ö–æ–ª–æ–Ω–∫–∏**:
- `id` (serial) - –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID
- `user_id` (uuid) - ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `rules_json` (jsonb) - –ü—Ä–∞–≤–∏–ª–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON
- `trained_at` (timestamp) - –í—Ä–µ–º—è –æ–±—É—á–µ–Ω–∏—è
- `created_at` (timestamp) - –í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è
- `updated_at` (timestamp) - –í—Ä–µ–º—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

**–û–±—ä–µ–º –¥–∞–Ω–Ω—ã—Ö**:
- –†–∞–∑–º–µ—Ä –∑–∞–ø–∏—Å–∏: ~5-50 KB (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –ø—Ä–∞–≤–∏–ª)
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ: –û–¥–Ω–∞ –∑–∞–ø–∏—Å—å –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∏—Å–ø–æ–ª—å–∑—É—é—â–µ–≥–æ AI —Ñ–∏–ª—å—Ç—Ä

## üìà –î–∏–Ω–∞–º–∏–∫–∞ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö

### –°–∫–æ—Ä–æ—Å—Ç—å –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π

**–ü–æ —á–∞—Å–∞–º** (–ø—Ä–∏ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å—Ç—Ä–∏–º–∞—Ö):
- **–ù–∏–∑–∫–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å**: 10-50 —Å–æ–æ–±—â–µ–Ω–∏–π/—á–∞—Å
- **–°—Ä–µ–¥–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å**: 50-200 —Å–æ–æ–±—â–µ–Ω–∏–π/—á–∞—Å
- **–í—ã—Å–æ–∫–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å**: 200-1000+ —Å–æ–æ–±—â–µ–Ω–∏–π/—á–∞—Å

**–ü–æ —Å—Ç—Ä–∏–º–∞–º**:
- –û–¥–∏–Ω —Å—Ç—Ä–∏–º: ~10-100 —Å–æ–æ–±—â–µ–Ω–∏–π/—á–∞—Å
- –î–µ—Å—è—Ç—å —Å—Ç—Ä–∏–º–æ–≤: ~100-1000 —Å–æ–æ–±—â–µ–Ω–∏–π/—á–∞—Å
- –°—Ç–æ —Å—Ç—Ä–∏–º–æ–≤: ~1000-10000 —Å–æ–æ–±—â–µ–Ω–∏–π/—á–∞—Å

### –ü–∏–∫–æ–≤–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞

- **–ü–∏–∫–æ–≤–æ–µ –≤—Ä–µ–º—è**: –í–µ—á–µ—Ä–Ω–∏–µ —á–∞—Å—ã (18:00-24:00)
- **–ü–∏–∫–æ–≤–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞**: –î–æ 1000+ —Å–æ–æ–±—â–µ–Ω–∏–π/—á–∞—Å –ø—Ä–∏ –º–Ω–æ–∂–µ—Å—Ç–≤–µ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å—Ç—Ä–∏–º–æ–≤

## üíæ –†–∞–∑–º–µ—Ä—ã —Ç–∞–±–ª–∏—Ü

–î–ª—è —Ä–∞—Å—á–µ—Ç–∞ –ø—Ä–∏–º–µ—Ä–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç:
```bash
cd backend/api-gateway
node database/analyze_data_volumes.js
```

**–ü—Ä–∏–º–µ—Ä–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã** (–ø—Ä–∏ 100K —Å–æ–æ–±—â–µ–Ω–∏–π):
- `messages`: ~20-50 MB
- `users`: ~1-5 MB
- `streams`: ~1-5 MB
- `questions`: ~2-10 MB
- `app_users`: ~100-500 KB
- `global_rules`: ~10-50 KB
- `user_settings`: ~100 KB - 1 MB
- `user_spam_rules`: ~500 KB - 5 MB

## üîç –ò–Ω–¥–µ–∫—Å—ã –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

**–í–∞–∂–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã**:
- `idx_messages_stream_id` - –ë—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫ –ø–æ —Å—Ç—Ä–∏–º—É
- `idx_messages_timestamp` - –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –≤—Ä–µ–º–µ–Ω–∏
- `idx_messages_is_spam` - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å–ø–∞–º–∞
- `idx_messages_is_question` - –ü–æ–∏—Å–∫ –≤–æ–ø—Ä–æ—Å–æ–≤
- `idx_messages_sentiment` - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—é
- `idx_messages_created_at` - –í—Ä–µ–º–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã

**–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è**:
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è `messages` –ø–æ –¥–∞—Ç–∞–º –ø—Ä–∏ >1M –∑–∞–ø–∏—Å–µ–π
- –†–µ–≥—É–ª—è—Ä–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π (>30 –¥–Ω–µ–π)
- –ö–æ–º–ø—Ä–µ—Å—Å–∏—è JSON –ø–æ–ª–µ–π (`jsonb` —É–∂–µ —Å–∂–∞—Ç—ã–π)

## üìä –ê–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö

### –ó–∞–ø—É—Å–∫ –∞–Ω–∞–ª–∏–∑–∞

```bash
cd backend/api-gateway
node database/analyze_data_volumes.js
```

–°–∫—Ä–∏–ø—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:
- –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π –≤ –∫–∞–∂–¥–æ–π —Ç–∞–±–ª–∏—Ü–µ
- –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞–º
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ —Å–ø–∞–º—É –∏ –≤–æ–ø—Ä–æ—Å–∞–º
- –ù–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ —á–∞—Ç–∞ (sentiment)
- –°–∫–æ—Ä–æ—Å—Ç—å –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
- –ü—Ä–æ–≥–Ω–æ–∑ —Ä–æ—Å—Ç–∞
- –†–∞–∑–º–µ—Ä—ã —Ç–∞–±–ª–∏—Ü

### –ß—Ç–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å

1. **–†–æ—Å—Ç —Ç–∞–±–ª–∏—Ü—ã `messages`** - –æ—Å–Ω–æ–≤–Ω–æ–π –æ–±—ä–µ–º –¥–∞–Ω–Ω—ã—Ö
2. **–ü—Ä–æ—Ü–µ–Ω—Ç —Å–ø–∞–º–∞** - –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å <5-10%
3. **–°–∫–æ—Ä–æ—Å—Ç—å –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏—è** - –Ω–µ –¥–æ–ª–∂–Ω–∞ –ø—Ä–µ–≤—ã—à–∞—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ë–î
4. **–†–∞–∑–º–µ—Ä —Ç–∞–±–ª–∏—Ü** - –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –¥–∏—Å–∫–æ–≤–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞

## üîß –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ê—Ä—Ö–∏–≤–∏—Ä—É–π—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏—è —Å—Ç–∞—Ä—à–µ 30 –¥–Ω–µ–π
2. **–û—á–∏—Å—Ç–∫–∞**: –£–¥–∞–ª—è–π—Ç–µ —É–¥–∞–ª–µ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è (`is_deleted = true`) —Å—Ç–∞—Ä—à–µ 7 –¥–Ω–µ–π
3. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–ª–µ—Ä—Ç—ã –ø—Ä–∏ —Ä–æ—Å—Ç–µ >10% –∑–∞ –¥–µ–Ω—å
4. **–ë—ç–∫–∞–ø—ã**: –î–µ–ª–∞–π—Ç–µ —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –±—ç–∫–∞–ø—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
5. **–ò–Ω–¥–µ–∫—Å—ã**: –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –¥–æ–±–∞–≤–ª—è–π—Ç–µ –∏–Ω–¥–µ–∫—Å—ã –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

## üìù –ó–∞–º–µ—Ç–∫–∏

- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–∫–∞ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –ø—É—Å—Ç–∞ (0 —Å–æ–æ–±—â–µ–Ω–∏–π) - –≤–æ–∑–º–æ–∂–Ω–æ, –¥–∞–Ω–Ω—ã–µ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –∏–ª–∏ –Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å—Ç—Ä–∏–º–æ–≤
- –î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å—Ç—Ä–∏–º—ã –∏ –ø–æ–¥–æ–∂–¥–∏—Ç–µ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –æ–±—ä–µ–º–æ–≤ –¥–∞–Ω–Ω—ã—Ö –≤–∞–∂–µ–Ω –¥–ª—è –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã

