# WebSocket Integration

## ‚úÖ –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:

### 1. **WebSocket Hook** (`src/hooks/useWebSocket.js`)
- –ê–≤—Ç–æ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ `wss://mellchat-production.up.railway.app`
- –ê–≤—Ç–æ—Ä–µ–∫–æ–Ω–Ω–µ–∫—Ç –ø—Ä–∏ –æ–±—Ä—ã–≤–µ —Å–≤—è–∑–∏ (–¥–æ 5 –ø–æ–ø—ã—Ç–æ–∫)
- –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç —Å—Ç—Ä–∏–º–æ–≤
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä–∏–º–∞–º–∏ (–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ)

### 2. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ App.js**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ WebSocket –¥–∞–Ω–Ω—ã—Ö –≤–º–µ—Å—Ç–æ –º–æ–∫–æ–≤
- –ú–æ–∫ –¥–∞–Ω–Ω—ã–µ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å—Ç—Ä–∏–º–æ–≤
- –†–µ–∞–ª—å–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø—Ä–∏—Ö–æ–¥—è—Ç —á–µ—Ä–µ–∑ WebSocket

### 3. **Add Stream Modal**
- –ö—Ä–∞—Å–∏–≤–∞—è –º–æ–¥–∞–ª–∫–∞ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Å—Ç—Ä–∏–º–æ–≤
- –ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã (YouTube/Twitch/Kick)
- –í–∞–ª–∏–¥–∞—Ü–∏—è URL
- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏

---

## üîå –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. **–ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:**
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ WebSocket —Å–µ—Ä–≤–µ—Ä—É
   - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –º–æ–∫-–¥–∞–Ω–Ω—ã–µ –¥–ª—è –¥–µ–º–æ (–ø–æ–∫–∞ –Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å—Ç—Ä–∏–º–æ–≤)

2. **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä–∏–º–∞:**
   - –ù–∞–∂–º–∏—Ç–µ –Ω–∞ FAB –∫–Ω–æ–ø–∫—É (+)
   - –í—Å—Ç–∞–≤—å—Ç–µ URL —Å—Ç—Ä–∏–º–∞ (YouTube/Twitch/Kick)
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ backend API
   - –ü–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ WebSocket —Å–æ–±—ã—Ç–∏—è –¥–ª—è —ç—Ç–æ–≥–æ —Å—Ç—Ä–∏–º–∞

3. **–ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π:**
   - Backend —Ç—Ä–∞–Ω—Å–ª–∏—Ä—É–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è —á–µ—Ä–µ–∑ WebSocket
   - Frontend –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å–ø–∏—Å–æ–∫ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
   - –°–æ–æ–±—â–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –ø–æ `connectionId`

4. **–£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç—Ä–∏–º–∞:**
   - –ù–∞–≤–µ–¥–∏—Ç–µ –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫—É —Å—Ç—Ä–∏–º–∞
   - –ù–∞–∂–º–∏—Ç–µ –Ω–∞ ‚úï
   - –û—Ç–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –æ—Ç WebSocket
   - –û—Ç–∫–ª—é—á–∞–µ—Ç—Å—è –æ—Ç backend

---

## üåê Environment Variables:

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è production URL:
- `REACT_APP_API_URL`: https://mellchat-production.up.railway.app
- `REACT_APP_WS_URL`: wss://mellchat-production.up.railway.app

–î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–∑–¥–∞–π—Ç–µ `.env`:
```env
REACT_APP_API_URL=http://localhost:3001
REACT_APP_WS_URL=ws://localhost:3001
```

---

## üöÄ –î–µ–ø–ª–æ–π –Ω–∞ Vercel:

1. **Build –∫–æ–º–∞–Ω–¥–∞:** `npm run build`
2. **Output –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è:** `build`
3. **Environment Variables (–¥–æ–±–∞–≤–∏—Ç—å –≤ Vercel):**
   - `REACT_APP_API_URL` = `https://mellchat-production.up.railway.app`
   - `REACT_APP_WS_URL` = `wss://mellchat-production.up.railway.app`

---

## üìù TODO (—Å–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏):

- [ ] –ê–≤—Ç–æ–≤—Å—Ç–∞–≤–∫–∞ URL –∏–∑ –±—É—Ñ–µ—Ä–∞ –æ–±–º–µ–Ω–∞
- [ ] –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∞–∫—Ü–∏–π –Ω–∞ backend
- [ ] –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∑–∞–∫–ª–∞–¥–æ–∫ –Ω–∞ backend
- [ ] Push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- [ ] OAuth Google
- [ ] –û–±–ª–∞—á–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ —á–∞—Ç–æ–≤

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:

### –õ–æ–∫–∞–ª—å–Ω–æ:
```bash
cd frontend/pwa
npm start
# –û—Ç–∫—Ä–æ–µ—Ç—Å—è http://localhost:3001
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:
1. –û—Ç–∫—Ä–æ–π—Ç–µ DevTools ‚Üí Console
2. –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: `‚úÖ WebSocket connected`
3. –ù–∞–∂–º–∏—Ç–µ FAB (+) –∏ –¥–æ–±–∞–≤—å—Ç–µ —Å—Ç—Ä–∏–º
4. –°–æ–æ–±—â–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–ª—è—Ç—å—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

---

## üêõ Troubleshooting:

**WebSocket –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ Railway backend –∑–∞–ø—É—â–µ–Ω
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ backend
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ URL –≤ console.log

**–°–æ–æ–±—â–µ–Ω–∏—è –Ω–µ –ø—Ä–∏—Ö–æ–¥—è—Ç:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Å—Ç—Ä–∏–º –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –∞–∫—Ç–∏–≤–µ–Ω
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ console.log –¥–ª—è –æ—à–∏–±–æ–∫
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ connectionId –ø—Ä–æ—à–ª–∞ —É—Å–ø–µ—à–Ω–æ

**–†–µ–∞–∫—Ü–∏–∏/–∑–∞–∫–ª–∞–¥–∫–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç:**
- –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ - –ø–æ–∫–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ª–æ–∫–∞–ª—å–Ω–æ
- Backend –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è - —Å–ª–µ–¥—É—é—â–∏–π —à–∞–≥

