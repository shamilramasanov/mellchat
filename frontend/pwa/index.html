<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/icons/favicon.svg" />
    
    <!-- Viewport for iOS PWA - prevent bounce/overscroll -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#0f0f23" />
    <meta name="description" content="MellChat - Aggregate and manage chats from YouTube, Twitch, and Kick in real-time" />
    <link rel="apple-touch-icon" href="/icons/icon-192x192.png" />
    <link rel="manifest" href="/manifest.json" />
    
    <!-- iOS Specific - Full Screen App Mode -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="apple-mobile-web-app-title" content="MellChat" />
    <meta name="format-detection" content="telephone=no" />
    
    <!-- iOS Home Screen Icons -->
    <link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png" />
    <link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png" />
    <link rel="apple-touch-icon" sizes="128x128" href="/icons/icon-128x128.png" />
    <link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png" />
    <link rel="apple-touch-icon" sizes="152x152" href="/icons/icon-152x152.png" />
    <link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png" />
    <link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png" />
    <link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png" />
    
    <title>MellChat - Multi-platform Chat Aggregator</title>
    
    <style>
      /* iOS PWA - Prevent bounce/overscroll */
      html, body {
        width: 100%;
        height: 100%;
        margin: 0;
        padding: 0;
        overflow: hidden;
        -webkit-overflow-scrolling: touch;
        overscroll-behavior: none;
      }
      
      /* Safe area применяется ОДИН РАЗ здесь в #root */
      /* Используем constant() для старых iOS и env() для новых */
      #root {
        width: 100vw;
        height: 100vh;
        height: 100dvh;
        margin: 0;
        padding-top: constant(safe-area-inset-top); /* iOS 11.0-11.2 */
        padding-top: env(safe-area-inset-top, 0px); /* iOS 11.2+ */
        padding-bottom: constant(safe-area-inset-bottom);
        padding-bottom: env(safe-area-inset-bottom, 0px);
        padding-left: constant(safe-area-inset-left);
        padding-left: env(safe-area-inset-left, 0px);
        padding-right: constant(safe-area-inset-right);
        padding-right: env(safe-area-inset-right, 0px);
        overflow: hidden;
        -webkit-overflow-scrolling: touch;
        overscroll-behavior: contain;
        box-sizing: border-box;
        /* Для iOS PWA нужно использовать viewport units на #root */
      }
      
      /* iOS Safari fix */
      @supports (-webkit-touch-callout: none) {
        #root {
          height: -webkit-fill-available;
          min-height: -webkit-fill-available;
        }
      }
      
      /* Prevent pull-to-refresh on iOS */
      body {
        overscroll-behavior-y: none;
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.jsx"></script>
    
    <!-- SVG Filter for True Liquid Glass Effect -->
    <svg style="display: none">
      <filter
        id="glass-distortion"
        x="0%"
        y="0%"
        width="100%"
        height="100%"
        filterUnits="objectBoundingBox"
      >
        <feTurbulence
          type="fractalNoise"
          baseFrequency="0.01 0.01"
          numOctaves="1"
          seed="5"
          result="turbulence"
        />

        <feComponentTransfer in="turbulence" result="mapped">
          <feFuncR type="gamma" amplitude="1" exponent="10" offset="0.5" />
          <feFuncG type="gamma" amplitude="0" exponent="1" offset="0" />
          <feFuncB type="gamma" amplitude="0" exponent="1" offset="0.5" />
        </feComponentTransfer>

        <feGaussianBlur in="turbulence" stdDeviation="3" result="softMap" />

        <feSpecularLighting
          in="softMap"
          surfaceScale="5"
          specularConstant="1"
          specularExponent="100"
          lighting-color="white"
          result="specLight"
        >
          <fePointLight x="-200" y="-200" z="300" />
        </feSpecularLighting>

        <feComposite
          in="specLight"
          operator="arithmetic"
          k1="0"
          k2="1"
          k3="1"
          k4="0"
          result="litImage"
        />

        <feDisplacementMap
          in="SourceGraphic"
          in2="softMap"
          scale="150"
          xChannelSelector="R"
          yChannelSelector="G"
        />
      </filter>
    </svg>
  </body>
</html>

