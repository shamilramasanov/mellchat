2025-11-02T08:44:41.111895255Z [inf]  âœ… logger.js: Starting to load...
2025-11-02T08:44:41.111900021Z [inf]  âœ… logger.js: winston loaded
2025-11-02T08:44:41.111904172Z [inf]  âœ… logger.js: DailyRotateFile loaded
2025-11-02T08:44:41.111908517Z [inf]  âœ… logger.js: path loaded
2025-11-02T08:44:41.111913338Z [inf]  âœ… index.js: logger loaded
2025-11-02T08:44:41.111918798Z [inf]  âœ… index.js: loading errorHandler...
2025-11-02T08:44:41.113618471Z [inf]  âœ… passport.js: Starting to load...
2025-11-02T08:44:41.113625170Z [inf]  âœ… passport.js: passport loaded
2025-11-02T08:44:41.113631116Z [inf]  âœ… passport.js: GoogleStrategy loaded
2025-11-02T08:44:41.113636672Z [inf]  2025-11-02 08:44:41.088 [[32minfo[39m] âœ… AuthService loading {
2025-11-02T08:44:41.113641181Z [inf]    "service": "mellchat-api",
2025-11-02T08:44:41.113646085Z [inf]    "version": "1.0.0"
2025-11-02T08:44:41.113650294Z [inf]  }
2025-11-02T08:44:41.113654508Z [inf]  âœ… authService: loading databaseService...
2025-11-02T08:44:41.127687154Z [inf]  2025-11-02 08:44:41.123 [[32minfo[39m] âœ… DatabaseService loading {
2025-11-02T08:44:41.127694621Z [inf]    "service": "mellchat-api",
2025-11-02T08:44:41.127699047Z [inf]    "version": "1.0.0"
2025-11-02T08:44:41.127703149Z [inf]  }
2025-11-02T08:44:41.127707217Z [inf]  âœ… authService: databaseService loaded
2025-11-02T08:44:41.127711585Z [inf]  âœ… authService: loading jwt...
2025-11-02T08:44:41.154649629Z [inf]  âœ… authService: jwt loaded
2025-11-02T08:44:41.154660153Z [inf]  âœ… authService: loading bcrypt...
2025-11-02T08:44:41.154666522Z [inf]  âœ… authService: bcrypt loaded
2025-11-02T08:44:41.154672077Z [inf]  âœ… authService: loading uuid...
2025-11-02T08:44:41.245375416Z [inf]  âœ… index.js: Starting to load...
2025-11-02T08:44:41.349957164Z [inf]  âœ… index.js: express loaded
2025-11-02T08:44:41.351714090Z [inf]  âœ… index.js: cors loaded
2025-11-02T08:44:41.353615257Z [inf]  âœ… index.js: helmet loaded
2025-11-02T08:44:41.353621087Z [inf]  âœ… index.js: cookieParser loaded
2025-11-02T08:44:41.361149797Z [inf]  âœ… index.js: dotenv loaded
2025-11-02T08:44:41.361154195Z [inf]  âœ… index.js: loading logger...
2025-11-02T08:44:41.361158162Z [inf]  âœ… logger.js: Starting to load...
2025-11-02T08:44:41.388406485Z [inf]  âœ… logger.js: winston loaded
2025-11-02T08:44:41.390132244Z [inf]  âœ… logger.js: DailyRotateFile loaded
2025-11-02T08:44:41.390136585Z [inf]  âœ… logger.js: path loaded
2025-11-02T08:44:41.422907366Z [inf]  âœ… index.js: logger loaded
2025-11-02T08:44:41.422913843Z [inf]  âœ… index.js: loading errorHandler...
2025-11-02T08:44:41.422918282Z [inf]  âœ… index.js: errorHandler loaded
2025-11-02T08:44:41.422922259Z [inf]  âœ… index.js: loading rateLimiter...
2025-11-02T08:44:41.605471906Z [inf]  2025-11-02 08:44:41.599 [[32minfo[39m] âœ… Rate limiter initialized {
2025-11-02T08:44:41.605479902Z [inf]    "service": "mellchat-api",
2025-11-02T08:44:41.605485717Z [inf]    "version": "1.0.0"
2025-11-02T08:44:41.605492405Z [inf]  }
2025-11-02T08:44:41.606947399Z [inf]  âœ… index.js: rateLimiter loaded
2025-11-02T08:44:41.606957002Z [inf]  âœ… index.js: loading metrics...
2025-11-02T08:44:41.641813379Z [inf]  2025-11-02 08:44:41.636 [[32minfo[39m] âœ… Metrics initialized {
2025-11-02T08:44:41.641834691Z [inf]    "service": "mellchat-api",
2025-11-02T08:44:41.641842999Z [inf]    "version": "1.0.0"
2025-11-02T08:44:41.641849340Z [inf]  }
2025-11-02T08:44:41.641856008Z [inf]  âœ… index.js: metrics loaded
2025-11-02T08:44:41.641862559Z [inf]  âœ… index.js: loading auth...
2025-11-02T08:44:41.641868397Z [inf]  âœ… index.js: auth loaded
2025-11-02T08:44:41.641874491Z [inf]  âœ… index.js: loading passport...
2025-11-02T08:44:41.641880655Z [inf]  âœ… passport.js: Starting to load...
2025-11-02T08:44:41.641886925Z [inf]  âœ… passport.js: passport loaded
2025-11-02T08:44:41.648979578Z [inf]  âœ… passport.js: GoogleStrategy loaded
2025-11-02T08:44:41.651088382Z [inf]  2025-11-02 08:44:41.649 [[32minfo[39m] âœ… AuthService loading {
2025-11-02T08:44:41.651095163Z [inf]    "service": "mellchat-api",
2025-11-02T08:44:41.651101132Z [inf]    "version": "1.0.0"
2025-11-02T08:44:41.651105378Z [inf]  }
2025-11-02T08:44:41.651109386Z [inf]  âœ… authService: loading databaseService...
2025-11-02T08:44:41.699829535Z [inf]    "version": "1.0.0"
2025-11-02T08:44:41.699841084Z [inf]  }
2025-11-02T08:44:41.699848028Z [inf]  âœ… authService: databaseService loaded
2025-11-02T08:44:41.699854066Z [inf]  âœ… authService: loading jwt...
2025-11-02T08:44:41.699887708Z [inf]  2025-11-02 08:44:41.692 [[32minfo[39m] âœ… DatabaseService loading {
2025-11-02T08:44:41.699894470Z [inf]    "service": "mellchat-api",
2025-11-02T08:44:41.725211918Z [inf]  âœ… authService: jwt loaded
2025-11-02T08:44:41.725220400Z [inf]  âœ… authService: loading bcrypt...
2025-11-02T08:44:41.726779154Z [inf]  âœ… authService: bcrypt loaded
2025-11-02T08:44:41.726786858Z [inf]  âœ… authService: loading uuid...
2025-11-02T08:44:41.750799831Z [inf]  2025-11-02 08:44:41.749 [[32minfo[39m] Redis client connected for rate limiting {
2025-11-02T08:44:41.750810807Z [inf]    "service": "mellchat-api",
2025-11-02T08:44:41.750821633Z [inf]    "version": "1.0.0"
2025-11-02T08:44:41.750828751Z [inf]  }
2025-11-02T08:44:43.115535885Z [inf]  
2025-11-02T08:44:43.115544021Z [inf]  > mellchat-api@1.0.0 start:with-migrations
2025-11-02T08:44:43.115550729Z [inf]  > NODE_ENV=production sh -c 'node apply-migrations.js && node src/index.js' || node src/index.js
2025-11-02T08:44:43.115558212Z [inf]  
2025-11-02T08:44:43.150735820Z [inf]  âœ… Connected to database on attempt 1
2025-11-02T08:44:43.150741308Z [inf]  âœ… Migrations tracking table ready
2025-11-02T08:44:43.150746502Z [inf]  ğŸ“‚ Migrations directory: /app/database/migrations
2025-11-02T08:44:43.163883253Z [inf]  ğŸ“ Found 20 migration files
2025-11-02T08:44:43.163891576Z [inf]  â­ï¸  Skipping 01_initial_schema.sql (already applied)
2025-11-02T08:44:43.165327963Z [inf]  â­ï¸  Skipping add_guest_sessions.sql (already applied)
2025-11-02T08:44:43.166887828Z [inf]  â­ï¸  Skipping add_fingerprint_to_guest_sessions.sql (already applied)
2025-11-02T08:44:43.166895732Z [inf]  â­ï¸  Skipping add_auth_users.sql (already applied)
2025-11-02T08:44:43.168397660Z [inf]  â­ï¸  Skipping add_auth_tables.sql (already applied)
2025-11-02T08:44:43.169592099Z [inf]  â­ï¸  Skipping add_message_scoring_fields.sql (already applied)
2025-11-02T08:44:43.170886839Z [inf]  â­ï¸  Skipping add_moderation_fields.sql (already applied)
2025-11-02T08:44:43.172074540Z [inf]  â­ï¸  Skipping add_materialized_views.sql (already applied)
2025-11-02T08:44:43.173630527Z [inf]  â­ï¸  Skipping add_advanced_indexes.sql (already applied)
2025-11-02T08:44:43.173638058Z [inf]  â­ï¸  Skipping add_critical_indexes.sql (already applied)
2025-11-02T08:44:43.175689431Z [inf]  â­ï¸  Skipping add_global_rules.sql (already applied)
2025-11-02T08:44:43.175697530Z [inf]  â­ï¸  Skipping add_performance_monitoring.sql (already applied)
2025-11-02T08:44:43.176928780Z [inf]  â­ï¸  Skipping add_user_activity_log.sql (already applied)
2025-11-02T08:44:43.176934282Z [inf]  â­ï¸  Skipping add_user_global_rules.sql (already applied)
2025-11-02T08:44:43.178477724Z [inf]  â­ï¸  Skipping add_user_sessions.sql (already applied)
2025-11-02T08:44:43.184353583Z [inf]  â­ï¸  Skipping add_user_settings.sql (already applied)
2025-11-02T08:44:43.184437222Z [inf]  â­ï¸  Skipping add_user_spam_rules.sql (already applied)
2025-11-02T08:44:43.184444072Z [inf]  â­ï¸  Skipping fix_schema_critical.sql (already applied)
2025-11-02T08:44:43.185889886Z [inf]  â­ï¸  Skipping fix_user_id.sql (already applied)
2025-11-02T08:44:43.185898003Z [inf]  â­ï¸  Skipping optimize_data_types.sql (already applied)
2025-11-02T08:44:43.185902611Z [inf]  
2025-11-02T08:44:43.185907438Z [inf]  ğŸ‰ Migrations completed!
2025-11-02T08:44:43.185911806Z [inf]     âœ… Applied: 0
2025-11-02T08:44:43.185916772Z [inf]     â­ï¸  Skipped: 20
2025-11-02T08:44:43.235703752Z [inf]  âœ… index.js: Starting to load...
2025-11-02T08:44:43.350740532Z [inf]  âœ… index.js: express loaded
2025-11-02T08:44:43.352155776Z [inf]  âœ… index.js: cors loaded
2025-11-02T08:44:43.352161217Z [inf]  âœ… index.js: helmet loaded
2025-11-02T08:44:43.353968393Z [inf]  âœ… index.js: cookieParser loaded
2025-11-02T08:44:43.360510355Z [inf]  âœ… index.js: dotenv loaded
2025-11-02T08:44:43.360517551Z [inf]  âœ… index.js: loading logger...
2025-11-02T08:44:43.360521796Z [inf]  âœ… logger.js: Starting to load...
2025-11-02T08:44:43.391695641Z [inf]  âœ… logger.js: winston loaded
2025-11-02T08:44:43.391701825Z [inf]  âœ… logger.js: DailyRotateFile loaded
2025-11-02T08:44:43.391706180Z [inf]  âœ… logger.js: path loaded
2025-11-02T08:44:43.422454855Z [inf]  âœ… index.js: logger loaded
2025-11-02T08:44:43.422459653Z [inf]  âœ… index.js: loading errorHandler...
2025-11-02T08:44:43.422464805Z [inf]  âœ… index.js: errorHandler loaded
2025-11-02T08:44:43.422469271Z [inf]  âœ… index.js: loading rateLimiter...
2025-11-02T08:44:43.617882384Z [inf]  2025-11-02 08:44:43.610 [[32minfo[39m] âœ… Rate limiter initialized {
2025-11-02T08:44:43.617890557Z [inf]    "service": "mellchat-api",
2025-11-02T08:44:43.617896404Z [inf]    "version": "1.0.0"
2025-11-02T08:44:43.617901669Z [inf]  }
2025-11-02T08:44:43.617907077Z [inf]  âœ… index.js: rateLimiter loaded
2025-11-02T08:44:43.617912311Z [inf]  âœ… index.js: loading metrics...
2025-11-02T08:44:43.652600358Z [inf]  2025-11-02 08:44:43.647 [[32minfo[39m] âœ… Metrics initialized {
2025-11-02T08:44:43.652606169Z [inf]    "service": "mellchat-api",
2025-11-02T08:44:43.652610462Z [inf]    "version": "1.0.0"
2025-11-02T08:44:43.652614392Z [inf]  }
2025-11-02T08:44:43.652618909Z [inf]  âœ… index.js: metrics loaded
2025-11-02T08:44:43.652623200Z [inf]  âœ… index.js: loading auth...
2025-11-02T08:44:43.652627617Z [inf]  âœ… index.js: auth loaded
2025-11-02T08:44:43.652631864Z [inf]  âœ… index.js: loading passport...
2025-11-02T08:44:43.652636228Z [inf]  âœ… passport.js: Starting to load...
2025-11-02T08:44:43.654036380Z [inf]  âœ… passport.js: passport loaded
2025-11-02T08:44:43.661314401Z [inf]  âœ… passport.js: GoogleStrategy loaded
2025-11-02T08:44:43.662942843Z [inf]  2025-11-02 08:44:43.661 [[32minfo[39m] âœ… AuthService loading {
2025-11-02T08:44:43.662948567Z [inf]    "service": "mellchat-api",
2025-11-02T08:44:43.662952459Z [inf]    "version": "1.0.0"
2025-11-02T08:44:43.662956237Z [inf]  }
2025-11-02T08:44:43.662961847Z [inf]  âœ… authService: loading databaseService...
2025-11-02T08:44:43.704607826Z [inf]  2025-11-02 08:44:43.699 [[32minfo[39m] âœ… DatabaseService loading {
2025-11-02T08:44:43.704614469Z [inf]    "service": "mellchat-api",
2025-11-02T08:44:43.704618980Z [inf]    "version": "1.0.0"
2025-11-02T08:44:43.704623386Z [inf]  }
2025-11-02T08:44:43.704627921Z [inf]  âœ… authService: databaseService loaded
2025-11-02T08:44:43.704631902Z [inf]  âœ… authService: loading jwt...
2025-11-02T08:44:43.738882035Z [inf]  âœ… authService: jwt loaded
2025-11-02T08:44:43.738889037Z [inf]  âœ… authService: loading bcrypt...
2025-11-02T08:44:43.738894232Z [inf]  âœ… authService: bcrypt loaded
2025-11-02T08:44:43.738898640Z [inf]  âœ… authService: loading uuid...
2025-11-02T08:44:43.761927182Z [inf]  2025-11-02 08:44:43.759 [[32minfo[39m] Redis client connected for rate limiting {
2025-11-02T08:44:43.761931790Z [inf]    "service": "mellchat-api",
2025-11-02T08:44:43.761936047Z [inf]    "version": "1.0.0"
2025-11-02T08:44:43.761939894Z [inf]  }
2025-11-02T08:44:43.811677251Z [inf]  âœ… index.js: Starting to load...
2025-11-02T08:44:44.164575115Z [inf]  âœ… index.js: express loaded
2025-11-02T08:44:44.164580193Z [inf]  âœ… index.js: cors loaded
2025-11-02T08:44:44.164585125Z [inf]  âœ… index.js: helmet loaded
2025-11-02T08:44:44.164590061Z [inf]  âœ… index.js: cookieParser loaded
2025-11-02T08:44:44.164595062Z [inf]  âœ… index.js: dotenv loaded
2025-11-02T08:44:44.164601320Z [inf]  âœ… index.js: loading logger...
2025-11-02T08:44:44.164606743Z [inf]  âœ… logger.js: Starting to load...
2025-11-02T08:44:44.164611934Z [inf]  âœ… logger.js: winston loaded
2025-11-02T08:44:44.164619319Z [inf]  âœ… logger.js: DailyRotateFile loaded
2025-11-02T08:44:44.164624488Z [inf]  âœ… logger.js: path loaded
2025-11-02T08:44:44.164629488Z [inf]  âœ… index.js: logger loaded
2025-11-02T08:44:44.164634837Z [inf]  âœ… index.js: loading errorHandler...
2025-11-02T08:44:44.164640290Z [inf]  âœ… index.js: errorHandler loaded
2025-11-02T08:44:44.164646120Z [inf]  âœ… index.js: loading rateLimiter...
2025-11-02T08:44:44.164652055Z [inf]  2025-11-02 08:44:44.147 [[32minfo[39m] âœ… Rate limiter initialized {
2025-11-02T08:44:44.164657778Z [inf]    "service": "mellchat-api",
2025-11-02T08:44:44.164663380Z [inf]    "version": "1.0.0"
2025-11-02T08:44:44.164669431Z [inf]  }
2025-11-02T08:44:44.164676100Z [inf]  âœ… index.js: rateLimiter loaded
2025-11-02T08:44:44.164681865Z [inf]  âœ… index.js: loading metrics...
2025-11-02T08:44:44.185956435Z [inf]  2025-11-02 08:44:44.182 [[32minfo[39m] âœ… Metrics initialized {
2025-11-02T08:44:44.185963572Z [inf]    "service": "mellchat-api",
2025-11-02T08:44:44.185969179Z [inf]    "version": "1.0.0"
2025-11-02T08:44:44.185974914Z [inf]  }
2025-11-02T08:44:44.185981114Z [inf]  âœ… index.js: metrics loaded
2025-11-02T08:44:44.185986334Z [inf]  âœ… index.js: loading auth...
2025-11-02T08:44:44.185991684Z [inf]  âœ… index.js: auth loaded
2025-11-02T08:44:44.185995803Z [inf]  âœ… index.js: loading passport...
2025-11-02T08:44:44.186001234Z [inf]  âœ… passport.js: Starting to load...
2025-11-02T08:44:44.188626671Z [inf]  âœ… passport.js: passport loaded
2025-11-02T08:44:44.195553523Z [inf]  âœ… passport.js: GoogleStrategy loaded
2025-11-02T08:44:44.197279361Z [inf]  2025-11-02 08:44:44.194 [[32minfo[39m] âœ… AuthService loading {
2025-11-02T08:44:44.197290373Z [inf]    "service": "mellchat-api",
2025-11-02T08:44:44.197296373Z [inf]    "version": "1.0.0"
2025-11-02T08:44:44.197307072Z [inf]  }
2025-11-02T08:44:44.197313004Z [inf]  âœ… authService: loading databaseService...
2025-11-02T08:44:44.236234566Z [inf]  2025-11-02 08:44:44.231 [[32minfo[39m] âœ… DatabaseService loading {
2025-11-02T08:44:44.236243362Z [inf]    "service": "mellchat-api",
2025-11-02T08:44:44.236249035Z [inf]    "version": "1.0.0"
2025-11-02T08:44:44.236254027Z [inf]  }
2025-11-02T08:44:44.236258670Z [inf]  âœ… authService: databaseService loaded
2025-11-02T08:44:44.236263280Z [inf]  âœ… authService: loading jwt...
2025-11-02T08:44:44.265972943Z [inf]  âœ… authService: jwt loaded
2025-11-02T08:44:44.265980312Z [inf]  âœ… authService: loading bcrypt...
2025-11-02T08:44:44.265987558Z [inf]  âœ… authService: bcrypt loaded
2025-11-02T08:44:44.265994521Z [inf]  âœ… authService: loading uuid...
2025-11-02T08:44:44.282229559Z [inf]  2025-11-02 08:44:44.279 [[32minfo[39m] Redis client connected for rate limiting {
2025-11-02T08:44:44.282237411Z [inf]    "service": "mellchat-api",
2025-11-02T08:44:44.282244523Z [inf]    "version": "1.0.0"
2025-11-02T08:44:44.282250037Z [inf]  }
2025-11-02T08:44:45.319702301Z [inf]  
2025-11-02T08:44:45.319706914Z [inf]  > mellchat-api@1.0.0 start:with-migrations
2025-11-02T08:44:45.319711617Z [inf]  > NODE_ENV=production sh -c 'node apply-migrations.js && node src/index.js' || node src/index.js
2025-11-02T08:44:45.319715497Z [inf]  
2025-11-02T08:44:45.581945254Z [inf]  âœ… Connected to database on attempt 1
2025-11-02T08:44:45.583483803Z [inf]  âœ… Migrations tracking table ready
2025-11-02T08:44:45.586365350Z [inf]  ğŸ“‚ Migrations directory: /app/database/migrations
2025-11-02T08:44:45.600032513Z [inf]  ğŸ“ Found 20 migration files
2025-11-02T08:44:45.604416803Z [inf]  â­ï¸  Skipping 01_initial_schema.sql (already applied)
2025-11-02T08:44:45.611412156Z [inf]  â­ï¸  Skipping add_guest_sessions.sql (already applied)
2025-11-02T08:44:45.611423268Z [inf]  â­ï¸  Skipping add_fingerprint_to_guest_sessions.sql (already applied)
2025-11-02T08:44:45.611430502Z [inf]  â­ï¸  Skipping add_auth_users.sql (already applied)
2025-11-02T08:44:45.611436578Z [inf]  â­ï¸  Skipping add_auth_tables.sql (already applied)
2025-11-02T08:44:45.611445778Z [inf]  â­ï¸  Skipping add_message_scoring_fields.sql (already applied)
2025-11-02T08:44:45.611454109Z [inf]  â­ï¸  Skipping add_moderation_fields.sql (already applied)
2025-11-02T08:44:45.612839379Z [inf]  â­ï¸  Skipping add_materialized_views.sql (already applied)
2025-11-02T08:44:45.614518312Z [inf]  â­ï¸  Skipping add_advanced_indexes.sql (already applied)
2025-11-02T08:44:45.614528517Z [inf]  â­ï¸  Skipping add_critical_indexes.sql (already applied)
2025-11-02T08:44:45.615900296Z [inf]  â­ï¸  Skipping add_global_rules.sql (already applied)
2025-11-02T08:44:45.617258272Z [inf]  â­ï¸  Skipping add_performance_monitoring.sql (already applied)
2025-11-02T08:44:45.617264831Z [inf]  â­ï¸  Skipping add_user_activity_log.sql (already applied)
2025-11-02T08:44:45.618619817Z [inf]  â­ï¸  Skipping add_user_global_rules.sql (already applied)
2025-11-02T08:44:45.619927307Z [inf]  â­ï¸  Skipping add_user_sessions.sql (already applied)
2025-11-02T08:44:45.621209277Z [inf]  â­ï¸  Skipping add_user_settings.sql (already applied)
2025-11-02T08:44:45.621214794Z [inf]  â­ï¸  Skipping add_user_spam_rules.sql (already applied)
2025-11-02T08:44:45.622931180Z [inf]  â­ï¸  Skipping fix_schema_critical.sql (already applied)
2025-11-02T08:44:45.622936461Z [inf]  â­ï¸  Skipping fix_user_id.sql (already applied)
2025-11-02T08:44:45.624124015Z [inf]  â­ï¸  Skipping optimize_data_types.sql (already applied)
2025-11-02T08:44:45.624129645Z [inf]  
2025-11-02T08:44:45.624134499Z [inf]  ğŸ‰ Migrations completed!
2025-11-02T08:44:45.624139968Z [inf]     âœ… Applied: 0
2025-11-02T08:44:45.624144668Z [inf]     â­ï¸  Skipped: 20
2025-11-02T08:44:45.682405435Z [inf]  âœ… index.js: Starting to load...
2025-11-02T08:44:45.797246407Z [inf]  âœ… index.js: express loaded
2025-11-02T08:44:45.797253387Z [inf]  âœ… index.js: cors loaded
2025-11-02T08:44:45.797258948Z [inf]  âœ… index.js: helmet loaded
2025-11-02T08:44:45.797263694Z [inf]  âœ… index.js: cookieParser loaded
2025-11-02T08:44:45.799120124Z [inf]  âœ… index.js: dotenv loaded
2025-11-02T08:44:45.799128522Z [inf]  âœ… index.js: loading logger...
2025-11-02T08:44:45.801165054Z [inf]  âœ… logger.js: Starting to load...
2025-11-02T08:44:45.828402485Z [inf]  âœ… logger.js: winston loaded
2025-11-02T08:44:45.828411096Z [inf]  âœ… logger.js: DailyRotateFile loaded
2025-11-02T08:44:45.828417160Z [inf]  âœ… logger.js: path loaded
2025-11-02T08:44:45.853316115Z [inf]  âœ… index.js: logger loaded
2025-11-02T08:44:45.853327627Z [inf]  âœ… index.js: loading errorHandler...
2025-11-02T08:44:45.853333285Z [inf]  âœ… index.js: errorHandler loaded
2025-11-02T08:44:45.853338781Z [inf]  âœ… index.js: loading rateLimiter...
2025-11-02T08:44:46.195523194Z [inf]  âœ… authService: loading jwt...
2025-11-02T08:44:46.195528018Z [inf]  âœ… authService: jwt loaded
2025-11-02T08:44:46.195532220Z [inf]  âœ… authService: loading bcrypt...
2025-11-02T08:44:46.195536597Z [inf]  âœ… authService: bcrypt loaded
2025-11-02T08:44:46.195543429Z [inf]  âœ… authService: loading uuid...
2025-11-02T08:44:46.195669148Z [inf]  2025-11-02 08:44:46.027 [[32minfo[39m] âœ… Rate limiter initialized {
2025-11-02T08:44:46.195673390Z [inf]    "service": "mellchat-api",
2025-11-02T08:44:46.195677224Z [inf]    "version": "1.0.0"
2025-11-02T08:44:46.195680991Z [inf]  }
2025-11-02T08:44:46.195684913Z [inf]  âœ… index.js: rateLimiter loaded
2025-11-02T08:44:46.195688937Z [inf]  âœ… index.js: loading metrics...
2025-11-02T08:44:46.195692696Z [inf]  2025-11-02 08:44:46.077 [[32minfo[39m] âœ… Metrics initialized {
2025-11-02T08:44:46.195697881Z [inf]    "service": "mellchat-api",
2025-11-02T08:44:46.195702472Z [inf]    "version": "1.0.0"
2025-11-02T08:44:46.195706665Z [inf]  }
2025-11-02T08:44:46.195710425Z [inf]  âœ… index.js: metrics loaded
2025-11-02T08:44:46.195714265Z [inf]  âœ… index.js: loading auth...
2025-11-02T08:44:46.195719602Z [inf]  âœ… index.js: auth loaded
2025-11-02T08:44:46.195724024Z [inf]  âœ… index.js: loading passport...
2025-11-02T08:44:46.195728005Z [inf]  âœ… passport.js: Starting to load...
2025-11-02T08:44:46.195733173Z [inf]  âœ… passport.js: passport loaded
2025-11-02T08:44:46.195736852Z [inf]  âœ… passport.js: GoogleStrategy loaded
2025-11-02T08:44:46.195740895Z [inf]  2025-11-02 08:44:46.094 [[32minfo[39m] âœ… AuthService loading {
2025-11-02T08:44:46.195744550Z [inf]    "service": "mellchat-api",
2025-11-02T08:44:46.195748591Z [inf]    "version": "1.0.0"
2025-11-02T08:44:46.195752671Z [inf]  }
2025-11-02T08:44:46.195756476Z [inf]  âœ… authService: loading databaseService...
2025-11-02T08:44:46.195760550Z [inf]  2025-11-02 08:44:46.143 [[32minfo[39m] âœ… DatabaseService loading {
2025-11-02T08:44:46.195764962Z [inf]    "service": "mellchat-api",
2025-11-02T08:44:46.195768892Z [inf]    "version": "1.0.0"
2025-11-02T08:44:46.195772627Z [inf]  }
2025-11-02T08:44:46.195776654Z [inf]  âœ… authService: databaseService loaded
2025-11-02T08:44:46.212602937Z [inf]  2025-11-02 08:44:46.207 [[32minfo[39m] Redis client connected for rate limiting {
2025-11-02T08:44:46.212610991Z [inf]    "service": "mellchat-api",
2025-11-02T08:44:46.212617628Z [inf]    "version": "1.0.0"
2025-11-02T08:44:46.212623705Z [inf]  }
2025-11-02T08:44:46.262806052Z [inf]  âœ… index.js: Starting to load...
2025-11-02T08:44:46.379413073Z [inf]  âœ… index.js: express loaded
2025-11-02T08:44:46.379420859Z [inf]  âœ… index.js: cors loaded
2025-11-02T08:44:46.379426509Z [inf]  âœ… index.js: helmet loaded
2025-11-02T08:44:46.379432288Z [inf]  âœ… index.js: cookieParser loaded
2025-11-02T08:44:46.379438526Z [inf]  âœ… index.js: dotenv loaded
2025-11-02T08:44:46.379443896Z [inf]  âœ… index.js: loading logger...
2025-11-02T08:44:46.379449601Z [inf]  âœ… logger.js: Starting to load...
2025-11-02T08:44:46.404577120Z [inf]  âœ… logger.js: winston loaded
2025-11-02T08:44:46.404584922Z [inf]  âœ… logger.js: DailyRotateFile loaded
2025-11-02T08:44:46.404590313Z [inf]  âœ… logger.js: path loaded
2025-11-02T08:44:46.430728072Z [inf]  âœ… index.js: logger loaded
2025-11-02T08:44:46.430734988Z [inf]  âœ… index.js: loading errorHandler...
2025-11-02T08:44:46.430739730Z [inf]  âœ… index.js: errorHandler loaded
2025-11-02T08:44:46.430743549Z [inf]  âœ… index.js: loading rateLimiter...
2025-11-02T08:44:46.619854117Z [inf]  2025-11-02 08:44:46.614 [[32minfo[39m] âœ… Rate limiter initialized {
2025-11-02T08:44:46.619862912Z [inf]    "service": "mellchat-api",
2025-11-02T08:44:46.619869545Z [inf]    "version": "1.0.0"
2025-11-02T08:44:46.619875301Z [inf]  }
2025-11-02T08:44:46.622130172Z [inf]  âœ… index.js: rateLimiter loaded
2025-11-02T08:44:46.622137351Z [inf]  âœ… index.js: loading metrics...
2025-11-02T08:44:46.657265919Z [inf]  2025-11-02 08:44:46.656 [[32minfo[39m] âœ… Metrics initialized {
2025-11-02T08:44:46.657272032Z [inf]    "service": "mellchat-api",
2025-11-02T08:44:46.657276726Z [inf]    "version": "1.0.0"
2025-11-02T08:44:46.657280871Z [inf]  }
2025-11-02T08:44:46.659185584Z [inf]  âœ… index.js: metrics loaded
2025-11-02T08:44:46.659196267Z [inf]  âœ… index.js: loading auth...
2025-11-02T08:44:46.659201400Z [inf]  âœ… index.js: auth loaded
2025-11-02T08:44:46.659207204Z [inf]  âœ… index.js: loading passport...
2025-11-02T08:44:46.659213372Z [inf]  âœ… passport.js: Starting to load...
2025-11-02T08:44:46.666454340Z [inf]  âœ… passport.js: passport loaded
2025-11-02T08:44:46.677594019Z [inf]  âœ… passport.js: GoogleStrategy loaded
2025-11-02T08:44:46.677600066Z [inf]  2025-11-02 08:44:46.676 [[32minfo[39m] âœ… AuthService loading {
2025-11-02T08:44:46.677604976Z [inf]    "service": "mellchat-api",
2025-11-02T08:44:46.677608896Z [inf]    "version": "1.0.0"
2025-11-02T08:44:46.677612837Z [inf]  }
2025-11-02T08:44:46.679141881Z [inf]  âœ… authService: loading databaseService...
2025-11-02T08:44:46.713314185Z [inf]  2025-11-02 08:44:46.712 [[32minfo[39m] âœ… DatabaseService loading {
2025-11-02T08:44:46.713322837Z [inf]    "service": "mellchat-api",
2025-11-02T08:44:46.713331395Z [inf]    "version": "1.0.0"
2025-11-02T08:44:46.713339422Z [inf]  }
2025-11-02T08:44:46.714987828Z [inf]  âœ… authService: databaseService loaded
2025-11-02T08:44:46.714993585Z [inf]  âœ… authService: loading jwt...
2025-11-02T08:44:46.743649824Z [inf]  âœ… authService: jwt loaded
2025-11-02T08:44:46.743658171Z [inf]  âœ… authService: loading bcrypt...
2025-11-02T08:44:46.745292908Z [inf]  âœ… authService: bcrypt loaded
2025-11-02T08:44:46.745301130Z [inf]  âœ… authService: loading uuid...
2025-11-02T08:44:46.769691710Z [inf]  2025-11-02 08:44:46.765 [[32minfo[39m] Redis client connected for rate limiting {
2025-11-02T08:44:46.769698744Z [inf]    "service": "mellchat-api",
2025-11-02T08:44:46.769703649Z [inf]    "version": "1.0.0"
2025-11-02T08:44:46.769708067Z [inf]  }
2025-11-02T08:44:47.742165678Z [inf]  
2025-11-02T08:44:47.742174262Z [inf]  > mellchat-api@1.0.0 start:with-migrations
2025-11-02T08:44:47.742186939Z [inf]  > NODE_ENV=production sh -c 'node apply-migrations.js && node src/index.js' || node src/index.js
2025-11-02T08:44:47.742197623Z [inf]  
2025-11-02T08:44:48.183861265Z [inf]  â­ï¸  Skipping add_user_settings.sql (already applied)
2025-11-02T08:44:48.183871046Z [inf]  ğŸ“‚ Migrations directory: /app/database/migrations
2025-11-02T08:44:48.183873475Z [inf]  â­ï¸  Skipping add_user_spam_rules.sql (already applied)
2025-11-02T08:44:48.183880798Z [inf]  ğŸ“ Found 20 migration files
2025-11-02T08:44:48.183888314Z [inf]  â­ï¸  Skipping 01_initial_schema.sql (already applied)
2025-11-02T08:44:48.183894423Z [inf]  â­ï¸  Skipping add_guest_sessions.sql (already applied)
2025-11-02T08:44:48.183900424Z [inf]  â­ï¸  Skipping add_fingerprint_to_guest_sessions.sql (already applied)
2025-11-02T08:44:48.183909347Z [inf]  â­ï¸  Skipping add_auth_users.sql (already applied)
2025-11-02T08:44:48.183914282Z [inf]  â­ï¸  Skipping add_auth_tables.sql (already applied)
2025-11-02T08:44:48.183918632Z [inf]  â­ï¸  Skipping add_message_scoring_fields.sql (already applied)
2025-11-02T08:44:48.183923132Z [inf]  â­ï¸  Skipping add_moderation_fields.sql (already applied)
2025-11-02T08:44:48.183936165Z [inf]  â­ï¸  Skipping add_materialized_views.sql (already applied)
2025-11-02T08:44:48.183940510Z [inf]  â­ï¸  Skipping add_advanced_indexes.sql (already applied)
2025-11-02T08:44:48.183944359Z [inf]  â­ï¸  Skipping add_critical_indexes.sql (already applied)
2025-11-02T08:44:48.183951115Z [inf]  â­ï¸  Skipping add_global_rules.sql (already applied)
2025-11-02T08:44:48.183955367Z [inf]  â­ï¸  Skipping add_performance_monitoring.sql (already applied)
2025-11-02T08:44:48.183961576Z [inf]  â­ï¸  Skipping add_user_activity_log.sql (already applied)
2025-11-02T08:44:48.183965387Z [inf]  â­ï¸  Skipping add_user_global_rules.sql (already applied)
2025-11-02T08:44:48.183968965Z [inf]  âœ… Connected to database on attempt 1
2025-11-02T08:44:48.183970234Z [inf]  â­ï¸  Skipping add_user_sessions.sql (already applied)
2025-11-02T08:44:48.183973733Z [inf]  âœ… Migrations tracking table ready
2025-11-02T08:44:48.185104843Z [inf]  â­ï¸  Skipping optimize_data_types.sql (already applied)
2025-11-02T08:44:48.185114671Z [inf]  
2025-11-02T08:44:48.185124475Z [inf]  ğŸ‰ Migrations completed!
2025-11-02T08:44:48.185128451Z [inf]  â­ï¸  Skipping fix_schema_critical.sql (already applied)
2025-11-02T08:44:48.185132733Z [inf]     âœ… Applied: 0
2025-11-02T08:44:48.185135862Z [inf]  â­ï¸  Skipping fix_user_id.sql (already applied)
2025-11-02T08:44:48.185140224Z [inf]     â­ï¸  Skipped: 20
2025-11-02T08:44:48.185157046Z [inf]  âœ… index.js: Starting to load...
2025-11-02T08:44:48.222277407Z [inf]  âœ… index.js: express loaded
2025-11-02T08:44:48.222281880Z [inf]  âœ… index.js: cors loaded
2025-11-02T08:44:48.222285833Z [inf]  âœ… index.js: helmet loaded
2025-11-02T08:44:48.224262278Z [inf]  âœ… index.js: cookieParser loaded
2025-11-02T08:44:48.225857650Z [inf]  âœ… index.js: dotenv loaded
2025-11-02T08:44:48.225865761Z [inf]  âœ… index.js: loading logger...
2025-11-02T08:44:48.225871201Z [inf]  âœ… logger.js: Starting to load...
2025-11-02T08:44:48.254735607Z [inf]  âœ… logger.js: winston loaded
2025-11-02T08:44:48.254740633Z [inf]  âœ… logger.js: DailyRotateFile loaded
2025-11-02T08:44:48.254745086Z [inf]  âœ… logger.js: path loaded
2025-11-02T08:44:48.275995280Z [inf]  âœ… index.js: logger loaded
2025-11-02T08:44:48.276001361Z [inf]  âœ… index.js: loading errorHandler...
2025-11-02T08:44:48.277572337Z [inf]  âœ… index.js: errorHandler loaded
2025-11-02T08:44:48.277579150Z [inf]  âœ… index.js: loading rateLimiter...
2025-11-02T08:44:48.467020717Z [inf]  2025-11-02 08:44:48.458 [[32minfo[39m] âœ… Rate limiter initialized {
2025-11-02T08:44:48.467029823Z [inf]    "service": "mellchat-api",
2025-11-02T08:44:48.467035979Z [inf]    "version": "1.0.0"
2025-11-02T08:44:48.467042003Z [inf]  }
2025-11-02T08:44:48.467047872Z [inf]  âœ… index.js: rateLimiter loaded
2025-11-02T08:44:48.467053752Z [inf]  âœ… index.js: loading metrics...
2025-11-02T08:44:48.506899559Z [inf]  2025-11-02 08:44:48.502 [[32minfo[39m] âœ… Metrics initialized {
2025-11-02T08:44:48.506905539Z [inf]    "service": "mellchat-api",
2025-11-02T08:44:48.506913005Z [inf]    "version": "1.0.0"
2025-11-02T08:44:48.506918506Z [inf]  }
2025-11-02T08:44:48.506924299Z [inf]  âœ… index.js: metrics loaded
2025-11-02T08:44:48.506931395Z [inf]  âœ… index.js: loading auth...
2025-11-02T08:44:48.506936944Z [inf]  âœ… index.js: auth loaded
2025-11-02T08:44:48.506943854Z [inf]  âœ… index.js: loading passport...
2025-11-02T08:44:48.506949601Z [inf]  âœ… passport.js: Starting to load...
2025-11-02T08:44:48.512229244Z [inf]  âœ… passport.js: passport loaded
2025-11-02T08:44:48.522350757Z [inf]  âœ… passport.js: GoogleStrategy loaded
2025-11-02T08:44:48.528838719Z [inf]  2025-11-02 08:44:48.524 [[32minfo[39m] âœ… AuthService loading {
2025-11-02T08:44:48.528844637Z [inf]    "service": "mellchat-api",
2025-11-02T08:44:48.528850115Z [inf]    "version": "1.0.0"
2025-11-02T08:44:48.528855382Z [inf]  }
2025-11-02T08:44:48.528860505Z [inf]  âœ… authService: loading databaseService...
2025-11-02T08:44:48.562479177Z [inf]  2025-11-02 08:44:48.561 [[32minfo[39m] âœ… DatabaseService loading {
2025-11-02T08:44:48.562485534Z [inf]    "service": "mellchat-api",
2025-11-02T08:44:48.562490440Z [inf]    "version": "1.0.0"
2025-11-02T08:44:48.562495065Z [inf]  }
2025-11-02T08:44:48.563921033Z [inf]  âœ… authService: databaseService loaded
2025-11-02T08:44:48.563926758Z [inf]  âœ… authService: loading jwt...
2025-11-02T08:44:48.590513091Z [inf]  âœ… authService: jwt loaded
2025-11-02T08:44:48.590521818Z [inf]  âœ… authService: loading bcrypt...
2025-11-02T08:44:48.590527866Z [inf]  âœ… authService: bcrypt loaded
2025-11-02T08:44:48.590533680Z [inf]  âœ… authService: loading uuid...
2025-11-02T08:44:48.611658432Z [inf]  2025-11-02 08:44:48.610 [[32minfo[39m] Redis client connected for rate limiting {
2025-11-02T08:44:48.611662873Z [inf]    "service": "mellchat-api",
2025-11-02T08:44:48.611667216Z [inf]    "version": "1.0.0"
2025-11-02T08:44:48.611671224Z [inf]  }
2025-11-02T08:44:48.664953949Z [inf]  âœ… index.js: Starting to load...
2025-11-02T08:44:48.765961549Z [inf]  âœ… index.js: express loaded
2025-11-02T08:44:48.767263982Z [inf]  âœ… index.js: cors loaded
2025-11-02T08:44:48.768759255Z [inf]  âœ… index.js: helmet loaded
2025-11-02T08:44:48.768768203Z [inf]  âœ… index.js: cookieParser loaded
2025-11-02T08:44:48.770735238Z [inf]  âœ… index.js: dotenv loaded
2025-11-02T08:44:48.770740173Z [inf]  âœ… index.js: loading logger...
2025-11-02T08:44:48.772163334Z [inf]  âœ… logger.js: Starting to load...
2025-11-02T08:44:48.802221223Z [inf]  âœ… logger.js: winston loaded
2025-11-02T08:44:48.812385211Z [inf]  âœ… logger.js: DailyRotateFile loaded
2025-11-02T08:44:48.812391810Z [inf]  âœ… logger.js: path loaded
2025-11-02T08:44:48.832456628Z [inf]  âœ… index.js: logger loaded
2025-11-02T08:44:48.832463590Z [inf]  âœ… index.js: loading errorHandler...
2025-11-02T08:44:48.832471107Z [inf]  âœ… index.js: errorHandler loaded
2025-11-02T08:44:48.832477159Z [inf]  âœ… index.js: loading rateLimiter...
2025-11-02T08:44:49.157362486Z [inf]    "version": "1.0.0"
2025-11-02T08:44:49.157371886Z [inf]  }
2025-11-02T08:44:49.157373565Z [inf]  2025-11-02 08:44:48.998 [[32minfo[39m] âœ… Rate limiter initialized {
2025-11-02T08:44:49.157378702Z [inf]  âœ… authService: loading databaseService...
2025-11-02T08:44:49.157379564Z [inf]    "service": "mellchat-api",
2025-11-02T08:44:49.157385305Z [inf]    "version": "1.0.0"
2025-11-02T08:44:49.157387545Z [inf]  2025-11-02 08:44:49.087 [[32minfo[39m] âœ… DatabaseService loading {
2025-11-02T08:44:49.157391075Z [inf]  }
2025-11-02T08:44:49.157394515Z [inf]    "service": "mellchat-api",
2025-11-02T08:44:49.157398875Z [inf]  âœ… index.js: rateLimiter loaded
2025-11-02T08:44:49.157401019Z [inf]    "version": "1.0.0"
2025-11-02T08:44:49.157407112Z [inf]  }
2025-11-02T08:44:49.157407710Z [inf]  âœ… index.js: loading metrics...
2025-11-02T08:44:49.157413650Z [inf]  âœ… authService: databaseService loaded
2025-11-02T08:44:49.157415898Z [inf]  2025-11-02 08:44:49.039 [[32minfo[39m] âœ… Metrics initialized {
2025-11-02T08:44:49.157420706Z [inf]    "service": "mellchat-api",
2025-11-02T08:44:49.157424641Z [inf]    "version": "1.0.0"
2025-11-02T08:44:49.157428727Z [inf]  }
2025-11-02T08:44:49.157432939Z [inf]  âœ… index.js: metrics loaded
2025-11-02T08:44:49.157437119Z [inf]  âœ… index.js: loading auth...
2025-11-02T08:44:49.157440852Z [inf]  âœ… index.js: auth loaded
2025-11-02T08:44:49.157444929Z [inf]  âœ… index.js: loading passport...
2025-11-02T08:44:49.157449299Z [inf]  âœ… passport.js: Starting to load...
2025-11-02T08:44:49.157452987Z [inf]  âœ… passport.js: passport loaded
2025-11-02T08:44:49.157457080Z [inf]  âœ… passport.js: GoogleStrategy loaded
2025-11-02T08:44:49.157462347Z [inf]  2025-11-02 08:44:49.057 [[32minfo[39m] âœ… AuthService loading {
2025-11-02T08:44:49.157466267Z [inf]    "service": "mellchat-api",
2025-11-02T08:44:49.159280356Z [inf]  âœ… authService: loading uuid...
2025-11-02T08:44:49.159288092Z [inf]  2025-11-02 08:44:49.134 [[32minfo[39m] Redis client connected for rate limiting {
2025-11-02T08:44:49.159293470Z [inf]    "service": "mellchat-api",
2025-11-02T08:44:49.159298406Z [inf]    "version": "1.0.0"
2025-11-02T08:44:49.159302711Z [inf]  }
2025-11-02T08:44:49.159327367Z [inf]  âœ… authService: loading jwt...
2025-11-02T08:44:49.159331438Z [inf]  âœ… authService: jwt loaded
2025-11-02T08:44:49.159335267Z [inf]  âœ… authService: loading bcrypt...
2025-11-02T08:44:49.159339144Z [inf]  âœ… authService: bcrypt loaded
2025-11-02T08:44:50.169312283Z [inf]  
2025-11-02T08:44:50.169317428Z [inf]  > mellchat-api@1.0.0 start:with-migrations
2025-11-02T08:44:50.169322432Z [inf]  > NODE_ENV=production sh -c 'node apply-migrations.js && node src/index.js' || node src/index.js
2025-11-02T08:44:50.169327909Z [inf]  
2025-11-02T08:44:50.386984102Z [inf]  âœ… Connected to database on attempt 1
2025-11-02T08:44:50.390609238Z [inf]  âœ… Migrations tracking table ready
2025-11-02T08:44:50.390614582Z [inf]  ğŸ“‚ Migrations directory: /app/database/migrations
2025-11-02T08:44:50.402994252Z [inf]  ğŸ“ Found 20 migration files
2025-11-02T08:44:50.409453165Z [inf]  â­ï¸  Skipping 01_initial_schema.sql (already applied)
2025-11-02T08:44:50.409457915Z [inf]  â­ï¸  Skipping add_guest_sessions.sql (already applied)
2025-11-02T08:44:50.409462002Z [inf]  â­ï¸  Skipping add_fingerprint_to_guest_sessions.sql (already applied)
2025-11-02T08:44:50.411420651Z [inf]  â­ï¸  Skipping add_auth_users.sql (already applied)
2025-11-02T08:44:50.411424571Z [inf]  â­ï¸  Skipping add_auth_tables.sql (already applied)
2025-11-02T08:44:50.412817440Z [inf]  â­ï¸  Skipping add_message_scoring_fields.sql (already applied)
2025-11-02T08:44:50.412823394Z [inf]  â­ï¸  Skipping add_moderation_fields.sql (already applied)
2025-11-02T08:44:50.414429101Z [inf]  â­ï¸  Skipping add_materialized_views.sql (already applied)
2025-11-02T08:44:50.415979789Z [inf]  â­ï¸  Skipping add_advanced_indexes.sql (already applied)
2025-11-02T08:44:50.417342140Z [inf]  â­ï¸  Skipping add_critical_indexes.sql (already applied)
2025-11-02T08:44:50.417347405Z [inf]  â­ï¸  Skipping add_global_rules.sql (already applied)
2025-11-02T08:44:50.419081021Z [inf]  â­ï¸  Skipping add_performance_monitoring.sql (already applied)
2025-11-02T08:44:50.420617603Z [inf]  â­ï¸  Skipping add_user_activity_log.sql (already applied)
2025-11-02T08:44:50.420623796Z [inf]  â­ï¸  Skipping add_user_global_rules.sql (already applied)
2025-11-02T08:44:50.422270893Z [inf]  â­ï¸  Skipping add_user_sessions.sql (already applied)
2025-11-02T08:44:50.422281740Z [inf]  â­ï¸  Skipping add_user_settings.sql (already applied)
2025-11-02T08:44:50.424163531Z [inf]  â­ï¸  Skipping add_user_spam_rules.sql (already applied)
2025-11-02T08:44:50.424173617Z [inf]  â­ï¸  Skipping fix_schema_critical.sql (already applied)
2025-11-02T08:44:50.425863591Z [inf]  â­ï¸  Skipping fix_user_id.sql (already applied)
2025-11-02T08:44:50.425874003Z [inf]  â­ï¸  Skipping optimize_data_types.sql (already applied)
2025-11-02T08:44:50.425881536Z [inf]  
2025-11-02T08:44:50.425887831Z [inf]  ğŸ‰ Migrations completed!
2025-11-02T08:44:50.425892785Z [inf]     âœ… Applied: 0
2025-11-02T08:44:50.425898053Z [inf]     â­ï¸  Skipped: 20
2025-11-02T08:44:50.478773860Z [inf]  âœ… index.js: Starting to load...
2025-11-02T08:44:50.581460271Z [inf]  âœ… index.js: express loaded
2025-11-02T08:44:50.581466175Z [inf]  âœ… index.js: cors loaded
2025-11-02T08:44:50.583617388Z [inf]  âœ… index.js: helmet loaded
2025-11-02T08:44:50.583622004Z [inf]  âœ… index.js: cookieParser loaded
2025-11-02T08:44:50.585605963Z [inf]  âœ… index.js: dotenv loaded
2025-11-02T08:44:50.585612483Z [inf]  âœ… index.js: loading logger...
2025-11-02T08:44:50.585618256Z [inf]  âœ… logger.js: Starting to load...
2025-11-02T08:44:50.615379859Z [inf]  âœ… logger.js: winston loaded
2025-11-02T08:44:50.615384716Z [inf]  âœ… logger.js: DailyRotateFile loaded
2025-11-02T08:44:50.615389209Z [inf]  âœ… logger.js: path loaded
2025-11-02T08:44:50.636976227Z [inf]  âœ… index.js: logger loaded
2025-11-02T08:44:50.636980655Z [inf]  âœ… index.js: loading errorHandler...
2025-11-02T08:44:50.638716583Z [inf]  âœ… index.js: errorHandler loaded
2025-11-02T08:44:50.638725190Z [inf]  âœ… index.js: loading rateLimiter...
2025-11-02T08:44:50.814655930Z [inf]  2025-11-02 08:44:50.809 [[32minfo[39m] âœ… Rate limiter initialized {
2025-11-02T08:44:50.814663977Z [inf]    "service": "mellchat-api",
2025-11-02T08:44:50.814670700Z [inf]    "version": "1.0.0"
2025-11-02T08:44:50.814675629Z [inf]  }
2025-11-02T08:44:50.816418559Z [inf]  âœ… index.js: rateLimiter loaded
2025-11-02T08:44:50.816423669Z [inf]  âœ… index.js: loading metrics...
2025-11-02T08:44:50.850898939Z [inf]  2025-11-02 08:44:50.847 [[32minfo[39m] âœ… Metrics initialized {
2025-11-02T08:44:50.850905676Z [inf]    "service": "mellchat-api",
2025-11-02T08:44:50.850911050Z [inf]    "version": "1.0.0"
2025-11-02T08:44:50.850915686Z [inf]  }
2025-11-02T08:44:50.850921108Z [inf]  âœ… index.js: metrics loaded
2025-11-02T08:44:50.850925842Z [inf]  âœ… index.js: loading auth...
2025-11-02T08:44:50.850930894Z [inf]  âœ… index.js: auth loaded
2025-11-02T08:44:50.850935587Z [inf]  âœ… index.js: loading passport...
2025-11-02T08:44:50.850940373Z [inf]  âœ… passport.js: Starting to load...
2025-11-02T08:44:50.857680231Z [inf]  âœ… passport.js: passport loaded
2025-11-02T08:44:50.864636317Z [inf]  âœ… passport.js: GoogleStrategy loaded
2025-11-02T08:44:50.864642159Z [inf]  2025-11-02 08:44:50.859 [[32minfo[39m] âœ… AuthService loading {
2025-11-02T08:44:50.864648539Z [inf]    "service": "mellchat-api",
2025-11-02T08:44:50.864653849Z [inf]    "version": "1.0.0"
2025-11-02T08:44:50.864659446Z [inf]  }
2025-11-02T08:44:50.864664847Z [inf]  âœ… authService: loading databaseService...
2025-11-02T08:44:51.094413425Z [inf]  âœ… authService: bcrypt loaded
2025-11-02T08:44:51.094423070Z [inf]  âœ… authService: loading uuid...
2025-11-02T08:44:51.094429326Z [inf]  âœ… index.js: Starting to load...
2025-11-02T08:44:51.094474664Z [inf]  2025-11-02 08:44:50.898 [[32minfo[39m] âœ… DatabaseService loading {
2025-11-02T08:44:51.094484529Z [inf]    "service": "mellchat-api",
2025-11-02T08:44:51.094490513Z [inf]  }
2025-11-02T08:44:51.094494746Z [inf]    "version": "1.0.0"
2025-11-02T08:44:51.094518928Z [inf]  âœ… authService: databaseService loaded
2025-11-02T08:44:51.094530588Z [inf]  âœ… authService: loading jwt...
2025-11-02T08:44:51.094539687Z [inf]  âœ… authService: jwt loaded
2025-11-02T08:44:51.094559166Z [inf]  âœ… authService: loading bcrypt...
2025-11-02T08:44:51.122544165Z [inf]  âœ… index.js: express loaded
2025-11-02T08:44:51.123825421Z [inf]  âœ… index.js: cors loaded
2025-11-02T08:44:51.125372980Z [inf]  âœ… index.js: helmet loaded
2025-11-02T08:44:51.127188416Z [inf]  âœ… index.js: cookieParser loaded
2025-11-02T08:44:51.128651267Z [inf]  âœ… index.js: dotenv loaded
2025-11-02T08:44:51.128657535Z [inf]  âœ… index.js: loading logger...
2025-11-02T08:44:51.131475942Z [inf]  âœ… logger.js: Starting to load...
2025-11-02T08:44:51.154081430Z [inf]  âœ… logger.js: winston loaded
2025-11-02T08:44:51.157261050Z [inf]  âœ… logger.js: DailyRotateFile loaded
2025-11-02T08:44:51.157265074Z [inf]  âœ… logger.js: path loaded
2025-11-02T08:44:51.189018487Z [inf]  âœ… index.js: logger loaded
2025-11-02T08:44:51.189028318Z [inf]  âœ… index.js: loading errorHandler...
2025-11-02T08:44:51.189033878Z [inf]  âœ… index.js: errorHandler loaded
2025-11-02T08:44:51.189038660Z [inf]  âœ… index.js: loading rateLimiter...
2025-11-02T08:44:51.367693810Z [inf]  2025-11-02 08:44:51.356 [[32minfo[39m] âœ… Rate limiter initialized {
2025-11-02T08:44:51.367700095Z [inf]    "service": "mellchat-api",
2025-11-02T08:44:51.367706714Z [inf]    "version": "1.0.0"
2025-11-02T08:44:51.367714029Z [inf]  }
2025-11-02T08:44:51.367720717Z [inf]  âœ… index.js: rateLimiter loaded
2025-11-02T08:44:51.367728514Z [inf]  âœ… index.js: loading metrics...
2025-11-02T08:44:51.397330330Z [inf]  2025-11-02 08:44:51.395 [[32minfo[39m] âœ… Metrics initialized {
2025-11-02T08:44:51.397336733Z [inf]    "service": "mellchat-api",
2025-11-02T08:44:51.397341640Z [inf]    "version": "1.0.0"
2025-11-02T08:44:51.397346056Z [inf]  }
2025-11-02T08:44:51.397350350Z [inf]  âœ… index.js: metrics loaded
2025-11-02T08:44:51.397354907Z [inf]  âœ… index.js: loading auth...
2025-11-02T08:44:51.400212155Z [inf]  âœ… index.js: auth loaded
2025-11-02T08:44:51.400218848Z [inf]  âœ… index.js: loading passport...
2025-11-02T08:44:51.400223926Z [inf]  âœ… passport.js: Starting to load...
2025-11-02T08:44:51.402745095Z [inf]  âœ… passport.js: passport loaded
2025-11-02T08:44:51.412164749Z [inf]  âœ… authService: loading databaseService...
2025-11-02T08:44:51.412198065Z [inf]  âœ… passport.js: GoogleStrategy loaded
2025-11-02T08:44:51.412205316Z [inf]  2025-11-02 08:44:51.409 [[32minfo[39m] âœ… AuthService loading {
2025-11-02T08:44:51.412211490Z [inf]    "service": "mellchat-api",
2025-11-02T08:44:51.412217874Z [inf]    "version": "1.0.0"
2025-11-02T08:44:51.412225047Z [inf]  }
2025-11-02T08:44:51.451797497Z [inf]  2025-11-02 08:44:51.449 [[32minfo[39m] âœ… DatabaseService loading {
2025-11-02T08:44:51.451802138Z [inf]    "service": "mellchat-api",
2025-11-02T08:44:51.451806276Z [inf]    "version": "1.0.0"
2025-11-02T08:44:51.451810843Z [inf]  }
2025-11-02T08:44:51.451814815Z [inf]  âœ… authService: databaseService loaded
2025-11-02T08:44:51.451823798Z [inf]  âœ… authService: loading jwt...
2025-11-02T08:44:51.481398094Z [inf]  âœ… authService: jwt loaded
2025-11-02T08:44:51.481402715Z [inf]  âœ… authService: loading bcrypt...
2025-11-02T08:44:51.481408235Z [inf]  âœ… authService: bcrypt loaded
2025-11-02T08:44:51.481412656Z [inf]  âœ… authService: loading uuid...
2025-11-02T08:44:51.505178537Z [inf]  2025-11-02 08:44:51.497 [[32minfo[39m] Redis client connected for rate limiting {
2025-11-02T08:44:51.505185468Z [inf]    "service": "mellchat-api",
2025-11-02T08:44:51.505190440Z [inf]    "version": "1.0.0"
2025-11-02T08:44:51.505194501Z [inf]  }
2025-11-02T08:44:52.514467782Z [inf]  
2025-11-02T08:44:52.514475918Z [inf]  > mellchat-api@1.0.0 start:with-migrations
2025-11-02T08:44:52.514482574Z [inf]  > NODE_ENV=production sh -c 'node apply-migrations.js && node src/index.js' || node src/index.js
2025-11-02T08:44:52.514488654Z [inf]  
2025-11-02T08:44:52.786964510Z [inf]  âœ… Connected to database on attempt 1
2025-11-02T08:44:52.786972301Z [inf]  âœ… Migrations tracking table ready
2025-11-02T08:44:52.786979682Z [inf]  ğŸ“‚ Migrations directory: /app/database/migrations
2025-11-02T08:44:52.793556040Z [inf]  ğŸ“ Found 20 migration files
2025-11-02T08:44:52.798464423Z [inf]  â­ï¸  Skipping 01_initial_schema.sql (already applied)
2025-11-02T08:44:52.798470124Z [inf]  â­ï¸  Skipping add_guest_sessions.sql (already applied)
2025-11-02T08:44:52.800109354Z [inf]  â­ï¸  Skipping add_fingerprint_to_guest_sessions.sql (already applied)
2025-11-02T08:44:52.800115324Z [inf]  â­ï¸  Skipping add_auth_users.sql (already applied)
2025-11-02T08:44:52.801703080Z [inf]  â­ï¸  Skipping add_auth_tables.sql (already applied)
2025-11-02T08:44:52.803929397Z [inf]  â­ï¸  Skipping add_message_scoring_fields.sql (already applied)
2025-11-02T08:44:52.803938353Z [inf]  â­ï¸  Skipping add_moderation_fields.sql (already applied)
2025-11-02T08:44:52.805624133Z [inf]  â­ï¸  Skipping add_materialized_views.sql (already applied)
2025-11-02T08:44:52.805633436Z [inf]  â­ï¸  Skipping add_advanced_indexes.sql (already applied)
2025-11-02T08:44:52.807297081Z [inf]  â­ï¸  Skipping add_critical_indexes.sql (already applied)
2025-11-02T08:44:52.807310259Z [inf]  â­ï¸  Skipping add_global_rules.sql (already applied)
2025-11-02T08:44:52.808670378Z [inf]  â­ï¸  Skipping add_performance_monitoring.sql (already applied)
2025-11-02T08:44:52.808680926Z [inf]  â­ï¸  Skipping add_user_activity_log.sql (already applied)
2025-11-02T08:44:52.810767529Z [inf]  â­ï¸  Skipping add_user_global_rules.sql (already applied)
2025-11-02T08:44:52.810775909Z [inf]  â­ï¸  Skipping add_user_sessions.sql (already applied)
2025-11-02T08:44:52.812237083Z [inf]  â­ï¸  Skipping add_user_settings.sql (already applied)
2025-11-02T08:44:52.812242942Z [inf]  â­ï¸  Skipping add_user_spam_rules.sql (already applied)
2025-11-02T08:44:52.813912893Z [inf]  â­ï¸  Skipping fix_schema_critical.sql (already applied)
2025-11-02T08:44:52.813918098Z [inf]  â­ï¸  Skipping fix_user_id.sql (already applied)
2025-11-02T08:44:52.815621024Z [inf]  â­ï¸  Skipping optimize_data_types.sql (already applied)
2025-11-02T08:44:52.815625270Z [inf]  
2025-11-02T08:44:52.815629652Z [inf]  ğŸ‰ Migrations completed!
2025-11-02T08:44:52.815633556Z [inf]     âœ… Applied: 0
2025-11-02T08:44:52.815642164Z [inf]     â­ï¸  Skipped: 20
2025-11-02T08:44:52.863549645Z [inf]  âœ… index.js: Starting to load...
2025-11-02T08:44:53.183502703Z [inf]  âœ… index.js: express loaded
2025-11-02T08:44:53.183507377Z [inf]  âœ… index.js: cors loaded
2025-11-02T08:44:53.183512619Z [inf]  âœ… index.js: helmet loaded
2025-11-02T08:44:53.183516745Z [inf]  âœ… index.js: cookieParser loaded
2025-11-02T08:44:53.183522835Z [inf]  âœ… index.js: dotenv loaded
2025-11-02T08:44:53.183528438Z [inf]  âœ… index.js: loading logger...
2025-11-02T08:44:53.183557163Z [inf]  âœ… logger.js: Starting to load...
2025-11-02T08:44:53.183568010Z [inf]  âœ… logger.js: winston loaded
2025-11-02T08:44:53.183573832Z [inf]  âœ… logger.js: DailyRotateFile loaded
2025-11-02T08:44:53.183578194Z [inf]  âœ… logger.js: path loaded
2025-11-02T08:44:53.183582770Z [inf]  âœ… index.js: logger loaded
2025-11-02T08:44:53.183587331Z [inf]  âœ… index.js: loading errorHandler...
2025-11-02T08:44:53.183591537Z [inf]  âœ… index.js: errorHandler loaded
2025-11-02T08:44:53.183595902Z [inf]  âœ… index.js: loading rateLimiter...
2025-11-02T08:44:53.195215005Z [inf]  2025-11-02 08:44:53.189 [[32minfo[39m] âœ… Rate limiter initialized {
2025-11-02T08:44:53.195220667Z [inf]    "service": "mellchat-api",
2025-11-02T08:44:53.195228059Z [inf]    "version": "1.0.0"
2025-11-02T08:44:53.195235448Z [inf]  }
2025-11-02T08:44:53.196878489Z [inf]  âœ… index.js: rateLimiter loaded
2025-11-02T08:44:53.196882691Z [inf]  âœ… index.js: loading metrics...
2025-11-02T08:44:53.232067747Z [inf]  2025-11-02 08:44:53.225 [[32minfo[39m] âœ… Metrics initialized {
2025-11-02T08:44:53.232073130Z [inf]    "service": "mellchat-api",
2025-11-02T08:44:53.232077474Z [inf]    "version": "1.0.0"
2025-11-02T08:44:53.232082184Z [inf]  }
2025-11-02T08:44:53.232089939Z [inf]  âœ… index.js: metrics loaded
2025-11-02T08:44:53.232095055Z [inf]  âœ… index.js: loading auth...
2025-11-02T08:44:53.232099760Z [inf]  âœ… index.js: auth loaded
2025-11-02T08:44:53.232103965Z [inf]  âœ… index.js: loading passport...
2025-11-02T08:44:53.232108328Z [inf]  âœ… passport.js: Starting to load...
2025-11-02T08:44:53.232113714Z [inf]  âœ… passport.js: passport loaded
2025-11-02T08:44:53.246305717Z [inf]  âœ… passport.js: GoogleStrategy loaded
2025-11-02T08:44:53.246316382Z [inf]  2025-11-02 08:44:53.242 [[32minfo[39m] âœ… AuthService loading {
2025-11-02T08:44:53.246327697Z [inf]    "service": "mellchat-api",
2025-11-02T08:44:53.246337011Z [inf]    "version": "1.0.0"
2025-11-02T08:44:53.246345901Z [inf]  }
2025-11-02T08:44:53.246351731Z [inf]  âœ… authService: loading databaseService...
2025-11-02T08:44:53.286210013Z [inf]    "service": "mellchat-api",
2025-11-02T08:44:53.286239128Z [inf]  2025-11-02 08:44:53.274 [[32minfo[39m] âœ… DatabaseService loading {
2025-11-02T08:44:53.288446863Z [inf]    "version": "1.0.0"
2025-11-02T08:44:53.288455201Z [inf]  }
2025-11-02T08:44:53.288460720Z [inf]  âœ… authService: databaseService loaded
2025-11-02T08:44:53.288466192Z [inf]  âœ… authService: loading jwt...
2025-11-02T08:44:53.307925987Z [inf]  âœ… authService: jwt loaded
2025-11-02T08:44:53.307930277Z [inf]  âœ… authService: loading bcrypt...
2025-11-02T08:44:53.307934691Z [inf]  âœ… authService: bcrypt loaded
2025-11-02T08:44:53.307939146Z [inf]  âœ… authService: loading uuid...
2025-11-02T08:44:53.401991360Z [inf]  âœ… index.js: Starting to load...
2025-11-02T08:44:53.499661729Z [inf]  âœ… index.js: express loaded
2025-11-02T08:44:53.499666806Z [inf]  âœ… index.js: cors loaded
2025-11-02T08:44:53.499680251Z [inf]  âœ… index.js: helmet loaded
2025-11-02T08:44:53.499684812Z [inf]  âœ… index.js: cookieParser loaded
2025-11-02T08:44:53.499689327Z [inf]  âœ… index.js: dotenv loaded
2025-11-02T08:44:53.499693239Z [inf]  âœ… index.js: loading logger...
2025-11-02T08:44:53.499696992Z [inf]  âœ… logger.js: Starting to load...
2025-11-02T08:44:53.528311752Z [inf]  âœ… logger.js: winston loaded
2025-11-02T08:44:53.528318177Z [inf]  âœ… logger.js: DailyRotateFile loaded
2025-11-02T08:44:53.528322958Z [inf]  âœ… logger.js: path loaded
2025-11-02T08:44:53.553902253Z [inf]  âœ… index.js: logger loaded
2025-11-02T08:44:53.553907453Z [inf]  âœ… index.js: loading errorHandler...
2025-11-02T08:44:53.553912257Z [inf]  âœ… index.js: errorHandler loaded
2025-11-02T08:44:53.553917954Z [inf]  âœ… index.js: loading rateLimiter...
2025-11-02T08:44:53.713548201Z [inf]  2025-11-02 08:44:53.708 [[32minfo[39m] âœ… Rate limiter initialized {
2025-11-02T08:44:53.713556844Z [inf]    "service": "mellchat-api",
2025-11-02T08:44:53.713562739Z [inf]    "version": "1.0.0"
2025-11-02T08:44:53.713568653Z [inf]  }
2025-11-02T08:44:53.715172278Z [inf]  âœ… index.js: rateLimiter loaded
2025-11-02T08:44:53.715180885Z [inf]  âœ… index.js: loading metrics...
2025-11-02T08:44:53.763193317Z [inf]  2025-11-02 08:44:53.743 [[32minfo[39m] âœ… Metrics initialized {
2025-11-02T08:44:53.763197637Z [inf]    "service": "mellchat-api",
2025-11-02T08:44:53.763201908Z [inf]    "version": "1.0.0"
2025-11-02T08:44:53.763207033Z [inf]  }
2025-11-02T08:44:53.763211343Z [inf]  âœ… index.js: metrics loaded
2025-11-02T08:44:53.763215607Z [inf]  âœ… index.js: loading auth...
2025-11-02T08:44:53.763219387Z [inf]  âœ… index.js: auth loaded
2025-11-02T08:44:53.763223150Z [inf]  âœ… index.js: loading passport...
2025-11-02T08:44:53.763226795Z [inf]  âœ… passport.js: Starting to load...
2025-11-02T08:44:53.763230780Z [inf]  âœ… passport.js: passport loaded
2025-11-02T08:44:53.763235010Z [inf]  âœ… passport.js: GoogleStrategy loaded
2025-11-02T08:44:53.763239160Z [inf]  2025-11-02 08:44:53.761 [[32minfo[39m] âœ… AuthService loading {
2025-11-02T08:44:53.763242696Z [inf]    "service": "mellchat-api",
2025-11-02T08:44:53.763246888Z [inf]    "version": "1.0.0"
2025-11-02T08:44:53.763250338Z [inf]  }
2025-11-02T08:44:53.764634489Z [inf]  âœ… authService: loading databaseService...
2025-11-02T08:44:53.794776594Z [inf]  2025-11-02 08:44:53.792 [[32minfo[39m] âœ… DatabaseService loading {
2025-11-02T08:44:53.794784460Z [inf]    "service": "mellchat-api",
2025-11-02T08:44:53.794789370Z [inf]    "version": "1.0.0"
2025-11-02T08:44:53.794796474Z [inf]  }
2025-11-02T08:44:53.794801070Z [inf]  âœ… authService: databaseService loaded
2025-11-02T08:44:53.794805726Z [inf]  âœ… authService: loading jwt...
2025-11-02T08:44:53.827807401Z [inf]  âœ… authService: jwt loaded
2025-11-02T08:44:53.827816312Z [inf]  âœ… authService: loading bcrypt...
2025-11-02T08:44:53.827822148Z [inf]  âœ… authService: bcrypt loaded
2025-11-02T08:44:53.827828058Z [inf]  âœ… authService: loading uuid...
2025-11-02T08:44:53.842192974Z [inf]  2025-11-02 08:44:53.838 [[32minfo[39m] Redis client connected for rate limiting {
2025-11-02T08:44:53.842198880Z [inf]    "service": "mellchat-api",
2025-11-02T08:44:53.842204905Z [inf]    "version": "1.0.0"
2025-11-02T08:44:53.842211229Z [inf]  }
2025-11-02T08:44:55.246800107Z [inf]  > NODE_ENV=production sh -c 'node apply-migrations.js && node src/index.js' || node src/index.js
2025-11-02T08:44:55.246814539Z [inf]  
2025-11-02T08:44:55.246831357Z [inf]  > mellchat-api@1.0.0 start:with-migrations
2025-11-02T08:44:55.246860686Z [inf]  
2025-11-02T08:44:55.361763461Z [inf]  âœ… Connected to database on attempt 1
2025-11-02T08:44:55.361775036Z [inf]  âœ… Migrations tracking table ready
2025-11-02T08:44:55.361784102Z [inf]  ğŸ“‚ Migrations directory: /app/database/migrations
2025-11-02T08:44:55.372193430Z [inf]  ğŸ“ Found 20 migration files
2025-11-02T08:44:55.382504666Z [inf]  â­ï¸  Skipping 01_initial_schema.sql (already applied)
2025-11-02T08:44:55.382512094Z [inf]  â­ï¸  Skipping add_guest_sessions.sql (already applied)
2025-11-02T08:44:55.382517215Z [inf]  â­ï¸  Skipping add_fingerprint_to_guest_sessions.sql (already applied)
2025-11-02T08:44:55.383976022Z [inf]  â­ï¸  Skipping add_auth_users.sql (already applied)
2025-11-02T08:44:55.386305989Z [inf]  â­ï¸  Skipping add_auth_tables.sql (already applied)
2025-11-02T08:44:55.388765442Z [inf]  â­ï¸  Skipping add_message_scoring_fields.sql (already applied)
2025-11-02T08:44:55.388774022Z [inf]  â­ï¸  Skipping add_moderation_fields.sql (already applied)
2025-11-02T08:44:55.392023016Z [inf]  â­ï¸  Skipping add_materialized_views.sql (already applied)
2025-11-02T08:44:55.392030903Z [inf]  â­ï¸  Skipping add_advanced_indexes.sql (already applied)
2025-11-02T08:44:55.394454936Z [inf]  â­ï¸  Skipping add_critical_indexes.sql (already applied)
2025-11-02T08:44:55.394464514Z [inf]  â­ï¸  Skipping add_global_rules.sql (already applied)
2025-11-02T08:44:55.398959179Z [inf]  â­ï¸  Skipping add_performance_monitoring.sql (already applied)
2025-11-02T08:44:55.398966917Z [inf]  â­ï¸  Skipping add_user_activity_log.sql (already applied)
2025-11-02T08:44:55.398972788Z [inf]  â­ï¸  Skipping add_user_global_rules.sql (already applied)
2025-11-02T08:44:55.398978528Z [inf]  â­ï¸  Skipping add_user_sessions.sql (already applied)
2025-11-02T08:44:55.401005236Z [inf]  â­ï¸  Skipping add_user_settings.sql (already applied)
2025-11-02T08:44:55.401013470Z [inf]  â­ï¸  Skipping add_user_spam_rules.sql (already applied)
2025-11-02T08:44:55.408791139Z [inf]  â­ï¸  Skipping fix_schema_critical.sql (already applied)
2025-11-02T08:44:55.408799784Z [inf]  â­ï¸  Skipping fix_user_id.sql (already applied)
2025-11-02T08:44:55.414003465Z [inf]  â­ï¸  Skipping optimize_data_types.sql (already applied)
2025-11-02T08:44:55.414012805Z [inf]  
2025-11-02T08:44:55.414019467Z [inf]  ğŸ‰ Migrations completed!
2025-11-02T08:44:55.414024924Z [inf]     âœ… Applied: 0
2025-11-02T08:44:55.414030155Z [inf]     â­ï¸  Skipped: 20
2025-11-02T08:44:55.473372760Z [inf]  âœ… index.js: Starting to load...
2025-11-02T08:44:55.609312319Z [inf]  âœ… index.js: express loaded
2025-11-02T08:44:55.609323138Z [inf]  âœ… index.js: cors loaded
2025-11-02T08:44:55.609331235Z [inf]  âœ… index.js: helmet loaded
2025-11-02T08:44:55.609335195Z [inf]  âœ… index.js: cookieParser loaded
2025-11-02T08:44:55.609338987Z [inf]  âœ… index.js: dotenv loaded
2025-11-02T08:44:55.609343060Z [inf]  âœ… index.js: loading logger...
2025-11-02T08:44:55.609347223Z [inf]  âœ… logger.js: Starting to load...
2025-11-02T08:44:55.635813710Z [inf]  âœ… logger.js: winston loaded
2025-11-02T08:44:55.644521060Z [inf]  âœ… logger.js: DailyRotateFile loaded
2025-11-02T08:44:55.644531258Z [inf]  âœ… logger.js: path loaded
2025-11-02T08:44:55.674115790Z [inf]  âœ… index.js: logger loaded
2025-11-02T08:44:55.674121340Z [inf]  âœ… index.js: loading errorHandler...
2025-11-02T08:44:55.674126392Z [inf]  âœ… index.js: errorHandler loaded
2025-11-02T08:44:55.674131206Z [inf]  âœ… index.js: loading rateLimiter...
2025-11-02T08:44:55.864585509Z [inf]  2025-11-02 08:44:55.830 [[32minfo[39m] âœ… Rate limiter initialized {
2025-11-02T08:44:55.864592894Z [inf]    "service": "mellchat-api",
2025-11-02T08:44:55.864597793Z [inf]    "version": "1.0.0"
2025-11-02T08:44:55.864602855Z [inf]  }
2025-11-02T08:44:55.864607188Z [inf]  âœ… index.js: rateLimiter loaded
2025-11-02T08:44:55.864612754Z [inf]  âœ… index.js: loading metrics...
2025-11-02T08:44:55.879031571Z [inf]  âœ… index.js: metrics loaded
2025-11-02T08:44:55.879079450Z [inf]  2025-11-02 08:44:55.876 [[32minfo[39m] âœ… Metrics initialized {
2025-11-02T08:44:55.879084347Z [inf]    "service": "mellchat-api",
2025-11-02T08:44:55.879089730Z [inf]    "version": "1.0.0"
2025-11-02T08:44:55.879094299Z [inf]  }
2025-11-02T08:44:55.879295262Z [inf]  âœ… index.js: loading auth...
2025-11-02T08:44:55.879943379Z [inf]  âœ… index.js: auth loaded
2025-11-02T08:44:55.879949585Z [inf]  âœ… index.js: loading passport...
2025-11-02T08:44:55.879955423Z [inf]  âœ… passport.js: Starting to load...
2025-11-02T08:44:55.887302459Z [inf]  âœ… passport.js: passport loaded
2025-11-02T08:44:55.895352313Z [inf]  âœ… passport.js: GoogleStrategy loaded
2025-11-02T08:44:55.895357158Z [inf]  2025-11-02 08:44:55.891 [[32minfo[39m] âœ… AuthService loading {
2025-11-02T08:44:55.895362142Z [inf]    "service": "mellchat-api",
2025-11-02T08:44:55.895366199Z [inf]    "version": "1.0.0"
2025-11-02T08:44:55.895370984Z [inf]  }
2025-11-02T08:44:55.895374821Z [inf]  âœ… authService: loading databaseService...
2025-11-02T08:44:56.151842153Z [inf]  âœ… authService: loading jwt...
2025-11-02T08:44:56.151854077Z [inf]  âœ… authService: jwt loaded
2025-11-02T08:44:56.151861222Z [inf]  âœ… authService: loading bcrypt...
2025-11-02T08:44:56.151868320Z [inf]  âœ… authService: bcrypt loaded
2025-11-02T08:44:56.151873975Z [inf]  âœ… authService: loading uuid...
2025-11-02T08:44:56.151881613Z [inf]  2025-11-02 08:44:55.993 [[32minfo[39m] Redis client connected for rate limiting {
2025-11-02T08:44:56.151882007Z [inf]  2025-11-02 08:44:55.936 [[32minfo[39m] âœ… DatabaseService loading {
2025-11-02T08:44:56.151889209Z [inf]    "service": "mellchat-api",
2025-11-02T08:44:56.151889575Z [inf]    "service": "mellchat-api",
2025-11-02T08:44:56.151896224Z [inf]    "version": "1.0.0"
2025-11-02T08:44:56.151897494Z [inf]    "version": "1.0.0"
2025-11-02T08:44:56.151903229Z [inf]  }
2025-11-02T08:44:56.151903797Z [inf]  }
2025-11-02T08:44:56.151908870Z [inf]  âœ… authService: databaseService loaded
2025-11-02T08:44:56.151911534Z [inf]  âœ… index.js: Starting to load...
2025-11-02T08:44:56.151916143Z [inf]  âœ… index.js: express loaded
2025-11-02T08:44:56.151920351Z [inf]  âœ… index.js: cors loaded
2025-11-02T08:44:56.151924776Z [inf]  âœ… index.js: helmet loaded
2025-11-02T08:44:56.151929039Z [inf]  âœ… index.js: cookieParser loaded
2025-11-02T08:44:56.151932958Z [inf]  âœ… index.js: dotenv loaded
2025-11-02T08:44:56.151936915Z [inf]  âœ… index.js: loading logger...
2025-11-02T08:44:56.151942038Z [inf]  âœ… logger.js: Starting to load...
2025-11-02T08:44:56.176867807Z [inf]  âœ… logger.js: winston loaded
2025-11-02T08:44:56.176875623Z [inf]  âœ… logger.js: DailyRotateFile loaded
2025-11-02T08:44:56.176882486Z [inf]  âœ… logger.js: path loaded
2025-11-02T08:44:56.204524823Z [inf]  âœ… index.js: logger loaded
2025-11-02T08:44:56.204530532Z [inf]  âœ… index.js: loading errorHandler...
2025-11-02T08:44:56.204535094Z [inf]  âœ… index.js: errorHandler loaded
2025-11-02T08:44:56.204540037Z [inf]  âœ… index.js: loading rateLimiter...
2025-11-02T08:44:56.353631176Z [inf]  2025-11-02 08:44:56.348 [[32minfo[39m] âœ… Rate limiter initialized {
2025-11-02T08:44:56.353638793Z [inf]    "service": "mellchat-api",
2025-11-02T08:44:56.353644812Z [inf]    "version": "1.0.0"
2025-11-02T08:44:56.353650415Z [inf]  }
2025-11-02T08:44:56.355041260Z [inf]  âœ… index.js: rateLimiter loaded
2025-11-02T08:44:56.355048753Z [inf]  âœ… index.js: loading metrics...
2025-11-02T08:44:56.398900567Z [inf]  2025-11-02 08:44:56.382 [[32minfo[39m] âœ… Metrics initialized {
2025-11-02T08:44:56.398911312Z [inf]    "service": "mellchat-api",
2025-11-02T08:44:56.398916239Z [inf]    "version": "1.0.0"
2025-11-02T08:44:56.398920677Z [inf]  }
2025-11-02T08:44:56.398933781Z [inf]  âœ… index.js: metrics loaded
2025-11-02T08:44:56.398937943Z [inf]  âœ… index.js: loading auth...
2025-11-02T08:44:56.398941852Z [inf]  âœ… index.js: auth loaded
2025-11-02T08:44:56.398945963Z [inf]  âœ… index.js: loading passport...
2025-11-02T08:44:56.398950119Z [inf]  âœ… passport.js: Starting to load...
2025-11-02T08:44:56.398957504Z [inf]  âœ… passport.js: passport loaded
2025-11-02T08:44:56.400623335Z [inf]  âœ… passport.js: GoogleStrategy loaded
2025-11-02T08:44:56.402230866Z [inf]  2025-11-02 08:44:56.400 [[32minfo[39m] âœ… AuthService loading {
2025-11-02T08:44:56.402240773Z [inf]    "service": "mellchat-api",
2025-11-02T08:44:56.402246121Z [inf]    "version": "1.0.0"
2025-11-02T08:44:56.402251142Z [inf]  }
2025-11-02T08:44:56.402255573Z [inf]  âœ… authService: loading databaseService...
2025-11-02T08:44:56.429196371Z [inf]  2025-11-02 08:44:56.428 [[32minfo[39m] âœ… DatabaseService loading {
2025-11-02T08:44:56.429204914Z [inf]    "service": "mellchat-api",
2025-11-02T08:44:56.429210922Z [inf]    "version": "1.0.0"
2025-11-02T08:44:56.429216975Z [inf]  }
2025-11-02T08:44:56.430631486Z [inf]  âœ… authService: databaseService loaded
2025-11-02T08:44:56.430638138Z [inf]  âœ… authService: loading jwt...
2025-11-02T08:44:56.459426226Z [inf]  âœ… authService: jwt loaded
2025-11-02T08:44:56.459433126Z [inf]  âœ… authService: loading bcrypt...
2025-11-02T08:44:56.465788229Z [inf]  âœ… authService: bcrypt loaded
2025-11-02T08:44:56.465796320Z [inf]  âœ… authService: loading uuid...
2025-11-02T08:44:56.493610337Z [inf]  2025-11-02 08:44:56.482 [[32minfo[39m] Redis client connected for rate limiting {
2025-11-02T08:44:56.493616828Z [inf]    "service": "mellchat-api",
2025-11-02T08:44:56.493621609Z [inf]    "version": "1.0.0"
2025-11-02T08:44:56.493625967Z [inf]  }
2025-11-02T08:44:57.493668352Z [inf]  
2025-11-02T08:44:57.493677845Z [inf]  > mellchat-api@1.0.0 start:with-migrations
2025-11-02T08:44:57.493684302Z [inf]  > NODE_ENV=production sh -c 'node apply-migrations.js && node src/index.js' || node src/index.js
2025-11-02T08:44:57.493689571Z [inf]  
2025-11-02T08:44:57.783373381Z [inf]  âœ… Connected to database on attempt 1
2025-11-02T08:44:57.783381395Z [inf]  âœ… Migrations tracking table ready
2025-11-02T08:44:57.783386997Z [inf]  ğŸ“‚ Migrations directory: /app/database/migrations
2025-11-02T08:44:57.793421793Z [inf]  ğŸ“ Found 20 migration files
2025-11-02T08:44:57.798987058Z [inf]  â­ï¸  Skipping 01_initial_schema.sql (already applied)
2025-11-02T08:44:57.804399215Z [inf]  â­ï¸  Skipping add_guest_sessions.sql (already applied)
2025-11-02T08:44:57.804433875Z [inf]  â­ï¸  Skipping add_fingerprint_to_guest_sessions.sql (already applied)
2025-11-02T08:44:57.805287908Z [inf]  â­ï¸  Skipping add_auth_users.sql (already applied)
2025-11-02T08:44:57.805294966Z [inf]  â­ï¸  Skipping add_auth_tables.sql (already applied)
2025-11-02T08:44:57.806232924Z [inf]  â­ï¸  Skipping add_message_scoring_fields.sql (already applied)
2025-11-02T08:44:57.811823603Z [inf]  â­ï¸  Skipping add_moderation_fields.sql (already applied)
2025-11-02T08:44:57.811834596Z [inf]  â­ï¸  Skipping add_materialized_views.sql (already applied)
2025-11-02T08:44:57.816854115Z [inf]  â­ï¸  Skipping add_advanced_indexes.sql (already applied)
2025-11-02T08:44:57.816859867Z [inf]  â­ï¸  Skipping add_critical_indexes.sql (already applied)
2025-11-02T08:44:57.816865399Z [inf]  â­ï¸  Skipping add_global_rules.sql (already applied)
2025-11-02T08:44:57.818075007Z [inf]  â­ï¸  Skipping add_performance_monitoring.sql (already applied)
2025-11-02T08:44:57.818082514Z [inf]  â­ï¸  Skipping add_user_activity_log.sql (already applied)
2025-11-02T08:44:57.818989069Z [inf]  â­ï¸  Skipping add_user_global_rules.sql (already applied)
2025-11-02T08:44:57.825416689Z [inf]  â­ï¸  Skipping add_user_sessions.sql (already applied)
2025-11-02T08:44:57.825426384Z [inf]  â­ï¸  Skipping add_user_settings.sql (already applied)
2025-11-02T08:44:57.826457993Z [inf]  â­ï¸  Skipping add_user_spam_rules.sql (already applied)
2025-11-02T08:44:57.826466494Z [inf]  â­ï¸  Skipping fix_schema_critical.sql (already applied)
2025-11-02T08:44:57.827189726Z [inf]  â­ï¸  Skipping fix_user_id.sql (already applied)
2025-11-02T08:44:57.828421118Z [inf]  â­ï¸  Skipping optimize_data_types.sql (already applied)
2025-11-02T08:44:57.828428402Z [inf]  
2025-11-02T08:44:57.828434872Z [inf]  ğŸ‰ Migrations completed!
2025-11-02T08:44:57.828440340Z [inf]     âœ… Applied: 0
2025-11-02T08:44:57.828445477Z [inf]     â­ï¸  Skipped: 20
2025-11-02T08:44:57.895734684Z [inf]  âœ… index.js: Starting to load...
2025-11-02T08:44:58.169482803Z [inf]  âœ… index.js: express loaded
2025-11-02T08:44:58.169495900Z [inf]  âœ… index.js: cors loaded
2025-11-02T08:44:58.169501932Z [inf]  âœ… index.js: helmet loaded
2025-11-02T08:44:58.169507610Z [inf]  âœ… index.js: cookieParser loaded
2025-11-02T08:44:58.169512849Z [inf]  âœ… index.js: dotenv loaded
2025-11-02T08:44:58.169518880Z [inf]  âœ… index.js: loading logger...
2025-11-02T08:44:58.169523653Z [inf]  âœ… logger.js: Starting to load...
2025-11-02T08:44:58.169542024Z [inf]  âœ… logger.js: winston loaded
2025-11-02T08:44:58.169548423Z [inf]  âœ… logger.js: DailyRotateFile loaded
2025-11-02T08:44:58.169554372Z [inf]  âœ… logger.js: path loaded
2025-11-02T08:44:58.169559802Z [inf]  âœ… index.js: logger loaded
2025-11-02T08:44:58.169564846Z [inf]  âœ… index.js: loading errorHandler...
2025-11-02T08:44:58.169569591Z [inf]  âœ… index.js: errorHandler loaded
2025-11-02T08:44:58.169574549Z [inf]  âœ… index.js: loading rateLimiter...
2025-11-02T08:44:58.269607304Z [inf]  2025-11-02 08:44:58.261 [[32minfo[39m] âœ… Rate limiter initialized {
2025-11-02T08:44:58.269615376Z [inf]    "service": "mellchat-api",
2025-11-02T08:44:58.269622587Z [inf]    "version": "1.0.0"
2025-11-02T08:44:58.269627835Z [inf]  }
2025-11-02T08:44:58.271428149Z [inf]  âœ… index.js: rateLimiter loaded
2025-11-02T08:44:58.271434598Z [inf]  âœ… index.js: loading metrics...
2025-11-02T08:44:58.304476402Z [inf]  2025-11-02 08:44:58.300 [[32minfo[39m] âœ… Metrics initialized {
2025-11-02T08:44:58.304487246Z [inf]    "service": "mellchat-api",
2025-11-02T08:44:58.304494456Z [inf]    "version": "1.0.0"
2025-11-02T08:44:58.304500279Z [inf]  }
2025-11-02T08:44:58.304506650Z [inf]  âœ… index.js: metrics loaded
2025-11-02T08:44:58.304513492Z [inf]  âœ… index.js: loading auth...
2025-11-02T08:44:58.304520383Z [inf]  âœ… index.js: auth loaded
2025-11-02T08:44:58.304526231Z [inf]  âœ… index.js: loading passport...
2025-11-02T08:44:58.304532025Z [inf]  âœ… passport.js: Starting to load...
2025-11-02T08:44:58.311413606Z [inf]  âœ… passport.js: passport loaded
2025-11-02T08:44:58.313246782Z [inf]  âœ… passport.js: GoogleStrategy loaded
2025-11-02T08:44:58.315367277Z [inf]  2025-11-02 08:44:58.312 [[32minfo[39m] âœ… AuthService loading {
2025-11-02T08:44:58.315374072Z [inf]    "service": "mellchat-api",
2025-11-02T08:44:58.315378958Z [inf]    "version": "1.0.0"
2025-11-02T08:44:58.315383726Z [inf]  }
2025-11-02T08:44:58.315388371Z [inf]  âœ… authService: loading databaseService...
2025-11-02T08:44:58.350511327Z [inf]  2025-11-02 08:44:58.349 [[32minfo[39m] âœ… DatabaseService loading {
2025-11-02T08:44:58.350520768Z [inf]    "service": "mellchat-api",
2025-11-02T08:44:58.350526646Z [inf]    "version": "1.0.0"
2025-11-02T08:44:58.350532012Z [inf]  }
2025-11-02T08:44:58.350536819Z [inf]  âœ… authService: databaseService loaded
2025-11-02T08:44:58.350546341Z [inf]  âœ… authService: loading jwt...
2025-11-02T08:44:58.377065025Z [inf]  âœ… authService: jwt loaded
2025-11-02T08:44:58.377073426Z [inf]  âœ… authService: loading bcrypt...
2025-11-02T08:44:58.378815551Z [inf]  âœ… authService: bcrypt loaded
2025-11-02T08:44:58.378821585Z [inf]  âœ… authService: loading uuid...
2025-11-02T08:44:58.451889166Z [inf]  âœ… index.js: Starting to load...
2025-11-02T08:44:58.565258783Z [inf]  âœ… index.js: express loaded
2025-11-02T08:44:58.565265621Z [inf]  âœ… index.js: cors loaded
2025-11-02T08:44:58.565270155Z [inf]  âœ… index.js: helmet loaded
2025-11-02T08:44:58.565274418Z [inf]  âœ… index.js: cookieParser loaded
2025-11-02T08:44:58.565278602Z [inf]  âœ… index.js: dotenv loaded
2025-11-02T08:44:58.565282324Z [inf]  âœ… index.js: loading logger...
2025-11-02T08:44:58.565286094Z [inf]  âœ… logger.js: Starting to load...
2025-11-02T08:44:58.594770078Z [inf]  âœ… logger.js: winston loaded
2025-11-02T08:44:58.601465906Z [inf]  âœ… logger.js: DailyRotateFile loaded
2025-11-02T08:44:58.601475279Z [inf]  âœ… logger.js: path loaded
2025-11-02T08:44:58.630729456Z [inf]  âœ… index.js: logger loaded
2025-11-02T08:44:58.630740204Z [inf]  âœ… index.js: loading errorHandler...
2025-11-02T08:44:58.630746439Z [inf]  âœ… index.js: errorHandler loaded
2025-11-02T08:44:58.630751885Z [inf]  âœ… index.js: loading rateLimiter...
2025-11-02T08:44:58.889652802Z [inf]  2025-11-02 08:44:58.869 [[32minfo[39m] âœ… Rate limiter initialized {
2025-11-02T08:44:58.889661505Z [inf]    "service": "mellchat-api",
2025-11-02T08:44:58.889667311Z [inf]    "version": "1.0.0"
2025-11-02T08:44:58.889671985Z [inf]  }
2025-11-02T08:44:58.889676816Z [inf]  âœ… index.js: rateLimiter loaded
2025-11-02T08:44:58.889682112Z [inf]  âœ… index.js: loading metrics...
2025-11-02T08:44:59.201720668Z [inf]  }
2025-11-02T08:44:59.201723827Z [inf]  2025-11-02 08:44:59.011 [[32minfo[39m] Redis client connected for rate limiting {
2025-11-02T08:44:59.201731401Z [inf]  âœ… authService: loading databaseService...
2025-11-02T08:44:59.201735484Z [inf]  âœ… authService: loading jwt...
2025-11-02T08:44:59.201739619Z [inf]  2025-11-02 08:44:58.963 [[32minfo[39m] âœ… DatabaseService loading {
2025-11-02T08:44:59.201748068Z [inf]  2025-11-02 08:44:58.911 [[32minfo[39m] âœ… Metrics initialized {
2025-11-02T08:44:59.201748123Z [inf]  âœ… authService: jwt loaded
2025-11-02T08:44:59.201749553Z [inf]    "service": "mellchat-api",
2025-11-02T08:44:59.201755188Z [inf]  âœ… authService: loading bcrypt...
2025-11-02T08:44:59.201758134Z [inf]    "version": "1.0.0"
2025-11-02T08:44:59.201758228Z [inf]    "service": "mellchat-api",
2025-11-02T08:44:59.201761727Z [inf]  âœ… authService: bcrypt loaded
2025-11-02T08:44:59.201767254Z [inf]  }
2025-11-02T08:44:59.201768855Z [inf]    "version": "1.0.0"
2025-11-02T08:44:59.201772551Z [inf]  âœ… authService: loading uuid...
2025-11-02T08:44:59.201775334Z [inf]  âœ… authService: databaseService loaded
2025-11-02T08:44:59.201777931Z [inf]  }
2025-11-02T08:44:59.201784000Z [inf]  âœ… index.js: metrics loaded
2025-11-02T08:44:59.201790040Z [inf]  âœ… index.js: loading auth...
2025-11-02T08:44:59.201796602Z [inf]  âœ… index.js: auth loaded
2025-11-02T08:44:59.201801700Z [inf]  âœ… index.js: loading passport...
2025-11-02T08:44:59.201806968Z [inf]  âœ… passport.js: Starting to load...
2025-11-02T08:44:59.201813371Z [inf]  âœ… passport.js: passport loaded
2025-11-02T08:44:59.201819189Z [inf]  âœ… passport.js: GoogleStrategy loaded
2025-11-02T08:44:59.201824747Z [inf]  2025-11-02 08:44:58.931 [[32minfo[39m] âœ… AuthService loading {
2025-11-02T08:44:59.201830477Z [inf]    "service": "mellchat-api",
2025-11-02T08:44:59.201836535Z [inf]    "version": "1.0.0"
2025-11-02T08:44:59.203797165Z [inf]    "service": "mellchat-api",
2025-11-02T08:44:59.203801927Z [inf]    "version": "1.0.0"
2025-11-02T08:44:59.203807990Z [inf]  }